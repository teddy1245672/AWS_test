(function(t){function e(e){for(var i,n,l=e[0],s=e[1],c=e[2],p=0,d=[];p<l.length;p++)n=l[p],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&d.push(o[n][0]),o[n]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(t[i]=s[i]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,l=1;l<a.length;l++){var s=a[l];0!==o[s]&&(i=!1)}i&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var i={},o={app:0},r=[];function n(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=i,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=s;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("64a9"),o=a.n(i);o.a},"0e1b":function(t,e,a){},"0f49":function(t,e,a){},"113b":function(t,e,a){"use strict";var i=a("1fd4"),o=a.n(i);o.a},"12c6":function(t,e,a){"use strict";var i=a("9489"),o=a.n(i);o.a},1318:function(t,e,a){"use strict";var i=a("bbcc"),o=a.n(i);o.a},"1fd4":function(t,e,a){},2568:function(t,e,a){"use strict";var i=a("0e1b"),o=a.n(i);o.a},2795:function(t,e,a){"use strict";var i=a("0f49"),o=a.n(i);o.a},"2ea6":function(t,e,a){},"2f97":function(t,e,a){},3774:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("6762"),a("2fdb"),a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],n={name:"App"},l=n,s=(a("034f"),a("2877")),c=Object(s["a"])(l,o,r,!1,null,null,null),u=c.exports,p=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{name:"fade"}},[t.isLoading?a("loading"):t._e()],1),a("div",{attrs:{id:"menu"}},[a("div",[a("el-button",{staticClass:"OperatorButton",attrs:{circle:"",type:"primary",icon:"el-icon-plus"},on:{click:t.GoAdd}})],1),a("div",[a("el-button",{staticClass:"OperatorButton",attrs:{circle:"",type:"primary",icon:"el-icon-edit"},on:{click:t.GoEdit}})],1),a("div",[a("el-button",{staticClass:"OperatorButton",attrs:{circle:"",type:"primary",icon:"el-icon-timer"},on:{click:t.Go_Edit_time}})],1),a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.deter_download,expression:"deter_download"}],staticClass:"OperatorButton",attrs:{circle:"",type:"primary",icon:"el-icon-download"},on:{click:t.GoDownload}})],1),a("div",[a("el-button",{staticClass:"OperatorButton",attrs:{circle:"",type:"danger",icon:"el-icon-delete"},on:{click:t.GoDelete}})],1)]),a("div",[a("div",{staticStyle:{position:"relative",bottom:"40px"}},[t._v("資料更新時間:"+t._s(t.update_time))]),a("div",{staticStyle:{position:"relative",bottom:"40px"}},[t._v("heroku上傳時間:"+t._s(t.git_push_time))]),t._m(0),a("el-badge",{staticClass:"item",staticStyle:{position:"relative",bottom:"85px",left:"610px"},attrs:{value:t.num_handle,type:"danger"}},[a("el-button",{attrs:{size:"medium"},on:{click:t.GoHandle}},[t._v("進入申請頁面")])],1),a("el-popover",{ref:"popover",attrs:{trigger:"hover",width:"300",placement:"bottom"}},[a("div",[a("div",[a("span",[t._v("成員名稱: "+t._s(t.user[0]))])]),a("div",[a("span",[t._v("-----------------------------------------")])]),a("div",[a("span",[t._v("單頁筆數: "),a("span",[a("el-select",{staticStyle:{width:"80px"},attrs:{size:"small",placeholder:"請選擇"},on:{change:t.pagesize_change},model:{value:t.pagesize,callback:function(e){t.pagesize=e},expression:"pagesize"}},[a("el-option",{key:"10",attrs:{label:"10",value:"10"}}),a("el-option",{key:"20",attrs:{label:"20",value:"20"}}),a("el-option",{key:"50",attrs:{label:"50",value:"50"}}),a("el-option",{key:"100",attrs:{label:"100",value:"100"}}),a("el-option",{key:"200",attrs:{label:"200",value:"200"}}),a("el-option",{key:"500",attrs:{label:"500",value:"500"}}),a("el-option",{key:"all",attrs:{label:"all",value:"all"}})],1)],1)])]),a("div",[a("span",[t._v("顯示模式:"),a("span",[a("el-switch",{attrs:{"active-text":"KeyID","active-value":"KeyID","inactive-text":"產品","inactive-value":"product"},on:{change:t.mode_switch},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}})],1)])]),a("div",[a("el-button",{staticStyle:{height:"10px"},attrs:{type:"text"},on:{click:function(e){return t.$router.push({name:"admin",query:{}})}}},[t._v("後台管理")])],1),a("div",[a("el-button",{staticStyle:{color:"#FFA1A1",height:"10px"},attrs:{type:"text"},on:{click:t.Logout}},[t._v("登出")])],1)]),a("el-button",{staticClass:"memeber_button",attrs:{slot:"reference",type:"text",icon:"el-icon-user"},slot:"reference"})],1)],1),a("div",{staticStyle:{position:"relative",bottom:"60px"},attrs:{align:"center"}},[a("el-tabs",{staticStyle:{width:"100%"},attrs:{"tab-position":"left"},on:{"tab-click":t.tabClick},model:{value:t.TabsValue,callback:function(e){t.TabsValue=e},expression:"TabsValue"}},[t._l(t.Tabs,(function(t,e){return a("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}})})),a("div",{attrs:{align:"center"}},[a("el-checkbox",{staticStyle:{position:"relative",right:"70px",top:"5px"},on:{change:t.all_check},model:{value:t.all_checked,callback:function(e){t.all_checked=e},expression:"all_checked"}}),a("el-autocomplete",{staticStyle:{position:"relative",right:"20px",width:"130px"},attrs:{clearable:"",size:"small","fetch-suggestions":t.querySearch_customer},on:{input:t.category_filter},model:{value:t.customer_value,callback:function(e){t.customer_value=e},expression:"customer_value"}}),a("el-autocomplete",{staticStyle:{position:"relative",width:"100px"},attrs:{clearable:"",size:"small","fetch-suggestions":t.querySearch_KeyID},on:{input:t.category_filter},model:{value:t.KeyID_value,callback:function(e){t.KeyID_value=e},expression:"KeyID_value"}}),a("el-autocomplete",{staticStyle:{position:"relative",left:"40px",width:"340px"},attrs:{clearable:"",size:"small","fetch-suggestions":t.querySearch_funcuid},on:{input:t.category_filter},model:{value:t.func_uid_value,callback:function(e){t.func_uid_value=e},expression:"func_uid_value"}}),a("el-autocomplete",{staticStyle:{position:"relative",left:"75px",width:"75px"},attrs:{clearable:"",size:"small","fetch-suggestions":t.querySearch_count},on:{input:t.category_filter},model:{value:t.count_value,callback:function(e){t.count_value=e},expression:"count_value"}}),a("el-autocomplete",{staticStyle:{position:"relative",left:"80px",width:"75px"},attrs:{clearable:"",size:"small","fetch-suggestions":t.querySearch_type},on:{input:t.category_filter},model:{value:t.type_value,callback:function(e){t.type_value=e},expression:"type_value"}}),a("el-autocomplete",{staticStyle:{position:"relative",left:"85px",width:"75px"},attrs:{clearable:"",size:"small","fetch-suggestions":t.querySearch_region},on:{input:t.category_filter},model:{value:t.region_value,callback:function(e){t.region_value=e},expression:"region_value"}}),a("el-autocomplete",{staticStyle:{position:"relative",left:"95px",width:"170px"},attrs:{clearable:"",size:"small","fetch-suggestions":t.querySearch_contact},on:{input:t.category_filter},model:{value:t.contact_value,callback:function(e){t.contact_value=e},expression:"contact_value"}}),a("el-popover",{ref:"popover",attrs:{title:"到期日",placement:"left-end",width:"350",trigger:"click"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"開始日期","end-placeholder":"結束日期"},on:{change:t.category_filter},model:{value:t.expiration_value,callback:function(e){t.expiration_value=e},expression:"expiration_value"}}),a("el-button",{staticStyle:{position:"relative",left:"100px",width:"115px"},attrs:{slot:"reference",plain:"",size:"mini"},slot:"reference"},[t._v("到期日")])],1),a("el-popover",{ref:"popover",attrs:{title:"結束日期",placement:"left-end",width:"350",trigger:"click"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini",type:"daterange","range-separator":"-","start-placeholder":"開始日期","end-placeholder":"結束日期"},on:{change:t.category_filter},model:{value:t.issued_value,callback:function(e){t.issued_value=e},expression:"issued_value"}}),a("el-button",{staticStyle:{position:"relative",left:"105px",width:"115px"},attrs:{slot:"reference",plain:"",size:"mini"},slot:"reference"},[t._v("更新日期")])],1),a("el-table",{ref:"showtable",attrs:{"row-class-name":t.tableRowColor,"row-style":{height:"0px"},"cell-style":{padding:"6.5px"},"header-cell-class-name":t.selection_column_style,data:t.tableData.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize)},on:{"row-click":t.rowclick,"sort-change":t.sortChange,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",prop:"",label:"編輯",width:"80"}}),a("el-table-column",{attrs:{align:"center",sortable:"custom",prop:"customer",label:"客戶",width:"170"}}),a("el-table-column",{attrs:{align:"center",sortable:"custom",prop:"sn",label:"KeyID",width:"105"}}),a("el-table-column",{attrs:{align:"center",sortable:"custom",prop:"func_uid",label:"產品名稱",width:"420"}}),a("el-table-column",{attrs:{align:"center",sortable:"custom",prop:"count",label:"數量",width:"75"}}),a("el-table-column",{attrs:{align:"center",sortable:"custom",prop:"type",label:"類型",width:"75"}}),a("el-table-column",{attrs:{align:"center",sortable:"custom",prop:"region",label:"地區",width:"75"}}),a("el-table-column",{attrs:{align:"center",sortable:"custom",prop:"contact_display",label:"聯絡人",width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{align:"center",sortable:"custom",prop:"expiration",label:"到期日",width:"110"}}),a("el-table-column",{attrs:{align:"center",sortable:"custom",prop:"issued",label:"更新日期",width:"110"}})],1)],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":t.pagesize,layout:"prev, pager, next",total:t.tableData.length},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pagesize=e},"update:page-size":function(e){t.pagesize=e}}})],1)],2)],1),a("div")],1)},f=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative",bottom:"40px"}},[a("span",{staticStyle:{"background-color":"#ffb7b7"}},[t._v("紅色")]),t._v("代表過期、"),a("span",{staticStyle:{"background-color":"#FFFF30"}},[t._v("黃色")]),t._v("代表一個月內過期")])}],_=(a("ac4d"),a("8a81"),a("1c4c"),a("6b54"),a("28a5"),a("a481"),a("f400"),a("ac6a"),a("5df3"),a("4f7f"),a("7f7f"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loading"})}),h=[],m={name:"loading"},g=m,v=(a("113b"),Object(s["a"])(g,_,h,!1,null,null,null)),y=v.exports;function b(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=w(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function w(t,e){if(t){if("string"===typeof t)return x(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function S(t,e,a){var i=[],o=0,r=0;while(o<t.length&&r<e.length)t[o][a]>e[r][a]?(i.push(t[o]),o++):(i.push(e[r]),r++);return i.concat(t.slice(o)).concat(e.slice(r))}function k(t,e){if(1===t.length)return t;var a=t.length,i=Math.floor(a/2),o=t.slice(0,i),r=t.slice(i);return S(k(o,e),k(r,e),e)}var O={components:{Loading:y},name:"Show_All",data:function(){return{all_Data:{},tableData:[],origin_Data:[],filter_Data:[],sort_Data:[],checked_Data:[],currentPage:1,pagesize:10,user:[],TabsValue:"1",Tabs:[{label:"All",name:"1"},{label:"即將過期",name:"2"},{label:"ezCAM",name:"3"},{label:"ezCAT",name:"4"},{label:"ezTool",name:"5"},{label:"Quote",name:"6"},{label:"ezPlan",name:"7"},{label:"ezDI",name:"8"},{label:"Other",name:"9"}],customer_opt:[],customer_value:"",issued_opt:[],issued_value:null,KeyID_opt:[],KeyID_value:"",funcuid_opt:[],func_uid_value:"",contact_opt:[],contact_value:"",expiration_opt:[],expiration_value:null,count_opt:[],count_value:"",region_opt:[],region_value:"",type_opt:[],type_value:"",num_handle:0,all_checked:!1,mode:"產品",update_time:"",git_push_time:"",deter_download:!1,isLoading:!0}},created:function(){var t=this;this.axios.get("/show_all",{headers:{"Content-Encoding":"gzip"},params:{user:JSON.stringify(JSON.parse(sessionStorage.getItem("user")))}}).then((function(e){JSON.parse(sessionStorage.getItem("authority")).includes("下載權限")&&(t.deter_download=!0),t.user=JSON.parse(sessionStorage.getItem("user")),t.all_Data=JSON.parse(JSON.stringify(e.data)),t.update_time=t.all_Data["update_time"],t.git_push_time=t.all_Data["git_push_time"];var a,i=b(t.all_Data["edit_data"]);try{for(i.s();!(a=i.n()).done;){var o=a.value;o["user"]==t.user[0]&&(t.num_handle=JSON.parse(o.data).length)}}catch(it){i.e(it)}finally{i.f()}var r,n=b(e.data["customer_data"]);try{for(n.s();!(r=n.n()).done;){var l=r.value;""!=l["site"]?t.customer_opt.push({value:l["name"]+"|"+l["site"],label:l["name"]+"|"+l["site"]}):t.customer_opt.push({value:l["name"],label:l["name"]})}}catch(it){n.e(it)}finally{n.f()}var s=[],c=new Set,u=new Set,p=new Set,d=new Set,f=new Set,_=new Map;e.data["module_data"].forEach((function(t){return _.set(t["mod_uid"],t["caption"])}));var h,m=b(e.data["info_data"]);try{for(m.s();!(h=m.n()).done;){var g=h.value,v=g["contact"].replace("@eastek.com.tw","");v=v.replace("@eastek.com.cn",""),u.add(v),c.add(g["count"]),s.push(g["func_uid"]),p.add(g["issued"]),d.add(g["expiration"]),void 0!=_.get(g["type"])&&f.add(_.get(g["type"]))}}catch(it){m.e(it)}finally{m.f()}u.forEach((function(e){return t.contact_opt.push({value:e,label:e})})),e.data["sn_data"].forEach((function(e){return t.KeyID_opt.push({value:e["sn"],label:e["sn"]})})),c.forEach((function(e){return t.count_opt.push({value:e,label:e})})),e.data["region_data"].forEach((function(e){return t.region_opt.push({value:e["name"],label:e["name"]})}));var y,w=new Set,x=b(e.data["product_data"]);try{for(x.s();!(y=x.n()).done;){var S=y.value;s.includes(S["product_name"])&&w.add(S["caption"])}}catch(it){x.e(it)}finally{x.f()}var O,D=b(e.data["option_data"]);try{for(D.s();!(O=D.n()).done;){var $=O.value;s.includes($["option_name"])&&w.add($["caption"])}}catch(it){D.e(it)}finally{D.f()}w.forEach((function(e){return t.funcuid_opt.push({value:e,label:e})})),p.forEach((function(e){return t.issued_opt.push({value:e,label:e})})),d.forEach((function(e){return t.expiration_opt.push({value:e,label:e})})),f.forEach((function(e){return t.type_opt.push({value:e,label:e})}));var N,J=JSON.parse(JSON.stringify(e.data.info_data)),z=e.data["sn_dict"],C=0,q=new Map,I=new Map,j=b(e.data["product_data"]);try{for(j.s();!(N=j.n()).done;){var A=N.value;q.set(A["product_name"],{category_id:A["category_id"],caption:A["caption"]})}}catch(it){j.e(it)}finally{j.f()}var E,T=b(e.data["option_data"]);try{for(T.s();!(E=T.n()).done;){var M=E.value;I.set(M["option_name"],{category_id:q.get(M["product_name"])["category_id"],product_name:M["product_name"],caption:M["caption"]})}}catch(it){T.e(it)}finally{T.f()}var V,F=b(e.data["info_data"]);try{for(F.s();!(V=F.n()).done;){var L=V.value;void 0!=z[L["sn"]]&&(""!=e.data["customer_data"][z[L["sn"]]["sn_id"]-1]["site"]?J[C]=Object.assign(J[C],{customer:e.data["customer_data"][z[L["sn"]]["sn_id"]-1]["name"]+"|"+e.data["customer_data"][z[L["sn"]]["sn_id"]-1]["site"],user:z[L["sn"]]["user"],info:[z[L["sn"]]["note1"],z[L["sn"]]["note2"],z[L["sn"]]["note3"],z[L["sn"]]["note4"],z[L["sn"]]["note5"]]}):J[C]=Object.assign(J[C],{customer:e.data["customer_data"][z[L["sn"]]["sn_id"]-1]["name"],user:z[L["sn"]]["user"],info:[z[L["sn"]]["note1"],z[L["sn"]]["note2"],z[L["sn"]]["note3"],z[L["sn"]]["note4"],z[L["sn"]]["note5"]]}),""!=z[L["sn"]]["region"]?J[C]=Object.assign(J[C],{region:e.data["region_data"][parseInt(z[L["sn"]]["region"],10)-1]["name"]}):J[C]=Object.assign(J[C],{region:""})),void 0!=I.get(L["func_uid"])?(J[C]=Object.assign(J[C],{caption:I.get(L["func_uid"])["category_id"]}),J[C]["func_uid"]=I.get(L["func_uid"])["caption"]+"("+I.get(L["func_uid"])["product_name"]+")"):(J[C]=Object.assign(J[C],{caption:q.get(L["func_uid"])["category_id"]}),J[C]["func_uid"]=q.get(L["func_uid"])["caption"]),void 0!=_.get(L["type"])&&(J[C]["type"]=_.get(L["type"])),C++}}catch(it){F.e(it)}finally{F.f()}0!=J.length&&(J=k(J,"expiration"));var K=new Date;K.setHours(K.getHours());var B=K.toISOString().slice(0,10);K.setMonth(K.getMonth()+1);var R=K.toISOString().slice(0,10),P=J.filter((function(t){return t["expiration"]<R&&t["expiration"]>B}));J=J.filter((function(t){return t["expiration"]>=R||t["expiration"]<=B}));var U,G=b(P);try{for(G.s();!(U=G.n()).done;){var H=U.value;J.unshift(H)}}catch(it){G.e(it)}finally{G.f()}var Q,W=b(J);try{for(W.s();!(Q=W.n()).done;){var X=Q.value;X=Object.assign(X,{contact_display:X["contact"].split(",")}),X=Object.assign(X,{user_display:X["user"].split(",")});for(var Y=0;Y<X["contact_display"].length;Y++){var Z,tt=b(t.all_Data["user_data"]);try{for(tt.s();!(Z=tt.n()).done;){var et=Z.value;X["contact_display"][Y]==et["email"]&&(X["contact_display"][Y]=Object.assign(et["user"]))}}catch(it){tt.e(it)}finally{tt.f()}-1==X["contact_display"][Y].indexOf("@eastek.com.tw")&&-1==X["contact_display"][Y].indexOf("@eastek.com.cn")||(X["contact_display"][Y]=X["contact_display"][Y].replace("@eastek.com.tw",""),X["contact_display"][Y]=X["contact_display"][Y].replace("@eastek.com.cn",""))}X["contact_display"]=X["contact_display"].join(",")}}catch(it){W.e(it)}finally{W.f()}t.origin_Data=J,t.tableData=J,t.filter_Data=J,t.sort_Data=J,t.isLoading=!1;var at=JSON.parse(t.all_Data["user_data"].filter((function(e){return e["user"]==t.user[0]}))[0]["setting"]);"all"!=at["pagesize"]?t.pagesize=at["pagesize"]:t.pagesize=t.tableData.length,"product"!=at["mode"]&&t.$router.push({name:"KeyID"})}))},watch:{},methods:{pagesize_change:function(){"all"==this.pagesize?(this.pagesize=this.tableData.length,this.axios.post("/save_to_user_setting",{source:"product",user:this.user,mode:this.mode,pagesize:"all"})):this.axios.post("/save_to_user_setting",{source:"product",user:this.user,mode:this.mode,pagesize:parseInt(this.pagesize)})},mode_switch:function(){var t=this;this.axios.post("/save_to_user_setting",{source:"product",user:this.user,mode:this.mode,pagesize:this.pagesize}).then((function(e){t.$router.push({name:"KeyID"})}))},all_check:function(){1==this.all_checked?this.$refs.showtable.toggleAllSelection():this.$refs.showtable.clearSelection()},selection_column_style:function(t){if(0==t.columnIndex)return"selection_style"},Logout:function(){sessionStorage.clear(),this.$router.push("/login")},GoHandle:function(){delete this.all_Data["info_data"],this.$router.push({name:"handle",query:{user:JSON.stringify(this.user),all_Data:JSON.stringify(this.all_Data)}})},GoAdd:function(){delete this.all_Data["info_data"],this.$router.push({name:"add",query:{user:JSON.stringify(this.user),checked_Data:JSON.stringify(this.checked_Data),all_Data:JSON.stringify(this.all_Data)}})},GoEdit:function(){void 0!=this.checked_Data[0]?(delete this.all_Data["info_data"],this.$router.push({name:"edit",query:{user:JSON.stringify(this.user),checked_Data:JSON.stringify(this.checked_Data),all_Data:JSON.stringify(this.all_Data)}})):alert("請選取須修改的選項")},Go_Edit_time:function(){var t=this;void 0!=this.checked_Data[0]?this.$prompt("請輸入到期日","到期日修改",{confirmButtonText:"確定",cancelButtonText:"取消",inputType:"date",inputPattern:/\d.\d.\d/,inputErrorMessage:"輸入日期不合法!"}).then((function(e){var a,i=e.value,o=b(t.checked_Data);try{for(o.s();!(a=o.n()).done;){var r=a.value;r=Object.assign(r,{operator:"修改"}),r=Object.assign(r,{expiration:i})}}catch(d){o.e(d)}finally{o.f()}var n,l=b(t.checked_Data);try{for(l.s();!(n=l.n()).done;){var s,c=n.value,u=b(t.all_Data["user_data"]);try{for(u.s();!(s=u.n()).done;){var p=s.value;c["contact"]==p["email"]&&(c["contact"]=p["user"])}}catch(d){u.e(d)}finally{u.f()}}}catch(d){l.e(d)}finally{l.f()}t.axios.post("/save_to_handle",{checked_Data:t.checked_Data,content:"延展到期日",user:t.user}).then((function(t){t.data;location.reload()}))})).catch((function(){t.$message({type:"info",message:"已取消修改"})})):alert("請選取欲修改時間的資料")},GoDownload:function(){var t,e=this,a=[],i=0,o=b(this.checked_Data);try{for(o.s();!(t=o.n()).done;){var r=t.value;a.push(r),a[i]=Object.assign(a[i],{operator:"下載"}),i++}}catch(n){o.e(n)}finally{o.f()}this.axios({method:"post",url:"/download_show",data:{user:this.user,data:a},responseType:"blob"}).then((function(t){e.tranfer_xlsx(t.data)}))},GoDelete:function(){if(void 0!=this.checked_Data[0]){var t=prompt("請輸入刪除原因：\n1.客戶測試結束\n2.key 損壞\n3.其他, __________\n\n","");if(console.log(t),null!=t)if(""!=t){var e,a=b(this.checked_Data);try{for(a.s();!(e=a.n()).done;){var i=e.value;i=Object.assign(i,{operator:"刪除"})}}catch(u){a.e(u)}finally{a.f()}var o,r=b(this.checked_Data);try{for(r.s();!(o=r.n()).done;){var n,l=o.value,s=b(this.all_Data["user_data"]);try{for(s.s();!(n=s.n()).done;){var c=n.value;l["contact"]==c["email"]&&(l["contact"]=c["user"])}}catch(u){s.e(u)}finally{s.f()}}}catch(u){r.e(u)}finally{r.f()}this.axios.post("/save_to_handle",{checked_Data:this.checked_Data,content:t,user:this.user}).then((function(t){t.data;location.reload()}))}else alert("請填寫原因")}else alert("請選取須刪除的資料")},rowclick:function(t,e,a){this.$refs.showtable.toggleRowSelection(t)},handleSelectionChange:function(t){this.checked_Data=JSON.parse(JSON.stringify(t))},sortChange:function(t){var e=JSON.parse(JSON.stringify(this.sort_Data)),a=[];switch(t.prop){case"customer":a=k(e,"customer"),"ascending"==t.order?this.tableData=a:"descending"==t.order?this.tableData=a.reverse():this.tableData=this.sort_Data;break;case"contact":a=k(e,"contact"),"ascending"==t.order?this.tableData=a:"descending"==t.order?this.tableData=a.reverse():this.tableData=this.sort_Data;break;case"version":a=k(e,"version"),"ascending"==t.order?this.tableData=a:"descending"==t.order?this.tableData=a.reverse():this.tableData=this.sort_Data;break;case"func_uid":a=k(e,"func_uid"),"ascending"==t.order?this.tableData=a:"descending"==t.order?this.tableData=a.reverse():this.tableData=this.sort_Data;break;case"count":a=k(e,"count"),"ascending"==t.order?this.tableData=a:"descending"==t.order?this.tableData=a.reverse():this.tableData=this.sort_Data;break;case"issued":a=k(e,"issued"),"ascending"==t.order?this.tableData=a:"descending"==t.order?this.tableData=a.reverse():this.tableData=this.sort_Data;break;case"sn":a=k(e,"sn"),"ascending"==t.order?this.tableData=a:"descending"==t.order?this.tableData=a.reverse():this.tableData=this.sort_Data;break;case"expiration":a=k(e,"expiration"),"ascending"==t.order?this.tableData=a:"descending"==t.order?this.tableData=a.reverse():this.tableData=this.sort_Data;break;case"region":a=k(e,"region"),"ascending"==t.order?this.tableData=a:"descending"==t.order?this.tableData=a.reverse():this.tableData=this.sort_Data;break}},category_filter:function(){var t=this,e=(this.customer_value,this.filter_Data.filter((function(e){return-1!=e["customer"].indexOf(t.customer_value)&&-1!=e["contact_display"].indexOf(t.contact_value)&&-1!=e["type"].indexOf(t.type_value)&&-1!=e["func_uid"].indexOf(t.func_uid_value)&&-1!=String(e["count"]).indexOf(String(t.count_value))&&-1!=String(e["sn"]).indexOf(String(t.KeyID_value))&&-1!=String(e["region"]).indexOf(String(t.region_value))})));null==this.expiration_value&&null==this.issued_value||(e=null==this.expiration_value?e.filter((function(e){return t.issued_value[0]<=e["issued"]&&e["issued"]<=t.issued_value[1]})):null==this.issued_value?e.filter((function(e){return t.expiration_value[0]<=e["expiration"]&&e["expiration"]<=t.expiration_value[1]})):e.filter((function(e){return t.issued_value[0]<=e["issued"]&&e["issued"]<=t.issued_value[1]&&t.expiration_value[0]<=e["expiration"]&&e["expiration"]<=t.expiration_value[1]}))),this.sort_Data=JSON.parse(JSON.stringify(e)),this.tableData=this.sort_Data},tabClick:function(t,e){if(this.currentPage=1,this.all_checked=!1,this.KeyID_value="",this.customer_value="","All"==t.label)this.tableData=this.origin_Data,this.filter_Data=this.origin_Data,this.sort_Data=this.origin_Data;else if("即將過期"==t.label){var a=new Date;a.setHours(a.getHours());var i=a.toISOString().slice(0,10);a.setMonth(a.getMonth()+1);var o=a.toISOString().slice(0,10);this.filter_Data=this.origin_Data.filter((function(t){return t["expiration"]<o})),this.filter_Data=this.filter_Data.filter((function(t){return t["expiration"]>i})),this.tableData=this.filter_Data,this.sort_Data=this.filter_Data}else{this.filter_Data=this.origin_Data.filter((function(e){return e["caption"]==t.label})),this.tableData=this.filter_Data,this.sort_Data=this.filter_Data}},tableRowColor:function(t){var e=t.row,a=t.rowIndex,i=a+(this.currentPage-1)*this.pagesize;e.index=a;var o=new Date;o.setHours(o.getHours());var r=o.toISOString().slice(0,10);o.setMonth(o.getMonth()+1);var n=o.toISOString().slice(0,10),l=this.tableData[i]["expiration"];return l<r?"exceed-row":l<n?"warning-row":"success-row"},handleCurrentChange:function(t){this.currentPage=t,this.all_checked=!1},querySearch_customer:function(t,e){var a=t?this.customer_opt.filter(this.createFilter(t)):this.customer_opt;e(a)},querySearch_KeyID:function(t,e){var a=t?this.KeyID_opt.filter(this.createFilter(t)):this.KeyID_opt;e(a)},querySearch_region:function(t,e){var a=t?this.region_opt.filter(this.createFilter(t)):this.region_opt;e(a)},querySearch_count:function(t,e){var a=t?this.count_opt.filter(this.createFilter(t)):this.count_opt;e(a)},querySearch_type:function(t,e){var a=t?this.type_opt.filter(this.createFilter(t)):this.type_opt;e(a)},querySearch_funcuid:function(t,e){var a=t?this.funcuid_opt.filter(this.createFilter(t)):this.funcuid_opt;e(a)},querySearch_issued:function(t,e){var a=t?this.issued_opt.filter(this.createFilter(t)):this.issued_opt;e(a)},querySearch_contact:function(t,e){var a=t?this.contact_opt.filter(this.createFilter(t)):this.contact_opt;e(a)},querySearch_expiration:function(t,e){var a=t?this.expiration_opt.filter(this.createFilter(t)):this.expiration_opt;e(a)},createFilter:function(t){return function(e){return-1!=String(e.value).toLowerCase().indexOf(String(t).toLowerCase())}},tranfer_xlsx:function(t){if(t){var e=window.URL.createObjectURL(new Blob([t])),a=document.createElement("a");a.style.display="none",a.href=e,a.setAttribute("download","license-application.xlsx"),document.body.appendChild(a),a.click()}}}},D=O,$=(a("c965"),Object(s["a"])(D,d,f,!1,null,"2e07678e",null)),N=$.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticStyle:{position:"relative",bottom:"20px","font-size":"28px"}},[t._v("資料修改")]),a("div",{attrs:{data:t.sub_row}},[a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n            客戶(必填):"),a("el-input",{class:"customer"==t.deter_require?"input_require":"",staticStyle:{position:"relative",left:"32px",width:"110px"},attrs:{size:"small",disabled:"",placeholder:"請輸入客戶"},model:{value:t.input.name,callback:function(e){t.$set(t.input,"name",e)},expression:"input.name"}}),a("span",{staticStyle:{position:"relative",left:"50px"}},[t._v("廠區(選填):")]),a("el-input",{staticStyle:{position:"relative",left:"50px",width:"100px"},attrs:{size:"small",disabled:"",placeholder:"請輸入廠區"},model:{value:t.input.factory,callback:function(e){t.$set(t.input,"factory",e)},expression:"input.factory"}}),a("span",{staticStyle:{position:"relative",left:"500px","font-size":"16px",bottom:"5px"}},[t._v("● 測試 - 借用給客戶(3個月)")]),a("span",{staticStyle:{position:"relative",left:"328px",top:"21px"}},[t._v("○ 申請新的 key 須填寫領用單，行政查詢用")]),a("span",{staticStyle:{position:"relative",left:"25px",top:"42px"}},[t._v("○ 此狀態須由申請人自行申請延期")])],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n            KeyID(必填):"),a("el-input",{class:"sn"==t.deter_require?"input_require":"",staticStyle:{position:"relative",left:"20px",width:"110px"},attrs:{size:"small",placeholder:"請輸入KeyID",disabled:""},model:{value:t.sub_row.sn,callback:function(e){t.$set(t.sub_row,"sn",e)},expression:"sub_row.sn"}}),a("span",{staticStyle:{position:"relative",left:"40px"}},[t._v("類型(必填):")]),a("el-select",{class:"type"==t.deter_require?"input_require":"",staticStyle:{position:"relative",left:"40px",width:"100px"},attrs:{size:"small",placeholder:"類型"},on:{change:t.type_change},model:{value:t.sub_row.type,callback:function(e){t.$set(t.sub_row,"type",e)},expression:"sub_row.type"}},t._l(t.type_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("業務地區(必填):\n        "),a("el-select",{class:"region"==t.deter_require?"input_require":"",staticStyle:{position:"relative",right:"5px",width:"110px"},attrs:{size:"small",placeholder:"業務地區"},model:{value:t.sub_row.region,callback:function(e){t.$set(t.sub_row,"region",e)},expression:"sub_row.region"}},t._l(t.region_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n        產品類別(必填):"),a("el-input",{class:"caption"==t.deter_require?"input_require":"",staticStyle:{width:"150px"},attrs:{size:"small",placeholder:"請輸入產品類別",disabled:""},model:{value:t.sub_row.caption,callback:function(e){t.$set(t.sub_row,"caption",e)},expression:"sub_row.caption"}}),a("span",{staticStyle:{position:"relative",left:"10px"}},[t._v("\n        產品名稱(必填):")]),a("el-input",{class:"func_uid"==t.deter_require?"input_require":"",staticStyle:{width:"250px",position:"relative",left:"10px"},attrs:{size:"small",placeholder:"請輸入產品名稱",disabled:""},model:{value:t.sub_row.func_uid,callback:function(e){t.$set(t.sub_row,"func_uid",e)},expression:"sub_row.func_uid"}}),a("span",{staticStyle:{position:"relative",left:"241px",bottom:"23px"}},[t._v("● 出貨 - 尚未完全付完款項(6個月)")]),a("span",{staticStyle:{position:"relative",left:"22px",top:"2px"}},[t._v("○ 須提供訂單編號(詢問業務)供行政查詢")]),a("span",{staticStyle:{position:"relative",right:"259px",top:"26px",bottom:"1px"}},[t._v("○ 此狀態須由申請人自行申請延期")])],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("數量(必填):"),a("el-input",{class:"count"==t.deter_require?"input_require":"",staticStyle:{width:"100px",position:"relative",left:"32px"},attrs:{size:"small",placeholder:"請輸入數量"},model:{value:t.sub_row.count,callback:function(e){t.$set(t.sub_row,"count",e)},expression:"sub_row.count"}})],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n        到期日(必填):"),a("el-date-picker",{class:"expiration"==t.deter_require?"input_require":"",staticStyle:{width:"200px",position:"relative",left:"16px"},attrs:{type:"date","value-format":"yyyy-MM-dd",name:"expiration",placeholder:"請輸入到期日"},model:{value:t.sub_row.expiration,callback:function(e){t.$set(t.sub_row,"expiration",e)},expression:"sub_row.expiration"}}),a("span",{staticStyle:{position:"relative",left:"32px"}},[t._v("允許版本(選填):")]),a("el-input",{staticStyle:{width:"200px",position:"relative",left:"32px"},attrs:{size:"small",placeholder:"請輸入允許版本"},model:{value:t.sub_row.version,callback:function(e){t.$set(t.sub_row,"version",e)},expression:"sub_row.version"}}),a("span",{staticStyle:{position:"relative",bottom:"5px",left:"262px"}},[t._v("● 正式 - 付完全部款項(隔年1月31日)")]),a("span",{staticStyle:{position:"relative",left:"23px",top:"20px"}},[t._v("○ 須提供訂單編號供行政查詢，財務查詢付款狀況")])],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n        負責人(必填):\n            "),t._l(t.sub_row.user_display,(function(e,i){return[a("el-autocomplete",{class:"user"==t.deter_require?"input_require":"",staticStyle:{width:"200px",position:"relative",left:"12px"},attrs:{"fetch-suggestions":t.querySearch_user,placeholder:"請輸入負責人"},model:{value:t.sub_row.user_display[i],callback:function(e){t.$set(t.sub_row.user_display,i,e)},expression:"sub_row.user_display[index]"}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.lock[t.row_index]||0!=t.lock.length&&0!=i,expression:"!lock[row_index] || lock.length != 0 && index != 0"}],staticStyle:{color:"#F56C6C","font-size":"15px",position:"relative",bottom:"15px",left:"3px"},attrs:{type:"text",icon:"el-icon-error"},on:{click:function(e){return t.remove_user(i)}}})]})),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.lock[t.row_index]||0!=t.lock.length,expression:"!lock[row_index] || lock.length != 0"}],staticStyle:{"font-size":"15px"},attrs:{type:"text",icon:"el-icon-circle-plus"},on:{click:function(e){return t.add_user()}}})],2),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n        聯絡人(必填):\n            "),t._l(t.sub_row.contact_display,(function(e,i){return[a("el-autocomplete",{class:"contact"==t.deter_require?"input_require":"",staticStyle:{width:"200px",position:"relative",left:"12px"},attrs:{"fetch-suggestions":t.querySearch_contact,placeholder:"請輸入聯絡人"},model:{value:t.sub_row.contact_display[i],callback:function(e){t.$set(t.sub_row.contact_display,i,e)},expression:"sub_row.contact_display[index]"}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.lock[t.row_index]||0!=t.lock.length&&0!=i,expression:"!lock[row_index] || lock.length != 0 && index != 0"}],staticStyle:{color:"#F56C6C","font-size":"15px",position:"relative",bottom:"15px",left:"3px"},attrs:{type:"text",icon:"el-icon-error"},on:{click:function(e){return t.remove_contact(i)}}})]})),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.lock[t.row_index]||0!=t.lock.length,expression:"!lock[row_index] || lock.length != 0"}],staticStyle:{"font-size":"15px"},attrs:{type:"text",icon:"el-icon-circle-plus"},on:{click:function(e){return t.add_contact()}}})],2),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("備註(選填):"),a("el-input",{staticStyle:{width:"200px",position:"relative",left:"32px"},attrs:{size:"small",placeholder:"請輸入備註"},model:{value:t.sub_row.comment,callback:function(e){t.$set(t.sub_row,"comment",e)},expression:"sub_row.comment"}}),a("span",{staticStyle:{position:"relative",bottom:"40px",left:"589px"}},[t._v("● 永久")]),a("span",{staticStyle:{position:"relative",left:"562px",bottom:"13px"}},[t._v("○ 台灣區需提供客戶切結書")]),a("span",{staticStyle:{position:"relative",left:"372px",bottom:"74px"}},[t._v("○ 此狀態會由系統自動延期一年並寄給各申請人")])],1)]),a("div",{staticStyle:{position:"relative",top:"20px"},attrs:{align:"center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.lock[t.row_index]||0==t.lock.length,expression:"lock[row_index] || lock.length == 0"}],staticStyle:{position:"relative",left:"550px",width:"150px",display:"inline"},attrs:{size:"medium"},on:{click:t.cancel}},[t._v("取消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.lock[t.row_index]||0==t.lock.length,expression:"lock[row_index] || lock.length == 0"}],staticStyle:{position:"relative",left:"550px",width:"150px",display:"inline"},attrs:{size:"medium"},on:{click:t.submit}},[t._v("送出")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.lock[t.row_index]&&0!=t.lock.length,expression:"!lock[row_index] && lock.length != 0"}],staticStyle:{position:"relative",right:"280px",bottom:"45px"},attrs:{circle:"",type:"primary",icon:"el-icon-check",medium:""},on:{click:function(e){return t.store_row()}}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.lock[t.row_index]&&0!=t.lock.length,expression:"!lock[row_index] && lock.length != 0"}],staticStyle:{position:"relative",right:"280px",bottom:"45px"},attrs:{circle:"",type:"danger",icon:"el-icon-close",medium:""},on:{click:function(e){return t.cancel_row()}}}),a("el-table",{ref:"edittable",staticStyle:{width:"100%"},attrs:{"row-class-name":t.tableRowColor,data:t.tableData},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",align:"center",prop:"",label:"編輯",width:"50"}}),a("el-table-column",{attrs:{align:"center",prop:"",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.$index,o=e.row;return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.lock[i],expression:"lock[$index]"}],attrs:{circle:"",type:"primary",icon:"el-icon-refresh-right",size:"mini"},on:{click:function(e){return t.restore(i,o)}}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.lock[i],expression:"lock[$index]"}],attrs:{circle:"",type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.edit_row(i,o)}}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"customer",label:"客戶",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"110px"},attrs:{type:"text",name:"customer",readonly:""},model:{value:i.customer,callback:function(e){t.$set(i,"customer",e)},expression:"row.customer"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"sn",label:"KeyID",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"100px"},attrs:{type:"text",name:"sn",readonly:""},model:{value:i.sn,callback:function(e){t.$set(i,"sn",e)},expression:"row.sn"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"func_uid",label:"產品名稱",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"160px"},attrs:{type:"text",name:"func_uid",readonly:""},model:{value:i.func_uid,callback:function(e){t.$set(i,"func_uid",e)},expression:"row.func_uid"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"version",label:"版本",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"80px"},attrs:{type:"text",name:"version",readonly:""},model:{value:i.version,callback:function(e){t.$set(i,"version",e)},expression:"row.version"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"count",label:"數量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"50px"},attrs:{type:"text",name:"count",readonly:""},model:{value:i.count,callback:function(e){t.$set(i,"count",e)},expression:"row.count"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"expiration",label:"到期日",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd",name:"expiration",readonly:""},model:{value:i.expiration,callback:function(e){t.$set(i,"expiration",e)},expression:"row.expiration"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"type",label:"類型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"80px"},attrs:{type:"text",name:"type",readonly:""},model:{value:i.type,callback:function(e){t.$set(i,"type",e)},expression:"row.type"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"user",label:"負責人",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"60px"},attrs:{type:"text",name:"user",readonly:""},model:{value:i.user,callback:function(e){t.$set(i,"user",e)},expression:"row.user"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"region",label:"地區",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"70px"},attrs:{type:"text",name:"region",readonly:""},model:{value:i.region,callback:function(e){t.$set(i,"region",e)},expression:"row.region"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"comment",label:"備註",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"130px"},attrs:{type:"text",name:"comment",readonly:""},model:{value:i.comment,callback:function(e){t.$set(i,"comment",e)},expression:"row.comment"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"contact",label:"聯絡人",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"80px"},attrs:{type:"text",name:"contact",readonly:""},model:{value:i.contact,callback:function(e){t.$set(i,"contact",e)},expression:"row.contact"}})]}}])})],1)],1)])},z=[];function C(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=q(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function q(t,e){if(t){if("string"===typeof t)return I(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?I(t,e):void 0}}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var j={name:"edit",data:function(){return{all_Data:{},tableData:[],func_uid_Data:[],origin_Data:[],checked_Data:[],user_opt:[],region_opt:[],caption_opt:[],func_uid_opt:[],contact_opt:[],type_opt:[{label:"正式",value:"正式"},{label:"測試",value:"測試"},{label:"出貨",value:"出貨"},{label:"永久",value:"永久"}],word:"頁面內文:                                   \n測試: 產品借用測試 (須由人員主動申請展延)     \n出貨: 款項讓未付完 (須由人員主動申請展延)     \n正式: 款項付完 (每年自動展延寄給 KeyID 負責人)\n永久: 部分產品需提供客戶切結書                ",input:{name:"",factory:""},sub_row:{caption:"",comment:"",contact:"",count:null,customer:"",expiration:"",func_uid:"",index:null,info:[],info_id:null,issued:"",operator:"",region:"",registration:"",sn:null,type:"",user:"",version:"",contact_display:[""],user_display:[""]},lock:[],row_index:0,deter_require:""}},created:function(){this.user=JSON.parse(this.$route.query.user),this.all_Data=JSON.parse(this.$route.query.all_Data);var t,e=C(this.all_Data["product_data"]);try{for(e.s();!(t=e.n()).done;){var a=t.value;this.caption_opt.push({value:a["caption"],label:a["caption"]})}}catch(q){e.e(q)}finally{e.f()}var i,o=C(this.all_Data["region_data"]);try{for(o.s();!(i=o.n()).done;){var r=i.value;this.region_opt.push({value:r["name"],label:r["name"]})}}catch(q){o.e(q)}finally{o.f()}var n,l=C(this.all_Data["user_data"]);try{for(l.s();!(n=l.n()).done;){var s=n.value;this.contact_opt.push({value:s["email"],label:s["email"]})}}catch(q){l.e(q)}finally{l.f()}var c,u=new Set,p=C(this.all_Data["sn_data"]);try{for(p.s();!(c=p.n()).done;){var d,f=c.value,_=C(f["user"].split(","));try{for(_.s();!(d=_.n()).done;){var h=d.value;u.add(h)}}catch(q){_.e(q)}finally{_.f()}}}catch(q){p.e(q)}finally{p.f()}var m,g=C(u);try{for(g.s();!(m=g.n()).done;){var v=m.value;this.user_opt.push({value:v,label:v})}}catch(q){g.e(q)}finally{g.f()}var y,b=0,w=C(JSON.parse(this.$route.query.checked_Data));try{for(w.s();!(y=w.n()).done;){var x=y.value;x=Object.assign(x,{operator:"修改",index:b}),this.func_uid_Data.push(x),b++}}catch(q){w.e(q)}finally{w.f()}var S,k=C(this.func_uid_Data);try{for(k.s();!(S=k.n()).done;){var O=S.value;O["contact_display"]=O["contact"].split(",")}}catch(q){k.e(q)}finally{k.f()}var D,$=C(this.func_uid_Data);try{for($.s();!(D=$.n()).done;){var N=D.value;N=Object.assign(N,{color:0})}}catch(q){$.e(q)}finally{$.f()}this.origin_Data=JSON.parse(JSON.stringify(this.func_uid_Data)),this.tableData=JSON.parse(JSON.stringify(this.func_uid_Data));var J,z=C(this.tableData);try{for(z.s();!(J=z.n()).done;){J.value;this.lock.push(!0)}}catch(q){z.e(q)}finally{z.f()}},watch:{tableData:function(){this.$nextTick((function(){for(var t=0;t<this.tableData.length;t++)1==this.tableData[t]["color"]&&this.$refs.edittable.toggleRowSelection(this.tableData[t],!0)}))}},methods:{type_change:function(){var t=new Date;"正式"==this.sub_row.type&&(t.setMonth(t.getMonth()+12),this.sub_row.expiration=t.toISOString().slice(0,4)+"-01-30"),"測試"==this.sub_row.type&&(t.setMonth(t.getMonth()+3),this.sub_row.expiration=t.toISOString().slice(0,10)),"出貨"==this.sub_row.type&&(t.setMonth(t.getMonth()+6),this.sub_row.expiration=t.toISOString().slice(0,10)),"永久"==this.sub_row.type&&(this.sub_row.expiration="9999-12-31")},add_user:function(){this.sub_row.user_display.push("")},remove_user:function(t){this.sub_row.user_display.splice(t,1)},add_contact:function(){this.sub_row.contact_display.push("")},remove_contact:function(t){this.sub_row.contact_display.splice(t,1)},edit_row:function(t,e){for(var a=0;a<this.lock.length;a++)0==this.lock[a]&&a!=t&&this.cancel_row();-1!=e.customer.indexOf("|")?(this.input.name=e.customer.split("|")[0],this.input.factory=e.customer.split("|")[1]):(this.input.name=e.customer,this.input.factory=""),this.row_index=t,this.sub_row=JSON.parse(JSON.stringify(e)),this.$set(this.lock,t,!1)},cancel_row:function(){this.sub_row={caption:"",comment:"",contact:"",count:null,customer:"",expiration:"",func_uid:"",index:null,info:[],info_id:null,issued:"",operator:"",region:"",registration:"",sn:null,type:"",user:"",version:"",contact_display:[""],user_display:[""]},this.input.name="",this.input.factory="",this.$set(this.lock,this.row_index,!0)},store_row:function(){for(var t=this,e=0;e<this.sub_row["contact_display"].length;e++)""==this.sub_row["contact_display"][e]&&(this.sub_row["contact_display"].splice(e,1),e--);for(var a=0;a<this.sub_row["user_display"].length;a++)""==this.sub_row["user_display"][a]&&(this.sub_row["user_display"].splice(a,1),a--);this.test_edit_add()&&(this.tableData[this.row_index]["expiration"]!=this.sub_row["expiration"]&&this.tableData.length>1?this.$confirm("修改全部資料時間","選擇",{confirmButtonText:"同意",cancelButtonText:"不同意",type:"warning"}).then((function(){var e,a=C(t.tableData);try{for(a.s();!(e=a.n()).done;){var i=e.value;i=Object.assign(i,{expiration:t.sub_row["expiration"]})}}catch(o){a.e(o)}finally{a.f()}t.tableData[t.row_index]=Object.assign({},t.sub_row),t.tableData[t.row_index]["contact"]=t.sub_row["contact_display"].join(),t.tableData[t.row_index]["user"]=t.sub_row["user_display"].join(),t.sub_row={caption:"",comment:"",contact:"",count:null,customer:"",expiration:"",func_uid:"",index:null,info:[],info_id:null,issued:"",operator:"",region:"",registration:"",sn:null,type:"",user:"",version:"",contact_display:[""],user_display:[""]},t.input.name="",t.input.factory="",t.datachange(),t.$set(t.lock,t.row_index,!0)})).catch((function(){t.tableData[t.row_index]=Object.assign({},t.sub_row),t.tableData[t.row_index]["contact"]=t.sub_row["contact_display"].join(),t.tableData[t.row_index]["user"]=t.sub_row["user_display"].join(),t.sub_row={caption:"",comment:"",contact:"",count:null,customer:"",expiration:"",func_uid:"",index:null,info:[],info_id:null,issued:"",operator:"",region:"",registration:"",sn:null,type:"",user:"",version:"",contact_display:[""],user_display:[""]},t.input.name="",t.input.factory="",t.datachange(),t.$set(t.lock,t.row_index,!0)})):(this.tableData[this.row_index]=Object.assign({},this.sub_row),this.tableData[this.row_index]["contact"]=this.sub_row["contact_display"].join(),this.tableData[this.row_index]["user"]=this.sub_row["user_display"].join(),this.sub_row={caption:"",comment:"",contact:"",count:null,customer:"",expiration:"",func_uid:"",index:null,info:[],info_id:null,issued:"",operator:"",region:"",registration:"",sn:null,type:"",user:"",version:"",contact_display:[""],user_display:[""]},this.input.name="",this.input.factory="",this.datachange(),this.$set(this.lock,this.row_index,!0)))},test_edit_add:function(){if(null==this.input.name||""==this.input.name)return this.$message({message:"客戶不可為空",type:"warning"}),this.deter_require="customer",!1;if(0==this.sub_row["contact_display"].length)return this.$message({message:"聯絡人不可為空",type:"warning"}),this.deter_require="contact",!1;if(0==this.sub_row["user_display"].length)return this.$message({message:"負責人不可為空",type:"warning"}),this.deter_require="user",!1;if(null==this.sub_row["sn"]||""==this.sub_row["sn"])return this.$message({message:"KeyID不可為空",type:"warning"}),this.deter_require="sn",!1;if(null==this.sub_row["caption"]||""==this.sub_row["caption"])return this.$message({message:"產品類別不可為空",type:"warning"}),this.deter_require="caption",!1;if(null==this.sub_row["func_uid"]||""==this.sub_row["func_uid"])return this.$message({message:"產品名稱不可為空",type:"warning"}),this.deter_require="func_uid",!1;if(null==this.sub_row["count"]||""==this.sub_row["count"])return this.$message({message:"數量不可為空",type:"warning"}),this.deter_require="count",!1;if(null==this.sub_row["expiration"]||""==this.sub_row["expiration"])return this.$message({message:"到期日期不可為空",type:"warning"}),this.deter_require="expiration",!1;if(null==this.sub_row["type"]||""==this.sub_row["type"])return this.$message({message:"類型不可為空",type:"warning"}),this.deter_require="type",!1;if(null==this.sub_row["region"]||""==this.sub_row["region"])return this.$message({message:"地區不可為空",type:"warning"}),this.deter_require="region",!1;var t,e=0,a=C(this.all_Data["customer_data"]);try{for(a.s();!(t=a.n()).done;){var i=t.value;this.input.name==i["name"]&&this.input.factory==i["site"]&&(e=1)}}catch(l){a.e(l)}finally{a.f()}if(0==e){var o,r=C(this.all_Data["sn_data"]);try{for(r.s();!(o=r.n()).done;){var n=o.value;if(this.sub_row["sn"]==n["sn"])return this.$message({message:"新增客戶時，也要新增一筆新keyID",type:"warning"}),this.deter_require="sn",!1}}catch(l){r.e(l)}finally{r.f()}}return!0},handleSelectionChange:function(t){this.checked_Data=JSON.parse(JSON.stringify(t))},submit:function(){var t=this;this.axios.post("/save_to_handle",{checked_Data:this.checked_Data,content:"none",user:this.user}).then((function(e){e.data;t.$router.push({name:"Show_All"})}))},cancel:function(){this.$router.push({name:"Show_All"})},restore:function(t,e){this.$set(this.tableData,t,this.origin_Data[t])},datachange:function(){var t,e=JSON.parse(JSON.stringify(this.tableData)),a=C(e);try{for(a.s();!(t=a.n()).done;){var i=t.value;i=Object.assign(i,{color:0})}}catch(r){a.e(r)}finally{a.f()}for(var o=0;o<this.origin_Data.length;o++)JSON.stringify(this.origin_Data[o])!=JSON.stringify(e[o])?this.tableData[o]["color"]=1:this.tableData[o]["color"]=0;this.tableData=Object.assign([],this.tableData)},tableRowColor:function(t){t.row;var e=t.rowIndex;if(1==this.tableData[e]["color"])return"exceed-row"},querySearch_contact:function(t,e){var a=t?this.contact_opt.filter(this.createFilter(t)):this.contact_opt;0==a.length&&(a.push({value:t+"@eastek.com.cn",label:t+"@eastek.com.cn"}),a.push({value:t+"@eastek.com.tw",label:t+"@eastek.com.tw"})),e(a)},querySearch_user:function(t,e){var a=t?this.user_opt.filter(this.createFilter(t)):this.user_opt;0==a.length&&(a.push({value:t+"@eastek.com.cn",label:t+"@eastek.com.cn"}),a.push({value:t+"@eastek.com.tw",label:t+"@eastek.com.tw"})),e(a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}}}},A=j,E=(a("a041"),Object(s["a"])(A,J,z,!1,null,null,null)),T=E.exports,M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{name:"fade"}},[t.isLoading?a("loading"):t._e()],1),a("div",{staticStyle:{position:"relative",bottom:"20px","font-size":"28px"}},[t._v("資料新增")]),a("div",[a("el-drawer",{attrs:{title:"產品選擇",visible:t.drawer,"with-header":!1,size:"20%"},on:{"update:visible":function(e){t.drawer=e}}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:this.lock[this.row_index],expression:"this.lock[this.row_index]"}],attrs:{icon:"el-icon-plus",type:"warning",plain:"",size:"mini"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("產品群組")]),a("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:t.cancel_drawer}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:t.check_drawer}},[t._v("確認")]),a("el-tree",{ref:"tree",attrs:{data:t.tree_data,props:t.defaultProps,accordion:"","node-key":"id","render-content":t.tag_for_tree,"show-checkbox":""},on:{check:t.handleCheckChange}}),a("br"),a("el-dialog",{attrs:{title:"產品群組(新增)",visible:t.dialogVisible,width:"60%","append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-scrollbar",{staticStyle:{height:"350px"}},[a("el-tree",{ref:"product_group_tree",staticStyle:{position:"relative",left:"440px",width:"400px",height:"350px"},attrs:{data:t.productgroup_tree,props:t.defaultProps,accordion:"","node-key":"id","show-checkbox":""},on:{check:t.choose_product_group},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,o=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(i.label))]),a("span",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.deter_product_group(i)&&0==t.append_tree_lock&&1!=o["add"],expression:"deter_product_group(node)==false && append_tree_lock==false && data['add'] != true"}],attrs:{size:"mini",type:"text",size:"mini"},on:{click:function(){return t.append(i,o)}}},[t._v("\n                    加入此標籤\n                ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==o["add"],expression:"data['add'] == true"}],attrs:{size:"mini",type:"text",size:"mini"},on:{click:function(){return t.remove(i,o)}}},[t._v("\n                    重選標籤\n                ")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:"group"==t.deter_product_group(i),expression:"deter_product_group(node)=='group'"}],staticStyle:{"font-size":"14px",height:"22px"},attrs:{type:"success"}},[t._v("G")])],1)])}}])})],1),a("div",{staticStyle:{position:"absolute",top:"80px"}},[a("div",{staticStyle:{position:"relative"}},[t._v("名稱:"),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"請輸入群組名稱"},model:{value:t.product_dialog.caption,callback:function(e){t.$set(t.product_dialog,"caption",e)},expression:"product_dialog.caption"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("產品:"),a("el-select",{ref:"dialog_pro",staticClass:"none_delete_tag",staticStyle:{width:"300px"},attrs:{filterable:"",remote:"",multiple:"",placeholder:"請輸入產品群組"},on:{focus:function(e){return t.make_blur("1")}},model:{value:t.product_dialog.product_list,callback:function(e){t.$set(t.product_dialog,"product_list",e)},expression:"product_dialog.product_list"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("描述:"),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入描述"},model:{value:t.product_dialog.description,callback:function(e){t.$set(t.product_dialog,"description",e)},expression:"product_dialog.description"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("備註:"),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入備註"},model:{value:t.product_dialog.remarks,callback:function(e){t.$set(t.product_dialog,"remarks",e)},expression:"product_dialog.remarks"}})],1),a("span",[a("el-button",{staticStyle:{position:"relative",left:"30px"},attrs:{type:"danger",plain:""},on:{click:t.cancel_product_group}},[t._v("取消")]),a("el-button",{staticStyle:{position:"relative",left:"40px"},attrs:{type:"primary",plain:""},on:{click:t.store_product_group}},[t._v("確定")])],1)])],1)],1)],1),a("div",{attrs:{data:t.sub_row}},[a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n            客戶(必填):"),a("el-autocomplete",{class:"customer"==t.deter_require?"input_require":"",staticStyle:{position:"relative",left:"32px",width:"110px"},attrs:{size:"small","fetch-suggestions":t.querySearch_name,placeholder:"請輸入客戶"},model:{value:t.input.name,callback:function(e){t.$set(t.input,"name",e)},expression:"input.name"}}),a("span",{staticStyle:{position:"relative",left:"50px"}},[t._v("廠區(選填):")]),a("el-autocomplete",{staticStyle:{position:"relative",left:"50px",width:"100px"},attrs:{size:"small","fetch-suggestions":t.querySearch_site,placeholder:"請輸入廠區"},model:{value:t.input.factory,callback:function(e){t.$set(t.input,"factory",e)},expression:"input.factory"}}),a("span",{staticStyle:{position:"relative",left:"458px","font-size":"16px",bottom:"5px"}},[t._v("● 測試 - 借用給客戶(3個月)")]),a("span",{staticStyle:{position:"relative",left:"286px",top:"21px"}},[t._v("○ 申請新的 key 須填寫領用單，行政查詢用")]),a("span",{staticStyle:{position:"relative",right:"17px",top:"42px"}},[t._v("○ 此狀態須由申請人自行申請延期")])],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n            KeyID(必填):"),a("el-autocomplete",{class:"sn"==t.deter_require?"input_require":"",staticStyle:{position:"relative",left:"20px",width:"110px"},attrs:{size:"small","fetch-suggestions":t.querySearch_sn,placeholder:"請輸入KeyID"},model:{value:t.sub_row.sn,callback:function(e){t.$set(t.sub_row,"sn",e)},expression:"sub_row.sn"}}),a("span",{staticStyle:{position:"relative",left:"40px"}},[t._v("類型(必填):")]),a("el-select",{class:"type"==t.deter_require?"input_require":"",staticStyle:{position:"relative",left:"40px",width:"100px"},attrs:{size:"small",placeholder:"類型"},on:{change:t.type_change},model:{value:t.sub_row.type,callback:function(e){t.$set(t.sub_row,"type",e)},expression:"sub_row.type"}},t._l(t.type_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("業務地區(必填):\n        "),a("el-select",{class:"region"==t.deter_require?"input_require":"",staticStyle:{position:"relative",right:"5px",width:"110px"},attrs:{size:"small",placeholder:"業務地區"},model:{value:t.sub_row.region,callback:function(e){t.$set(t.sub_row,"region",e)},expression:"sub_row.region"}},t._l(t.region_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n        產品名稱(必填):"),a("el-select",{ref:"sub_row_pro",class:"func_uid"==t.deter_require?"input_require":"",staticStyle:{width:"350px"},attrs:{filterable:"",remote:"",multiple:"",placeholder:"請點選右邊「產品選擇」"},on:{focus:function(e){return t.make_blur("2")}},model:{value:t.sub_row.func_uid,callback:function(e){t.$set(t.sub_row,"func_uid",e)},expression:"sub_row.func_uid"}}),a("el-button",{staticStyle:{position:"relative",left:"20px"},attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){return t.choose_func_uid()}}},[t._v("產品選擇")]),a("span",{staticStyle:{position:"relative",left:"284px",bottom:"23px"}},[t._v("● 出貨 - 尚未完全付完款項(6個月)")]),a("span",{staticStyle:{position:"relative",left:"63px",top:"2px"}},[t._v("○ 須提供訂單編號(詢問業務)供行政查詢")]),a("span",{staticStyle:{position:"relative",right:"217px",top:"26px",bottom:"1px"}},[t._v("○ 此狀態須由申請人自行申請延期")])],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("數量(必填):"),a("el-input",{class:"count"==t.deter_require?"input_require":"",staticStyle:{width:"100px",position:"relative",left:"32px"},attrs:{size:"small",placeholder:"請輸入數量"},model:{value:t.sub_row.count,callback:function(e){t.$set(t.sub_row,"count",e)},expression:"sub_row.count"}})],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n        到期日(必填):"),a("el-date-picker",{class:"expiration"==t.deter_require?"input_require":"",staticStyle:{width:"200px",position:"relative",left:"16px"},attrs:{type:"date","value-format":"yyyy-MM-dd",name:"expiration",placeholder:"請輸入到期日"},model:{value:t.sub_row.expiration,callback:function(e){t.$set(t.sub_row,"expiration",e)},expression:"sub_row.expiration"}}),a("span",{staticStyle:{position:"relative",left:"32px"}},[t._v("允許版本(選填):")]),a("el-input",{staticStyle:{width:"200px",position:"relative",left:"32px"},attrs:{size:"small",placeholder:"請輸入允許版本"},model:{value:t.sub_row.version,callback:function(e){t.$set(t.sub_row,"version",e)},expression:"sub_row.version"}}),a("span",{staticStyle:{position:"relative",bottom:"5px",left:"220px"}},[t._v("● 正式 - 付完全部款項(隔年1月31日)")]),a("span",{staticStyle:{position:"relative",right:"20px",top:"20px"}},[t._v("○ 須提供訂單編號供行政查詢，財務查詢付款狀況")])],1),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n        負責人(必填):\n        "),t._l(t.sub_row.user_display,(function(e,i){return[a("el-autocomplete",{class:"user"==t.deter_require?"input_require":"",staticStyle:{width:"200px",position:"relative",left:"12px"},attrs:{"fetch-suggestions":t.querySearch_user,placeholder:"請輸入負責人"},model:{value:t.sub_row.user_display[i],callback:function(e){t.$set(t.sub_row.user_display,i,e)},expression:"sub_row.user_display[index]"}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=i,expression:"index != 0"}],staticStyle:{color:"#F56C6C","font-size":"15px",position:"relative",bottom:"15px",left:"3px"},attrs:{type:"text",icon:"el-icon-error"},on:{click:function(e){return t.remove_user(i)}}})]})),a("el-button",{staticStyle:{"font-size":"15px"},attrs:{type:"text",icon:"el-icon-circle-plus"},on:{click:function(e){return t.add_user()}}})],2),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("\n        聯絡人(必填):\n            "),t._l(t.sub_row.contact_display,(function(e,i){return[a("el-autocomplete",{class:"contact"==t.deter_require?"input_require":"",staticStyle:{width:"200px",position:"relative",left:"12px"},attrs:{"fetch-suggestions":t.querySearch_contact,placeholder:"請輸入聯絡人"},model:{value:t.sub_row.contact_display[i],callback:function(e){t.$set(t.sub_row.contact_display,i,e)},expression:"sub_row.contact_display[index]"}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=i,expression:"index != 0"}],staticStyle:{color:"#F56C6C","font-size":"15px",position:"relative",bottom:"15px",left:"3px"},attrs:{type:"text",icon:"el-icon-error"},on:{click:function(e){return t.remove_contact(i)}}})]})),a("el-button",{staticStyle:{"font-size":"15px"},attrs:{type:"text",icon:"el-icon-circle-plus"},on:{click:function(e){return t.add_contact()}}})],2),a("div",{attrs:{align:"left",id:"left100px"}},[t._v("備註(選填):"),a("el-input",{staticStyle:{width:"200px",position:"relative",left:"32px"},attrs:{size:"small",placeholder:"請輸入備註"},model:{value:t.sub_row.comment,callback:function(e){t.$set(t.sub_row,"comment",e)},expression:"sub_row.comment"}}),a("span",{staticStyle:{position:"relative",bottom:"40px",left:"545px"}},[t._v("● 永久")]),a("span",{staticStyle:{position:"relative",left:"518px",bottom:"13px"}},[t._v("○ 台灣區需提供客戶切結書")]),a("span",{staticStyle:{position:"relative",left:"329px",bottom:"74px"}},[t._v("○ 此狀態會由系統自動延期一年並寄給各申請人")])],1)]),a("div",{staticStyle:{position:"relative",top:"20px"},attrs:{align:"center"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.lock[t.row_index]||0==t.lock.length,expression:"lock[row_index] || lock.length == 0"}],staticStyle:{position:"relative",right:"120px",bottom:"45px",display:"inline"},attrs:{circle:"",type:"primary",icon:"el-icon-plus",medium:""},on:{click:t.add}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.lock[t.row_index]||0==t.lock.length,expression:"lock[row_index] || lock.length == 0"}],staticStyle:{position:"relative",left:"550px",width:"150px",display:"inline"},attrs:{size:"medium"},on:{click:t.cancel}},[t._v("取消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.lock[t.row_index]||0==t.lock.length,expression:"lock[row_index] || lock.length == 0"}],staticStyle:{position:"relative",left:"550px",width:"150px",display:"inline"},attrs:{size:"medium"},on:{click:t.submit}},[t._v("送出")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.lock[t.row_index]&&0!=t.lock.length,expression:"!lock[row_index] && lock.length != 0"}],staticStyle:{position:"relative",right:"280px",bottom:"45px"},attrs:{circle:"",type:"primary",icon:"el-icon-check",medium:""},on:{click:function(e){return t.store_row()}}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.lock[t.row_index]&&0!=t.lock.length,expression:"!lock[row_index] && lock.length != 0"}],staticStyle:{position:"relative",right:"280px",bottom:"45px"},attrs:{circle:"",type:"danger",icon:"el-icon-close",medium:""},on:{click:function(e){return t.cancel_row()}}}),a("el-table",{ref:"addtable",staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"",label:"編輯",width:"65"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.$index,o=e.row;return[a("el-button",{attrs:{round:"",type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.canceldata(i,o)}}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.$index,o=e.row;return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.lock[i],expression:"lock[$index]"}],attrs:{circle:"",type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(e){return t.edit_row(i,o)}}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"customer",label:"客戶",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){e.$index;var i=e.row;return[a("el-input",{staticStyle:{width:"110px"},attrs:{type:"text",name:"customer",readonly:""},model:{value:i.customer,callback:function(e){t.$set(i,"customer",e)},expression:"row.customer"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"sn",label:"KeyID",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"100px"},attrs:{type:"text",name:"sn",readonly:""},model:{value:i.sn,callback:function(e){t.$set(i,"sn",e)},expression:"row.sn"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"func_uid",label:"產品名稱",width:"190"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"160px"},attrs:{type:"text",name:"func_uid",readonly:""},model:{value:i.func_uid,callback:function(e){t.$set(i,"func_uid",e)},expression:"row.func_uid"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"version",label:"版本",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"80px"},attrs:{type:"text",name:"version",readonly:""},model:{value:i.version,callback:function(e){t.$set(i,"version",e)},expression:"row.version"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"count",label:"數量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"50px"},attrs:{type:"text",name:"count",readonly:""},model:{value:i.count,callback:function(e){t.$set(i,"count",e)},expression:"row.count"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"expiration",label:"到期日",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"140px"},attrs:{type:"text",name:"expiration","value-format":"yyyy-MM-dd",readonly:""},model:{value:i.expiration,callback:function(e){t.$set(i,"expiration",e)},expression:"row.expiration"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"type",label:"類型",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"80px"},attrs:{type:"text",name:"type",readonly:""},model:{value:i.type,callback:function(e){t.$set(i,"type",e)},expression:"row.type"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"user",label:"負責人",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"60px"},attrs:{type:"text",name:"user",readonly:""},model:{value:i.user,callback:function(e){t.$set(i,"user",e)},expression:"row.user"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"region",label:"地區",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"60px"},attrs:{type:"text",name:"region",readonly:""},model:{value:i.region,callback:function(e){t.$set(i,"region",e)},expression:"row.region"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"comment",label:"備註",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"130px"},attrs:{type:"text",name:"comment",readonly:""},model:{value:i.comment,callback:function(e){t.$set(i,"comment",e)},expression:"row.comment"}})]}}])}),a("el-table-column",{attrs:{align:"center",prop:"contact",label:"聯絡人",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[a("el-input",{staticStyle:{width:"80px"},attrs:{type:"text",name:"contact",readonly:""},model:{value:i.contact,callback:function(e){t.$set(i,"contact",e)},expression:"row.contact"}})]}}])})],1)],1)],1)},V=[];a("20d6");function F(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=L(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function L(t,e){if(t){if("string"===typeof t)return K(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?K(t,e):void 0}}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var B={components:{Loading:y},name:"add",data:function(){return{product_groups_data:[],user:[],all_Data:{},info_data:[],tableData:[],productgroup_tree:[],customer_site_opt:[],user_opt:[],customer_name_opt:[],region_opt:[],func_uid_opt:[],sn_opt:[],contact_opt:[],type_opt:[{label:"正式",value:"正式"},{label:"測試",value:"測試"},{label:"出貨",value:"出貨"},{label:"永久",value:"永久"}],info_id:0,input:{name:"",factory:""},product_dialog:{caption:"",product_list:[],description:"",remarks:"",product_list_detail:[]},sub_row:{caption:"",comment:"",contact:"",count:null,customer:"",expiration:"",func_uid:[],index:null,info:[],info_id:null,issued:"",operator:"",region:"",registration:"",sn:null,type:"",user:"",version:"",contact_display:[""],user_display:[""]},lock:[],row_index:0,drawer:!1,tree_data:[],origin_tree_data:[],dialogVisible:!1,deter_require:"",append_tree_lock:!1,register_append_node:[],tree_node_count:0,caption_to_product:[],tree_map:new Map,optionSet:new Set,isLoading:!0}},created:function(){var t=this;this.axios.get("/get_product_groups_info_data",{headers:{"Content-Encoding":"gzip"}}).then((function(e){t.product_groups_data=JSON.parse(JSON.stringify(e.data))["product_groups"],t.info_data=JSON.parse(JSON.stringify(e.data))["info_data"],t.user=JSON.parse(t.$route.query.user),t.all_Data=JSON.parse(t.$route.query.all_Data);var a,i=new Map,o=new Map,r=new Map,n=JSON.parse(JSON.stringify(e.data))["sn_dict"],l=F(t.all_Data["product_data"]);try{for(l.s();!(a=l.n()).done;){var s=a.value;i.set(s["product_name"],{category_id:s["category_id"],caption:s["caption"]})}}catch(Je){l.e(Je)}finally{l.f()}var c,u=F(t.all_Data["option_data"]);try{for(u.s();!(c=u.n()).done;){var p=c.value;o.set(p["option_name"],{category_id:i.get(p["product_name"])["category_id"],product_name:p["product_name"],caption:p["caption"]})}}catch(Je){u.e(Je)}finally{u.f()}var d,f=F(t.all_Data["module_data"]);try{for(f.s();!(d=f.n()).done;){var _=d.value;r.set(_["mod_uid"],_["caption"])}}catch(Je){f.e(Je)}finally{f.f()}var h,m=JSON.parse(JSON.stringify(t.info_data)),g=0,v=F(t.info_data);try{for(v.s();!(h=v.n()).done;){var y=h.value;void 0!=n[y["sn"]]&&(""!=t.all_Data["customer_data"][n[y["sn"]]["sn_id"]-1]["site"]?m[g]=Object.assign(m[g],{customer:t.all_Data["customer_data"][n[y["sn"]]["sn_id"]-1]["name"]+"|"+t.all_Data["customer_data"][n[y["sn"]]["sn_id"]-1]["site"],user:n[y["sn"]]["user"],info:[n[y["sn"]]["note1"],n[y["sn"]]["note2"],n[y["sn"]]["note3"],n[y["sn"]]["note4"],n[y["sn"]]["note5"]]}):m[g]=Object.assign(m[g],{customer:t.all_Data["customer_data"][n[y["sn"]]["sn_id"]-1]["name"],user:n[y["sn"]]["user"],info:[n[y["sn"]]["note1"],n[y["sn"]]["note2"],n[y["sn"]]["note3"],n[y["sn"]]["note4"],n[y["sn"]]["note5"]]}),""!=n[y["sn"]]["region"]?m[g]=Object.assign(m[g],{region:t.all_Data["region_data"][parseInt(n[y["sn"]]["region"],10)-1]["name"]}):m[g]=Object.assign(m[g],{region:""})),void 0!=o.get(y["func_uid"])?(m[g]=Object.assign(m[g],{caption:o.get(y["func_uid"])["category_id"]}),m[g]["func_uid"]=o.get(y["func_uid"])["caption"]+"("+o.get(y["func_uid"])["product_name"]+")"):void 0!=i.get(y["func_uid"])&&(m[g]=Object.assign(m[g],{caption:i.get(y["func_uid"])["category_id"]}),m[g]["func_uid"]=i.get(y["func_uid"])["caption"]),void 0!=r.get(y["type"])&&(m[g]["type"]=r.get(y["type"])),g++}}catch(Je){v.e(Je)}finally{v.f()}t.info_data=JSON.parse(JSON.stringify(m)),t.info_id=t.info_data.length;var b,w=F(t.all_Data["sn_data"]);try{for(w.s();!(b=w.n()).done;){var x=b.value;t.sn_opt.push({value:x["sn"],label:x["sn"]})}}catch(Je){w.e(Je)}finally{w.f()}var S,k=new Set,O=F(t.all_Data["sn_data"]);try{for(O.s();!(S=O.n()).done;){var D,$=S.value,N=F($["user"].split(","));try{for(N.s();!(D=N.n()).done;){var J=D.value;k.add(J)}}catch(Je){N.e(Je)}finally{N.f()}}}catch(Je){O.e(Je)}finally{O.f()}var z,C=F(k);try{for(C.s();!(z=C.n()).done;){var q=z.value;t.user_opt.push({value:q,label:q})}}catch(Je){C.e(Je)}finally{C.f()}var I,j=F(t.all_Data["region_data"]);try{for(j.s();!(I=j.n()).done;){var A=I.value;t.region_opt.push({value:A["name"],label:A["name"]})}}catch(Je){j.e(Je)}finally{j.f()}var E,T=F(t.all_Data["user_data"]);try{for(T.s();!(E=T.n()).done;){var M=E.value;t.contact_opt.push({value:M["email"],label:M["email"]})}}catch(Je){T.e(Je)}finally{T.f()}var V,L=F(t.all_Data["customer_data"]);try{for(L.s();!(V=L.n()).done;){var K,B=V.value,R=0,P=0,U=F(t.customer_name_opt);try{for(U.s();!(K=U.n()).done;){var G=K.value;G["value"]==B["name"]&&(R=1)}}catch(Je){U.e(Je)}finally{U.f()}var H,Q=F(t.customer_site_opt);try{for(Q.s();!(H=Q.n()).done;){var W=H.value;W["value"]==B["site"]&&(P=1)}}catch(Je){Q.e(Je)}finally{Q.f()}0==R&&t.customer_name_opt.push({value:B["name"],label:B["name"]}),0==P&&t.customer_site_opt.push({value:B["site"],label:B["site"]})}}catch(Je){L.e(Je)}finally{L.f()}var X=JSON.parse(t.$route.query.checked_Data);if(0!=X.length){var Y,Z=F(X);try{for(Z.s();!(Y=Z.n()).done;){var tt=Y.value;tt["contact_display"]=tt["contact"].split(",")}}catch(Je){Z.e(Je)}finally{Z.f()}var et,at=F(X);try{for(at.s();!(et=at.n()).done;){var it=et.value;it["info_id"]=t.info_id,it=Object.assign(it,{operator:"新增"}),t.info_id++}}catch(Je){at.e(Je)}finally{at.f()}t.tableData=JSON.parse(JSON.stringify(X))}var ot,rt=F(t.tableData);try{for(rt.s();!(ot=rt.n()).done;){ot.value;t.lock.push(!0)}}catch(Je){rt.e(Je)}finally{rt.f()}var nt,lt=new Set,st=F(t.all_Data["product_data"]);try{for(st.s();!(nt=st.n()).done;){var ct=nt.value;lt.add(ct["category_id"])}}catch(Je){st.e(Je)}finally{st.f()}var ut,pt=F(lt);try{for(pt.s();!(ut=pt.n()).done;){var dt=ut.value;t.tree_data.push({id:t.tree_node_count,label:dt,children:[]}),t.tree_node_count++}}catch(Je){pt.e(Je)}finally{pt.f()}var ft,_t=F(t.all_Data["product_data"]);try{for(_t.s();!(ft=_t.n()).done;)for(var ht=ft.value,mt=0;mt<t.tree_data.length;mt++)t.tree_data[mt]["label"]==ht["category_id"]&&(t.tree_data[mt]["children"].push({id:t.tree_node_count,label:ht["caption"],children:[],category:ht["category_id"]}),t.tree_node_count++)}catch(Je){_t.e(Je)}finally{_t.f()}for(var gt=0;gt<t.tree_data.length;gt++)for(var vt=0;vt<t.tree_data[gt]["children"].length;vt++){var yt,bt=F(t.all_Data["product_data"]);try{for(bt.s();!(yt=bt.n()).done;){var wt=yt.value;if(t.tree_data[gt]["children"][vt]["label"]==wt["caption"]){var xt,St=F(t.all_Data["option_data"]);try{for(St.s();!(xt=St.n()).done;){var kt=xt.value;wt["product_name"]==kt["product_name"]&&(t.tree_data[gt]["children"][vt]["children"].push({id:t.tree_node_count,label:kt["caption"],product_name:kt["product_name"],children:[],category:kt["product_name"]}),t.tree_node_count++)}}catch(Je){St.e(Je)}finally{St.f()}}}}catch(Je){bt.e(Je)}finally{bt.f()}}t.origin_tree_data=JSON.parse(JSON.stringify(t.tree_data));var Ot,Dt=F(lt);try{for(Dt.s();!(Ot=Dt.n()).done;){var $t=Ot.value;t.caption_to_product.push({caption:$t,product:[]});var Nt,Jt=F(t.all_Data["product_data"]);try{for(Jt.s();!(Nt=Jt.n()).done;){var zt=Nt.value;zt["category_id"]==t.caption_to_product[t.caption_to_product.length-1]["caption"]&&t.caption_to_product[t.caption_to_product.length-1]["product"].push(zt["product_name"])}}catch(Je){Jt.e(Je)}finally{Jt.f()}}}catch(Je){Dt.e(Je)}finally{Dt.f()}var Ct,qt=F(t.all_Data["option_data"]);try{for(qt.s();!(Ct=qt.n()).done;){var It=Ct.value;t.optionSet.add(It["product_name"])}}catch(Je){qt.e(Je)}finally{qt.f()}var jt,At=F(t.optionSet);try{for(At.s();!(jt=At.n()).done;){var Et=jt.value;t.caption_to_product.push({caption:Et,product:[]});var Tt,Mt=F(t.all_Data["option_data"]);try{for(Mt.s();!(Tt=Mt.n()).done;){var Vt=Tt.value;Vt["product_name"]==t.caption_to_product[t.caption_to_product.length-1]["caption"]&&t.caption_to_product[t.caption_to_product.length-1]["product"].push(Vt["option_name"])}}catch(Je){Mt.e(Je)}finally{Mt.f()}for(var Ft=0;Ft<t.caption_to_product.length-1;Ft++)if(-1!=t.caption_to_product[Ft]["product"].indexOf(t.caption_to_product[t.caption_to_product.length-1]["caption"])){t.caption_to_product[Ft]["product"].splice(t.caption_to_product[Ft]["product"].indexOf(t.caption_to_product[t.caption_to_product.length-1]["caption"]),1);var Lt,Kt=F(t.caption_to_product[t.caption_to_product.length-1]["product"]);try{for(Kt.s();!(Lt=Kt.n()).done;){var Bt=Lt.value;t.caption_to_product[Ft]["product"].push(Bt)}}catch(Je){Kt.e(Je)}finally{Kt.f()}}}}catch(Je){At.e(Je)}finally{At.f()}for(var Rt=0;Rt<t.caption_to_product.length;Rt++){var Pt,Ut=F(t.all_Data["product_data"]);try{for(Ut.s();!(Pt=Ut.n()).done;){var Gt=Pt.value;t.caption_to_product[Rt]["caption"]==Gt["product_name"]&&(t.caption_to_product[Rt]["caption"]=Gt["caption"])}}catch(Je){Ut.e(Je)}finally{Ut.f()}}var Ht,Qt=F(JSON.parse(JSON.stringify(t.tree_data)));try{for(Qt.s();!(Ht=Qt.n()).done;){var Wt=Ht.value;if(0!=Wt.children.length){t.tree_map.set(Wt.label,Wt);var Xt,Yt=F(Wt.children);try{for(Yt.s();!(Xt=Yt.n()).done;){var Zt=Xt.value;0!=Zt.children.length&&t.tree_map.set(Zt.label,Zt)}}catch(Je){Yt.e(Je)}finally{Yt.f()}}}}catch(Je){Qt.e(Je)}finally{Qt.f()}var te,ee=F(t.product_groups_data);try{for(ee.s();!(te=ee.n()).done;){var ae,ie=te.value,oe=t.tree_data,re=F(JSON.parse(ie.tag));try{for(re.s();!(ae=re.n()).done;){var ne=ae.value;oe=oe[t.search_tree_index(oe,ne)]["children"]}}catch(Je){re.e(Je)}finally{re.f()}oe.unshift({id:t.tree_node_count++,label:ie["caption"],children:[]});var le,se=t.deter_group(t.caption_to_product,JSON.parse(ie["product_list"])),ce=JSON.parse(ie["product_list"]),ue=F(se);try{for(ue.s();!(le=ue.n()).done;){var pe=le.value,de=t.tree_node_adjust(t.tree_map.get(pe),t.tree_node_count);oe[0]["children"].push(de[0]),t.tree_node_count=de[1];var fe,_e=F(t.caption_to_product);try{for(_e.s();!(fe=_e.n()).done;){var he=fe.value;if(he["caption"]==pe){var me,ge=F(he["product"]);try{for(ge.s();!(me=ge.n()).done;){var ve=me.value,ye=ce.indexOf(ve);-1!=ye&&ce.splice(ye,1)}}catch(Je){ge.e(Je)}finally{ge.f()}}}}catch(Je){_e.e(Je)}finally{_e.f()}}}catch(Je){ue.e(Je)}finally{ue.f()}var be,we=F(ce);try{for(we.s();!(be=we.n()).done;){var xe,Se=be.value,ke=F(t.all_Data["option_data"]);try{for(ke.s();!(xe=ke.n()).done;){var Oe=xe.value;Oe["option_name"]==Se&&oe[0]["children"].push({id:t.tree_node_count,label:Oe["caption"],product_name:Oe["product_name"],children:[]})}}catch(Je){ke.e(Je)}finally{ke.f()}var De,$e=F(t.all_Data["product_data"]);try{for($e.s();!(De=$e.n()).done;){var Ne=De.value;Ne["product_name"]==Se&&oe[0]["children"].push({id:t.tree_node_count,label:Ne["caption"],children:[]})}}catch(Je){$e.e(Je)}finally{$e.f()}t.tree_node_count++}}catch(Je){we.e(Je)}finally{we.f()}}}catch(Je){ee.e(Je)}finally{ee.f()}t.productgroup_tree=JSON.parse(JSON.stringify(t.tree_data)),t.isLoading=!1}))},watch:{input:{handler:function(t,e){""!=this.input.factory?this.sub_row.customer=this.input.name+"|"+this.input.factory:this.sub_row.customer=this.input.name},deep:!0},sub_row:{handler:function(t,e){var a,i=F(this.all_Data["sn_data"]);try{for(i.s();!(a=i.n()).done;){var o=a.value;this.sub_row["sn"]==o["sn"]&&(this.sub_row["user"]=o["user"])}}catch(r){i.e(r)}finally{i.f()}},deep:!0}},methods:{type_change:function(){var t=new Date;switch(this.sub_row.type){case"正式":t.setMonth(t.getMonth()+12),this.sub_row.expiration=t.toISOString().slice(0,4)+"-01-30";break;case"測試":t.setMonth(t.getMonth()+3),this.sub_row.expiration=t.toISOString().slice(0,10);break;case"出貨":t.setMonth(t.getMonth()+6),this.sub_row.expiration=t.toISOString().slice(0,10);break;case"永久":this.sub_row.expiration="9999-12-31";break}},deter_group:function(t,e){var a,i=[],o=JSON.parse(JSON.stringify(e)),r=F(t);try{for(r.s();!(a=r.n()).done;){var n,l=a.value,s=0,c=F(l["product"]);try{for(c.s();!(n=c.n()).done;){var u=n.value;if(-1===o.indexOf(u)){s=1;break}}}catch(_){c.e(_)}finally{c.f()}if(0==s){i.push(l["caption"]);var p,d=F(l["product"]);try{for(d.s();!(p=d.n()).done;){var f=p.value;o.splice(o.indexOf(f),1)}}catch(_){d.e(_)}finally{d.f()}}}}catch(_){r.e(_)}finally{r.f()}return i},store_product_group:function(){var t=this;if(""!=this.product_dialog.caption&&0!=this.product_dialog.product_list.length){var e,a=[],i=F(this.product_dialog.product_list_detail);try{for(i.s();!(e=i.n()).done;){var o=e.value,r=0,n=o["label"].split("").reverse().join("").split("(");this.optionSet.has(n[0].replace(")",""))&&(o["label"]=o["label"].replace("("+n[0].replace(")","")+")",""));var l,s=F(this.all_Data["option_data"]);try{for(s.s();!(l=s.n()).done;){var c=l.value;if(o["label"]==c["caption"]&&o["category"]==c["product_name"]){a.push(c["option_name"]),r=1;break}}}catch(g){s.e(g)}finally{s.f()}if(0==r){var u,p=F(this.all_Data["product_data"]);try{for(p.s();!(u=p.n()).done;){var d=u.value;if(o["label"]==d["caption"]){a.push(d["product_name"]);break}}}catch(g){p.e(g)}finally{p.f()}}}}catch(g){i.e(g)}finally{i.f()}var f,_=F(this.product_groups_data);try{for(_.s();!(f=_.n()).done;){var h=f.value;if(h["caption"]==this.product_dialog.caption)return void this.$message.error("產品名稱重複，請更改");if(h.product_list==JSON.stringify(a))return void this.$message.error("群組內產品與其他群組完全重複")}}catch(g){_.e(g)}finally{_.f()}if(1==this.append_tree_lock){this.product_dialog.product_list=JSON.parse(JSON.stringify(a));var m=[];a=this.register_append_node[0];while(void 0!=a.label)m.unshift(a.label),a=a.parent;this.axios.post("/save_to_product_group",{caption:this.product_dialog.caption,product_list:JSON.stringify(this.product_dialog.product_list),tag:JSON.stringify(m),description:this.product_dialog.description,remarks:this.product_dialog.remarks}).then((function(e){t.axios.get("/get_product_groups_info_data",{}).then((function(e){t.product_groups_data=JSON.parse(JSON.stringify(e.data))["product_groups"],t.dialogVisible=!1,t.tree_data=JSON.parse(JSON.stringify(t.origin_tree_data));var a,i=F(t.product_groups_data);try{for(i.s();!(a=i.n()).done;){var o,r=a.value,n=t.tree_data,l=F(JSON.parse(r.tag));try{for(l.s();!(o=l.n()).done;){var s=o.value;n=n[t.search_tree_index(n,s)]["children"]}}catch(g){l.e(g)}finally{l.f()}n.unshift({id:t.tree_node_count++,label:r["caption"],children:[]});var c,u=t.deter_group(t.caption_to_product,JSON.parse(r["product_list"])),p=JSON.parse(r["product_list"]),d=F(u);try{for(d.s();!(c=d.n()).done;){var f=c.value,_=t.tree_node_adjust(t.tree_map.get(f),t.tree_node_count);n[0]["children"].push(_[0]),t.tree_node_count=_[1];var h,m=F(t.caption_to_product);try{for(m.s();!(h=m.n()).done;){var v=h.value;if(v["caption"]==f){var y,b=F(v["product"]);try{for(b.s();!(y=b.n()).done;){var w=y.value,x=p.indexOf(w);-1!=x&&p.splice(x,1)}}catch(g){b.e(g)}finally{b.f()}}}}catch(g){m.e(g)}finally{m.f()}}}catch(g){d.e(g)}finally{d.f()}var S,k=F(p);try{for(k.s();!(S=k.n()).done;){var O,D=S.value,$=F(t.all_Data["option_data"]);try{for($.s();!(O=$.n()).done;){var N=O.value;N["option_name"]==D&&n[0]["children"].push({id:t.tree_node_count,product_name:N["product_name"],label:N["caption"],children:[]})}}catch(g){$.e(g)}finally{$.f()}var J,z=F(t.all_Data["product_data"]);try{for(z.s();!(J=z.n()).done;){var C=J.value;C["product_name"]==D&&n[0]["children"].push({id:t.tree_node_count,label:C["caption"],children:[]})}}catch(g){z.e(g)}finally{z.f()}t.tree_node_count++}}catch(g){k.e(g)}finally{k.f()}}}catch(g){i.e(g)}finally{i.f()}t.productgroup_tree=JSON.parse(JSON.stringify(t.tree_data)),t.product_dialog.caption="",t.product_dialog.product_list=[],t.product_dialog.description="",t.product_dialog.remarks="",t.product_dialog.product_list_detail=[]}))}))}else this.$message.error("請選擇群組所在位置")}else this.$message.error("請將「產品群組」新增單，填寫完整")},choose_func_uid:function(){this.drawer=!0,this.product_group=[]},cancel_drawer:function(){var t=this;this.$nextTick((function(){t.$refs.tree.setCheckedKeys([])})),this.drawer=!1},check_drawer:function(){var t=this;if(this.sub_row.func_uid=[],0==this.lock[this.row_index]){var e,a=F(this.$refs.tree.getCheckedNodes());try{for(a.s();!(e=a.n()).done;){var i=e.value;0!=i["children"].length&&void 0!=i["children"]||(void 0!=i["product_name"]?this.sub_row.func_uid=[i["label"]+"("+i["product_name"]+")"]:this.sub_row.func_uid=[i["label"]])}}catch(p){a.e(p)}finally{a.f()}}else{var o,r=new Set,n=F(this.$refs.tree.getCheckedNodes());try{for(n.s();!(o=n.n()).done;){var l=o.value;0!=l["children"].length&&void 0!=l["children"]||(void 0!=l["product_name"]?r.add(l["label"]+"("+l["product_name"]+")"):r.add(l["label"]))}}catch(p){n.e(p)}finally{n.f()}var s,c=F(r);try{for(c.s();!(s=c.n()).done;){var u=s.value;this.sub_row.func_uid.push(u)}}catch(p){c.e(p)}finally{c.f()}}this.$nextTick((function(){t.$refs.tree.setCheckedKeys([])})),this.drawer=!1},tree_node_adjust:function(t,e){var a=JSON.parse(JSON.stringify(t));a.id=e++;var i,o=F(a.children);try{for(o.s();!(i=o.n()).done;){var r=i.value;r.id=e++;var n,l=F(r.children);try{for(l.s();!(n=l.n()).done;){var s=n.value;s.id=e++}}catch(c){l.e(c)}finally{l.f()}}}catch(c){o.e(c)}finally{o.f()}return[a,e]},cancel_product_group:function(){var t=this;this.product_dialog.caption="",this.product_dialog.product_list=[],this.product_dialog.description="",this.product_dialog.remarks="",this.$nextTick((function(){t.$refs.product_group_tree.setCheckedKeys([])})),this.dialogVisible=!1},remove:function(t,e){this.append_tree_lock=!1;var a=t.parent,i=a.data.children||a.data,o=i.findIndex((function(t){return t.id===e.id}));i.splice(o,1),this.productgroup_tree=JSON.parse(JSON.stringify(this.tree_data)),this.register_append_node=[]},append:function(t,e){if(""!=this.product_dialog.caption){this.append_tree_lock=!0;var a={label:this.product_dialog.caption,children:[],disabled:!0,add:!0};e.children||this.$set(e,"children",[]),e.children.push(a),this.register_append_node=[t]}else this.$message.error("請填寫「群組名稱」，再選擇插入位置")},tag_for_tree:function(t,e){var a,i=e.node,o=(e.data,e.store,F(this.product_groups_data));try{for(o.s();!(a=o.n()).done;){var r=a.value;if(i.label==r["caption"])return t("div",[" ",t("span",[i.label])," ",t("el-tag",{style:"position:absolute;right:1px;font-size:14px;height:25px;",attrs:{type:"success"}},["G"])]);if(i.parent.label==r["caption"]&&0==i.data.children.length&&void 0!=i.data.product_name)return t("div",[" ",t("span",[i.label])," ",t("el-tag",{style:"position:absolute;right:1px;font-size:14px;height:25px;",attrs:{type:"info"}},[i.data.product_name])])}}catch(n){o.e(n)}finally{o.f()}return t("div",[" ",t("span",[i.label])])},deter_product_group:function(t){var e,a=F(this.product_groups_data);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(t.label==i["caption"])return"group"}}catch(l){a.e(l)}finally{a.f()}var o,r=F(this.product_groups_data);try{for(r.s();!(o=r.n()).done;){var n=o.value;if(t.parent.label==n["caption"])return"under_group"}}catch(l){r.e(l)}finally{r.f()}return!1},choose_product_group:function(t,e){var a,i=[],o=[],r=F(this.$refs.product_group_tree.getCheckedNodes());try{for(r.s();!(a=r.n()).done;){var n=a.value;0==n["children"].length&&(void 0!=n["product_name"]?(i.push(n["label"]+"("+n["product_name"]+")"),o.push({label:n["label"],category:n["category"]})):(i.push(n["label"]),o.push({label:n["label"],category:n["category"]})))}}catch(l){r.e(l)}finally{r.f()}this.product_dialog.product_list=i,this.product_dialog.product_list_detail=o},handleCheckChange:function(t,e){var a=this;if(0==this.lock[this.row_index]){if(t["children"].length>0)return this.$nextTick((function(){a.$refs.tree.setCheckedNodes([])})),void this.$message({message:"修改模式無法全選",type:"warning"});this.$nextTick((function(){a.$refs.tree.setCheckedNodes([t])}))}},search_tree_index:function(t,e){for(var a=0;a<t.length;a++)if(t[a]["label"]==e)return a;return-1},add_user:function(){this.sub_row.user_display.push("")},remove_user:function(t){this.sub_row.user_display.splice(t,1)},add_contact:function(){this.sub_row.contact_display.push("")},remove_contact:function(t){this.sub_row.contact_display.splice(t,1)},edit_row:function(t,e){for(var a=0;a<this.lock.length;a++)0==this.lock[a]&&a!=t&&this.cancel_row();-1!=e.customer.indexOf("|")?(this.input.name=e.customer.split("|")[0],this.input.factory=e.customer.split("|")[1]):(this.input.name=e.customer,this.input.factory=""),this.row_index=t,this.sub_row=JSON.parse(JSON.stringify(e)),this.sub_row.func_uid=[e["func_uid"]],this.$set(this.lock,t,!1)},cancel_row:function(){this.sub_row={caption:"",comment:"",contact:"",count:null,customer:"",expiration:"",func_uid:[],index:null,info:[],info_id:null,issued:"",operator:"",region:"",registration:"",sn:null,type:"",user:"",version:"",contact_display:[""],user_display:[""]},this.input.name="",this.input.factory="",this.$set(this.lock,this.row_index,!0)},store_row:function(){for(var t=0;t<this.sub_row["contact_display"].length;t++)""==this.sub_row["contact_display"][t]&&(this.sub_row["contact_display"].splice(t,1),t--);for(var e=0;e<this.sub_row["user_display"].length;e++)""==this.sub_row["user_display"][e]&&(this.sub_row["user_display"].splice(e,1),e--);this.test_edit_add()&&(this.tableData[this.row_index]=Object.assign({},this.sub_row),this.tableData[this.row_index]["func_uid"]=this.sub_row["func_uid"][0],this.tableData[this.row_index]["contact"]=this.sub_row["contact_display"].join(),this.tableData[this.row_index]["user"]=this.sub_row["user_display"].join(),this.sub_row={caption:"",comment:"",contact:"",count:null,customer:"",expiration:"",func_uid:[],index:null,info:[],info_id:null,issued:"",operator:"",region:"",registration:"",sn:null,type:"",user:"",version:"",contact_display:[""],user_display:[""]},this.input.name="",this.input.factory="",this.$set(this.lock,this.row_index,!0))},test_edit_add:function(){if(null==this.input.name||""==this.input.name)return this.$message({message:"客戶不可為空",type:"warning"}),this.deter_require="customer",!1;if(0==this.sub_row["user_display"].length)return this.$message({message:"負責人不可為空",type:"warning"}),this.deter_require="user",!1;if(0==this.sub_row["contact_display"].length)return this.$message({message:"聯絡人不可為空",type:"warning"}),this.deter_require="contact",!1;if(null==this.sub_row["sn"]||""==this.sub_row["sn"])return this.$message({message:"KeyID不可為空",type:"warning"}),this.deter_require="sn",!1;if(null==this.sub_row["func_uid"]||""==this.sub_row["func_uid"])return this.$message({message:"產品名稱不可為空",type:"warning"}),this.deter_require="func_uid",!1;if(null==this.sub_row["count"]||""==this.sub_row["count"])return this.$message({message:"數量不可為空",type:"warning"}),this.deter_require="count",!1;if(null==this.sub_row["expiration"]||""==this.sub_row["expiration"])return this.$message({message:"到期日期不可為空",type:"warning"}),this.deter_require="expiration",!1;if(null==this.sub_row["type"]||""==this.sub_row["type"])return this.$message({message:"類型不可為空",type:"warning"}),this.deter_require="type",!1;if(null==this.sub_row["region"]||""==this.sub_row["region"])return this.$message({message:"地區不可為空",type:"warning"}),this.deter_require="region",!1;var t,e=new Map,a=0,i=F(this.all_Data["customer_data"]);try{for(i.s();!(t=i.n()).done;){var o=t.value;""!=o["site"]?e.set(o["customer_id"],o["name"]+"|"+o["site"]):e.set(o["customer_id"],o["name"]),this.input.name==o["name"]&&this.input.factory==o["site"]&&(a=1)}}catch(d){i.e(d)}finally{i.f()}if(0==a){var r,n=F(this.all_Data["sn_data"]);try{for(n.s();!(r=n.n()).done;){var l=r.value;if(this.sub_row["sn"]==l["sn"]){var s,c='<body><table border=\'1\'><tr><th align="center" width="120">客戶</th><th align="center" width="100">更新日期</th><th align="center" width="90">KeyID</th><th align="center" width="350">產品名稱</th><th align="center" width="100">版本</th><th align="center" width="60">類型</th><th align="center" width="60">數量</th><th align="center" width="100">到期日</th><th align="center" width="60">地區</th><th align="center" width="130">備註</th><th align="center" width="170">聯絡人</th></tr>',u=F(this.info_data);try{for(u.s();!(s=u.n()).done;){var p=s.value;p["sn"]==l["sn"]&&(c+='<tr align="center">',c+='<td width="120">'+String(p["customer"])+'</td><td width="100">'+String(p["issued"])+'</td><td width="90">'+String(p["sn"])+'</td><td width="350">'+String(p["func_uid"])+'</td><td width="100">'+String(p["version"])+'</td><td width="60">'+String(p["type"])+'</td><td width="60">'+String(p["count"])+'</td><td width="100">'+String(p["expiration"])+'</td><td width="60">'+String(p["region"])+'</td><td width="130">'+String(p["comment"])+'</td><td width="170">'+String(p["contact"])+"</td></tr>")}}catch(d){u.e(d)}finally{u.f()}c+="</table></body>",this.$confirm('此<span style="background-color: #ffb7b7">〈ID:'+String(l["sn"])+'〉</span>已在<span style="background-color: #ffb7b7"><strong>〈客戶:'+e.get(l["sn_id"])+"〉</strong></span>下，是否要刪除以下此ID連結資料後新增"+c,"警告",{confirmButtonText:"確定",customClass:"message-waring",cancelButtonText:"取消",dangerouslyUseHTMLString:!0}).then((function(){return console.log("確定"),!0})).catch((function(){return console.log("取消"),!1}))}}}catch(d){n.e(d)}finally{n.f()}}return!0},submit:function(){var t,e=this,a=[],i=F(this.tableData);try{for(i.s();!(t=i.n()).done;){var o,r=t.value,n=F(this.info_data);try{for(n.s();!(o=n.n()).done;){var l=o.value;JSON.stringify(r["sn"])==JSON.stringify(l["sn"])&JSON.stringify(r["func_uid"])==JSON.stringify(l["func_uid"])&JSON.stringify(r["type"])==JSON.stringify(l["type"])&&(alert("新增資料庫與原資料庫發生衝突，自動新增以下幾筆資料的刪除申請\n\nKeyID: "+r["sn"]+"\n產品名稱: "+r["func_uid"]+"\n類型 : "+r["type"]+"\n此筆資料重複"),a.push(l))}}catch(_){n.e(_)}finally{n.f()}}}catch(_){i.e(_)}finally{i.f()}if(0!=a.length){var s,c=F(a);try{for(c.s();!(s=c.n()).done;){var u,p=s.value,d=F(this.all_Data["user_data"]);try{for(d.s();!(u=d.n()).done;){var f=u.value;p["contact"]==f["email"]&&(p["contact"]=f["user"])}}catch(_){d.e(_)}finally{d.f()}p=Object.assign(p,{operator:"刪除"})}}catch(_){c.e(_)}finally{c.f()}this.axios.post("/save_to_handle",{checked_Data:a,content:"資料庫衝突",user:this.user}).then((function(t){e.axios.post("/save_to_handle",{checked_Data:e.tableData,content:"none",user:e.user}).then((function(t){t.data;e.$router.push({name:"Show_All"})}))}))}else this.axios.post("/save_to_handle",{checked_Data:this.tableData,content:"none",user:this.user}).then((function(t){t.data;e.$router.push({name:"Show_All"})}))},add:function(){if(this.sub_row["contact_display"].length>1)for(var t=0;t<this.sub_row["contact_display"].length;t++)""==this.sub_row["contact_display"][t]&&(this.sub_row["contact_display"].splice(t,1),t--);if(this.test_edit_add()){var e,a=new Date,i=a.toISOString().slice(0,10),o=F(this.sub_row.func_uid);try{for(o.s();!(e=o.n()).done;){var r=e.value;this.tableData.push({info_id:this.info_id,caption:this.sub_row.caption,comment:this.sub_row.comment,contact:this.sub_row.contact_display.join(),count:this.sub_row.count,customer:this.sub_row.customer,expiration:this.sub_row.expiration,func_uid:r,info:this.sub_row.info,issued:i,region:this.sub_row.region,registration:this.sub_row.registration,sn:this.sub_row.sn,type:this.sub_row.type,user:this.sub_row.user,version:this.sub_row.version,operator:"新增",index:this.tableData.length,contact_display:this.sub_row.contact_display}),this.info_id++,this.lock.push(!0)}}catch(n){o.e(n)}finally{o.f()}}},canceldata:function(t,e){this.tableData.splice(t,1),this.lock.splice(t,1)},cancel:function(){this.$router.push({name:"Show_All"})},querySearch_sn:function(t,e){var a=t?this.sn_opt.filter(this.createFilter(t)):this.sn_opt;e(a)},querySearch_name:function(t,e){var a=t?this.customer_name_opt.filter(this.createFilter(t)):this.customer_name_opt;e(a)},querySearch_site:function(t,e){var a=t?this.customer_site_opt.filter(this.createFilter(t)):this.customer_site_opt;e(a)},querySearch_user:function(t,e){var a=t?this.user_opt.filter(this.createFilter(t)):this.user_opt;0==a.length&&(a.push({value:t+"@eastek.com.cn",label:t+"@eastek.com.cn"}),a.push({value:t+"@eastek.com.tw",label:t+"@eastek.com.tw"})),e(a)},querySearch_contact:function(t,e){var a=t?this.contact_opt.filter(this.createFilter(t)):this.contact_opt;0==a.length&&(a.push({value:t+"@eastek.com.cn",label:t+"@eastek.com.cn"}),a.push({value:t+"@eastek.com.tw",label:t+"@eastek.com.tw"})),e(a)},createFilter:function(t){return function(e){return-1!=String(e.value).toLowerCase().indexOf(String(t).toLowerCase())}},make_blur:function(t){var e=this;"1"==t&&this.$nextTick((function(){e.$refs.dialog_pro.blur()})),"2"==t&&this.$nextTick((function(){e.$refs.sub_row_pro.blur()}))}}},R=B,P=(a("69fc"),Object(s["a"])(R,M,V,!1,null,null,null)),U=P.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{name:"fade"}},[t.isLoading?a("loading"):t._e()],1),a("div",[a("div",{staticStyle:{position:"relative",left:"150px"},attrs:{align:"left"}},[a("span",[t._v("* 申請人 :")]),a("span",{staticStyle:{position:"relative",left:"18px"}},[t._v(t._s(t.user[0]))])]),a("div",{staticStyle:{position:"relative",left:"150px",top:"20px"},attrs:{align:"left"}},[a("span",[t._v("* 副本 :")]),t._l(t.cc,(function(e,i){return[a("el-autocomplete",{staticStyle:{position:"relative",left:"30px"},attrs:{"fetch-suggestions":t.querySearch_cc,placeholder:"請輸入副本"},model:{value:t.cc[i],callback:function(e){t.$set(t.cc,i,e)},expression:"cc[index]"}}),a("el-button",{staticStyle:{color:"#F56C6C",position:"relative",bottom:"18px",left:"21px"},attrs:{type:"text",icon:"el-icon-error"},on:{click:function(e){return t.remove_cc(i)}}})]})),a("el-button",{staticStyle:{position:"relative",left:"10px"},attrs:{type:"text",icon:"el-icon-circle-plus"},on:{click:function(e){return t.add_cc()}}})],2),a("div",{staticStyle:{position:"relative",left:"150px",top:"40px"},attrs:{align:"left"}},[a("span",[t._v("* 內文 :")]),a("el-input",{staticStyle:{left:"30px",width:"400px"},attrs:{type:"textarea",autosize:{minRows:1,maxRows:3},name:"sender",required:""},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),a("div",{staticStyle:{position:"relative",left:"150px",top:"60px"},attrs:{align:"left"}},[a("span",[t._v("* 附件 :")]),a("el-button",{attrs:{type:"text"},on:{click:t.download}},[t._v("license-application.xlsx")])],1),a("div",{staticStyle:{position:"absolute",right:"350px",top:"60px"}},[a("span",[t._v("檔案上傳區")]),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"111","http-request":t.customUpload,"on-remove":t.handleRemove,"on-exceed":t.handleExceed,"on-change":t.handleChange,"before-upload":t.handleUpload,accept:".png,.jpg,.docx,.xlsx,.xls,.pdf",multiple:"",limit:5,"file-list":t.fileList}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("檔案類型限定:jpg,png,docx,xlsx,pdf")])])],1),a("div",{staticStyle:{position:"relative",top:"50px"}},[a("el-button",{staticStyle:{width:"150px",height:"50px",display:"inline"},attrs:{round:"true",size:"medium"},on:{click:t.cancel}},[t._v("返回主畫面")]),a("el-button",{staticStyle:{width:"150px",height:"50px",display:"inline"},attrs:{round:"true",size:"medium"},on:{click:t.submit}},[t._v("送出申請")])],1)]),a("div",[a("div",{staticStyle:{position:"relative",top:"80px"},attrs:{align:"center"}},[a("el-table",{staticStyle:{width:"95%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"",align:"center",prop:"",label:"編輯",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[a("el-row",[t.showEdit[o]?a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-check",circle:""},nativeOn:{click:function(e){return t.handleCheck(o,i)}}}):t._e(),t.showEdit[o]?a("el-button",{staticStyle:{position:"relative",right:"5px"},attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},nativeOn:{click:function(e){return t.handelRestore(o,i)}}}):t._e(),t.showEdit[o]||"刪除"==i.operator?t._e():a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},nativeOn:{click:function(e){return t.handleEdit(o,i)}}}),t.showEdit[o]?t._e():a("el-button",{staticStyle:{position:"relative",right:"5px"},attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.deleterow(i)}}}),a("el-popover",{ref:"popover",attrs:{width:"950px",trigger:"hover",placement:"top"}},[a("el-table",{attrs:{"cell-class-name":t.cell_color,data:t.compare_Data}},[a("el-table-column",{attrs:{width:"100px",prop:"customer",label:"客戶"}}),a("el-table-column",{attrs:{width:"70px",prop:"sn",label:"KeyID"}}),a("el-table-column",{attrs:{width:"140px",prop:"func_uid",label:"產品名稱"}}),a("el-table-column",{attrs:{width:"70px",prop:"version",label:"版本"}}),a("el-table-column",{attrs:{width:"70px",prop:"type",label:"類型"}}),a("el-table-column",{attrs:{width:"70px",prop:"count",label:"數量"}}),a("el-table-column",{attrs:{width:"130px",prop:"expiration",label:"到期日期"}}),a("el-table-column",{attrs:{width:"70px",prop:"region",label:"地區"}}),a("el-table-column",{attrs:{width:"140px",prop:"comment",label:"備註"}}),a("el-table-column",{attrs:{width:"150px",prop:"contact",label:"聯絡人"}})],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"修改"==i.operator,expression:"row.operator=='修改'"}],attrs:{slot:"reference",type:"info ",size:"mini",icon:"el-icon-view",circle:""},nativeOn:{mouseenter:function(e){return t.compare_row(i,o)}},slot:"reference"})],1)],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"operator",label:"操作",width:"80"}}),a("el-table-column",{attrs:{align:"center",prop:"customer",label:"客戶",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("span",[t._v(t._s(i.customer))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"sn",label:"KeyID",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("span",[t._v(t._s(i.sn))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"func_uid",label:"產品名稱",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("span",[t._v(t._s(i.func_uid))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"version",label:"版本",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"70px"},attrs:{type:"text",name:"version"},model:{value:i.version,callback:function(e){t.$set(i,"version",e)},expression:"row.version"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.version))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"type",label:"類型",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"60px"},attrs:{type:"text",name:"type"},model:{value:i.type,callback:function(e){t.$set(i,"type",e)},expression:"row.type"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.type))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"count",label:"數量",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"50px"},attrs:{type:"text",name:"count"},model:{value:i.count,callback:function(e){t.$set(i,"count",e)},expression:"row.count"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.count))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"expiration",label:"到期日期",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-date-picker",{staticStyle:{width:"140px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",name:"expiration"},model:{value:i.expiration,callback:function(e){t.$set(i,"expiration",e)},expression:"row.expiration"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.expiration))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"region",label:"地區",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"60px"},attrs:{type:"text",name:"region"},model:{value:i.region,callback:function(e){t.$set(i,"region",e)},expression:"row.region"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.region))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"comment",label:"備註",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"110px"},attrs:{type:"text",name:"comment"},model:{value:i.comment,callback:function(e){t.$set(i,"comment",e)},expression:"row.comment"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.comment))])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"contact",label:"聯絡人",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"80px"},attrs:{type:"text",name:"contact"},model:{value:i.contact,callback:function(e){t.$set(i,"contact",e)},expression:"row.contact"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.contact))])]}}])})],1)],1)])],1)},H=[];function Q(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=W(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function W(t,e){if(t){if("string"===typeof t)return X(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?X(t,e):void 0}}function X(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var Y={components:{Loading:y},name:"handle",data:function(){return{user:[],tableData:[],origin_edit:[],all_Data:[],nofilter_info_Data:[],info_data:[],compare_Data:[],compare_edit_Data:[],showEdit:[],cc:[],text:"",fileList:[],fileList_check:[],isLoading:!0,cc_opt:[],unuser_map:new Map}},created:function(){var t=this;this.axios.get("/get_product_groups_info_data",{headers:{"Content-Encoding":"gzip"}}).then((function(e){t.user=JSON.parse(sessionStorage.getItem("user")),t.info_data=JSON.parse(JSON.stringify(e.data))["info_data"],t.all_Data=JSON.parse(t.$route.query.all_Data);var a,i=new Map,o=new Map,r=new Map,n=JSON.parse(JSON.stringify(e.data))["sn_dict"],l=Q(t.all_Data["product_data"]);try{for(l.s();!(a=l.n()).done;){var s=a.value;i.set(s["product_name"],{category_id:s["category_id"],caption:s["caption"]})}}catch(at){l.e(at)}finally{l.f()}var c,u=Q(t.all_Data["option_data"]);try{for(u.s();!(c=u.n()).done;){var p=c.value;o.set(p["option_name"],{category_id:i.get(p["product_name"])["category_id"],product_name:p["product_name"],caption:p["caption"]})}}catch(at){u.e(at)}finally{u.f()}t.all_Data["module_data"].forEach((function(t){return r.set(t["mod_uid"],t["caption"])}));var d,f=new Set,_=Q(t.all_Data["sn_data"]);try{for(_.s();!(d=_.n()).done;){var h,m=d.value,g=Q(m["user"].split(","));try{for(g.s();!(h=g.n()).done;){var v=h.value;f.add(v)}}catch(at){g.e(at)}finally{g.f()}}}catch(at){_.e(at)}finally{_.f()}f.forEach((function(e){return t.cc_opt.push({value:e,label:e})}));var y,b=JSON.parse(JSON.stringify(t.info_data)),w=0,x=Q(t.info_data);try{for(x.s();!(y=x.n()).done;){var S=y.value;void 0!=n[S["sn"]]&&(""!=t.all_Data["customer_data"][n[S["sn"]]["sn_id"]-1]["site"]?b[w]=Object.assign(b[w],{customer:t.all_Data["customer_data"][n[S["sn"]]["sn_id"]-1]["name"]+"|"+t.all_Data["customer_data"][n[S["sn"]]["sn_id"]-1]["site"],user:n[S["sn"]]["user"],info:[n[S["sn"]]["note1"],n[S["sn"]]["note2"],n[S["sn"]]["note3"],n[S["sn"]]["note4"],n[S["sn"]]["note5"]]}):b[w]=Object.assign(b[w],{customer:t.all_Data["customer_data"][n[S["sn"]]["sn_id"]-1]["name"],user:n[S["sn"]]["user"],info:[n[S["sn"]]["note1"],n[S["sn"]]["note2"],n[S["sn"]]["note3"],n[S["sn"]]["note4"],n[S["sn"]]["note5"]]}),""!=n[S["sn"]]["region"]?b[w]=Object.assign(b[w],{region:t.all_Data["region_data"][parseInt(n[S["sn"]]["region"],10)-1]["name"]}):b[w]=Object.assign(b[w],{region:""})),void 0!=o.get(S["func_uid"])?(b[w]=Object.assign(b[w],{caption:o.get(S["func_uid"])["category_id"]}),b[w]["func_uid"]=o.get(S["func_uid"])["caption"]+"("+o.get(S["func_uid"])["product_name"]+")"):void 0!=i.get(S["func_uid"])&&(b[w]=Object.assign(b[w],{caption:i.get(S["func_uid"])["category_id"]}),b[w]["func_uid"]=i.get(S["func_uid"])["caption"]),void 0!=r.get(S["type"])&&(b[w]["type"]=r.get(S["type"])),w++}}catch(at){x.e(at)}finally{x.f()}t.nofilter_info_Data=JSON.parse(JSON.stringify(b));var k=new Map;t.all_Data["user_data"].forEach((function(t){return k.set(t["email"],t["user"])})),t.all_Data["user_data"].forEach((function(e){return t.unuser_map.set(e["user"],e["email"])}));var O,D=Q(t.all_Data["edit_data"]);try{for(D.s();!(O=D.n()).done;){var $=O.value;$["user"]==t.user[0]&&(t.tableData=JSON.parse($["data"]))}}catch(at){D.e(at)}finally{D.f()}var N,J=Q(t.tableData);try{for(J.s();!(N=J.n()).done;){var z=N.value;void 0!=k.get(z["contact"])&&(z["contact"]=k.get(z["contact"]))}}catch(at){J.e(at)}finally{J.f()}var C,q=Q(t.tableData);try{for(q.s();!(C=q.n()).done;){var I=C.value;if(I["contact"].split(",").length>1){I["contact"]=I["contact"].split(",");for(var j=0;j<I["contact"].length;j++)void 0!=k.get(I["contact"][j])&&(I["contact"][j]=k.get(I["contact"][j]));I["contact"]=I["contact"].join(",")}}}catch(at){q.e(at)}finally{q.f()}var A,E=new Set,T=Q(t.tableData);try{for(T.s();!(A=T.n()).done;){var M=A.value;if(-1!=M["contact"].indexOf(",")){var V,F=Q(M["contact"].split(","));try{for(F.s();!(V=F.n()).done;){var L=V.value;E.add(L)}}catch(at){F.e(at)}finally{F.f()}}else E.add(M["contact"])}}catch(at){T.e(at)}finally{T.f()}var K,B=Q(E);try{for(B.s();!(K=B.n()).done;){var R=K.value;t.unuser_map.has(R)?t.cc.push(t.unuser_map.get(R)):t.cc.push(R)}}catch(at){B.e(at)}finally{B.f()}var P,U=Q(t.nofilter_info_Data);try{for(U.s();!(P=U.n()).done;){var G,H=P.value,W=Q(t.all_Data["user_data"]);try{for(W.s();!(G=W.n()).done;){G.value;void 0!=k.get(H["contact"])&&(H["contact"]=k.get(H["contact"]))}}catch(at){W.e(at)}finally{W.f()}}}catch(at){U.e(at)}finally{U.f()}var X,Y=Q(t.nofilter_info_Data);try{for(Y.s();!(X=Y.n()).done;){var Z=X.value;if(Z["contact"].split(",").length>1){Z["contact"]=Z["contact"].split(",");for(var tt=0;tt<Z["contact"].length;tt++)void 0!=k.get(Z["contact"][tt])&&(Z["contact"][tt]=k.get(Z["contact"][tt]));Z["contact"]=Z["contact"].join(",")}}}catch(at){Y.e(at)}finally{Y.f()}t.axios.get("/handle_edit",{params:{Newrow:JSON.stringify(t.tableData),user:JSON.stringify(t.user)}}).then((function(t){t.data})),t.origin_edit=JSON.parse(JSON.stringify(t.tableData));for(var et=0;et<t.origin_edit.length;et++)t.showEdit.push(!1);t.isLoading=!1}))},mounted:function(){var t=this;window.onbeforeunload=function(e){if("handle"==t.$route.name){var a,i=[],o=Q(t.fileList);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.push(r.name)}}catch(n){o.e(n)}finally{o.f()}t.axios.get("/F5_handle",{params:{upload_file_name:JSON.stringify(i)}})}else window.onbeforeunload=null}},methods:{add_cc:function(){this.cc.push("")},remove_cc:function(t){this.cc.splice(t,1)},handleUpload:function(t){var e,a=0,i=Q(this.fileList_check);try{for(i.s();!(e=i.n()).done;){var o=e.value;a+=o.size}}catch(n){i.e(n)}finally{i.f()}var r=a/1024/1024<20;if(!r)return this.$message.error("上傳總容量不得高於20MB!"),r},handleChange:function(t,e){this.fileList_check=e;var a,i=0,o=Q(e);try{for(o.s();!(a=o.n()).done;){var r=a.value;i+=r.size}}catch(s){o.e(s)}finally{o.f()}var n=i/1024/1024<20;if(n){this.fileList=e;var l=new FormData;l.append("file",t.raw),l.append("name",t.name),l.append("type",t.raw.type);this.axios.create({withCredentials:!0});this.axios.post("/upload_on_local",l)}},customUpload:function(t){},handleExceed:function(t,e){this.$message.warning("限制上傳5個文件以下")},handleRemove:function(t,e){this.fileList=e,this.axios.get("/delete_upload_local",{params:{name:t.name}})},tranfer_xlsx:function(t){if(t){var e=window.URL.createObjectURL(new Blob([t])),a=document.createElement("a");a.style.display="none",a.href=e,a.setAttribute("download","license-application.xlsx"),document.body.appendChild(a),a.click()}},download:function(){var t=this;this.axios.get("/download",{params:{user:JSON.stringify(this.user)},responseType:"blob"}).then((function(e){t.tranfer_xlsx(e.data)}))},submit:function(){var t=this;this.$confirm("是否送出申請?","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){for(var e=0;e<t.cc.length;e++)""==t.cc[e]&&(t.cc.splice(e,1),e--);if(0!=t.cc.length)for(var a in t.cc)if(-1==t.cc[a].indexOf("@"))return void t.$message({message:"副本請填入正確email格式",type:"error"});var i,o=[],r=Q(t.fileList);try{for(r.s();!(i=r.n()).done;){var n=i.value;o.push(n.name)}}catch(l){r.e(l)}finally{r.f()}t.axios.post("/handle_send",{origin_data:t.nofilter_info_Data,edit_data:t.tableData,content:{user:t.user[0],cc:t.cc.join(","),text:t.text,reply:""},upload_file_name:o}).then((function(e){"郵件傳送成功!"==e.data?(t.$message({showClose:!0,message:"郵件傳送成功!",type:"success"}),t.$router.push({name:"Show_All"})):t.$message({showClose:!0,message:"郵件傳送失敗!",type:"error"})}))})).catch((function(){t.$message({type:"info",message:"已取消送出申請"})}))},handleEdit:function(t,e){this.$set(this.showEdit,t,!0)},handleCheck:function(t,e){this.axios.get("/handle_edit",{params:{Newrow:JSON.stringify(this.tableData),user:JSON.stringify(this.user)}}).then((function(t){t.data})),this.origin_edit[t]=JSON.parse(JSON.stringify(this.tableData[t])),this.$set(this.showEdit,t,!1)},handelRestore:function(t,e){this.tableData[t]=JSON.parse(JSON.stringify(this.origin_edit[t])),this.$set(this.showEdit,t,!1)},cancel:function(){var t,e=[],a=Q(this.fileList);try{for(a.s();!(t=a.n()).done;){var i=t.value;e.push(i.name)}}catch(o){a.e(o)}finally{a.f()}this.axios.get("/handle_back_ShowAll",{params:{user:JSON.stringify(this.user),upload_file_name:JSON.stringify(e)}}),this.$router.push({name:"Show_All"})},deleterow:function(t){for(var e=0;e<this.origin_edit.length;e++)JSON.stringify(this.origin_edit[e])==JSON.stringify(t)&&(this.origin_edit.splice(e,1),this.showEdit.splice(e,1));this.tableData=JSON.parse(JSON.stringify(this.origin_edit)),this.cc=[];var a,i=new Set,o=Q(this.tableData);try{for(o.s();!(a=o.n()).done;){var r=a.value;if(-1!=r["contact"].indexOf(",")){var n,l=Q(r["contact"].split(","));try{for(l.s();!(n=l.n()).done;){var s=n.value;i.add(s)}}catch(d){l.e(d)}finally{l.f()}}else i.add(r["contact"])}}catch(d){o.e(d)}finally{o.f()}var c,u=Q(i);try{for(u.s();!(c=u.n()).done;){var p=c.value;this.unuser_map.has(p)?this.cc.push(this.unuser_map.get(p)):this.cc.push(p)}}catch(d){u.e(d)}finally{u.f()}this.axios.get("/handle_delete",{params:{Row:JSON.stringify(this.tableData),user:JSON.stringify(this.user)}}).then((function(t){t.data}))},cell_color:function(t){var e=t.row,a=t.column;t.rowIndex,t.columnIndex;return"客戶"==a.label&&e.customer!=this.compare_edit_Data[0].customer||"KeyID"==a.label&&e.sn!=this.compare_edit_Data[0].sn||"產品名稱"==a.label&&e.func_uid!=this.compare_edit_Data[0].func_uid||"版本"==a.label&&e.version!=this.compare_edit_Data[0].version||"類型"==a.label&&e.type!=this.compare_edit_Data[0].type||"數量"==a.label&&e.count!=this.compare_edit_Data[0].count||"到期日期"==a.label&&e.expiration!=this.compare_edit_Data[0].expiration||"地區"==a.label&&e.region!=this.compare_edit_Data[0].region||"備註"==a.label&&e.comment!=this.compare_edit_Data[0].comment||"聯絡人"==a.label&&e.contact!=this.compare_edit_Data[0].contact?"warning-row":void 0},compare_row:function(t,e){this.compare_Data.length=0,this.compare_edit_Data.length=0;var a,i=Q(this.nofilter_info_Data);try{for(i.s();!(a=i.n()).done;){var o=a.value;JSON.stringify(o["info_id"])==JSON.stringify(t["info_id"])&&(this.compare_Data.push(o),this.compare_edit_Data.push(t))}}catch(r){i.e(r)}finally{i.f()}},querySearch_cc:function(t,e){var a=t?this.cc_opt.filter(this.createFilter(t)):this.cc_opt;0==a.length&&(a.push({value:t+"@eastek.com.cn",label:t+"@eastek.com.cn"}),a.push({value:t+"@eastek.com.tw",label:t+"@eastek.com.tw"})),e(a)},createFilter:function(t){return function(e){return-1!=String(e.value).toLowerCase().indexOf(String(t).toLowerCase())}}}},Z=Y,tt=(a("1318"),Object(s["a"])(Z,G,H,!1,null,null,null)),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-link",{staticStyle:{position:"relative",left:"280px",bottom:"50px"},attrs:{type:"success",icon:"el-icon-s-custom"}},[t._v(t._s(t.user[0]))]),a("div",{staticStyle:{position:"relative",top:"50px"},attrs:{align:"center"}},[a("el-table",{staticStyle:{width:"95%"},attrs:{data:t.app_Data}},[a("el-table-column",{attrs:{align:"left",prop:"check",width:"55"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[a("el-checkbox",{attrs:{disabled:t.disabled_checkbox(i)},on:{change:function(e){return t.click_checkbox(t.check[o],o)}},model:{value:t.check[o],callback:function(e){t.$set(t.check,o,e)},expression:"check[$index]"}})]}}])}),a("el-table-column",{attrs:{type:"","header-align":"center",prop:"validator","render-header":t.label_for_validator,width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[t._v("\n        審核群組:\n        "),t._l(i.validator["verify_group"],(function(e,o){return[1==i.validator["verify_check"]["verify_group"][o]?a("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(e))]):t._e(),0==i.validator["verify_check"]["verify_group"][o]?a("span",{staticStyle:{color:"#FF7575"}},[t._v(t._s(e))]):t._e(),o+1!=i.validator["verify_group"].length?a("span",[t._v(",")]):t._e()]})),a("br"),t._v("審核人:\n        "),t._l(i.validator["verify_user"],(function(e,o){return[1==i.validator["verify_check"]["verify_user"][o]?a("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(e))]):t._e(),0==i.validator["verify_check"]["verify_user"][o]?a("span",{staticStyle:{color:"#FF7575"}},[t._v(t._s(e))]):t._e(),o+1!=i.validator["verify_user"].length?a("span",[t._v(",")]):t._e()]})),a("br"),t._v("審核人數:\n        "),i.validator["verify_check"]["verify_num"]>=i.validator["verify_num"]?a("span",{staticStyle:{color:"#67C23A"}},[t._v(t._s(i.validator["verify_num"]))]):t._e(),i.validator["verify_check"]["verify_num"]<i.validator["verify_num"]?a("span",{staticStyle:{color:"#FF7575"}},[t._v(t._s(i.validator["verify_num"]))]):t._e()]}}])}),a("el-table-column",{attrs:{type:"",align:"center",prop:"id",label:"申請編號",width:"100"}}),a("el-table-column",{attrs:{type:"",align:"center",prop:"fake_id",label:"順序編號",width:"100"}}),a("el-table-column",{attrs:{type:"",align:"center",prop:"verify_status",label:"審核狀態",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("span",{directives:[{name:"show",rawName:"v-show",value:1==i.verify_status,expression:"row.verify_status==1"}],staticStyle:{color:"#67C23A"}},[t._v("已審核")]),a("span",{directives:[{name:"show",rawName:"v-show",value:0==i.verify_status,expression:"row.verify_status==0"}],staticStyle:{color:"#FF7575"}},[t._v("尚未審核")])]}}])}),a("el-table-column",{attrs:{type:"",align:"center",prop:"applicant",label:"申請人",width:"100"}}),a("el-table-column",{attrs:{type:"",align:"center",prop:"date",label:"申請日期",width:"180"}}),a("el-table-column",{attrs:{type:"",align:"center",prop:"",label:"編輯",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.open_dialog(i,o)}}},[t._v("查看資料")]),a("el-dialog",{attrs:{width:"1500px",title:"申請內容",visible:t.dialogTableVisible[o]},on:{"update:visible":function(e){return t.$set(t.dialogTableVisible,o,e)}}},[a("span",{staticStyle:{position:"relative",left:"50px",bottom:"100px"}},[t._v(" 申請人 :")]),a("el-input",{staticClass:"input_no_border",staticStyle:{position:"relative",bottom:"103px",left:"52px",width:"150px"},attrs:{type:"textarea",autosize:{minRows:1,maxRows:1},name:"sender",readonly:""},model:{value:t.content["user"],callback:function(e){t.$set(t.content,"user",e)},expression:"content['user']"}}),a("span",{staticStyle:{position:"relative",bottom:"75px",right:"168px"}},[t._v(" 申請內文 :")]),a("el-input",{staticClass:"input_no_border",staticStyle:{position:"relative",bottom:"15px",right:"165px",width:"250px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},name:"sender",readonly:""},model:{value:t.content["text"],callback:function(e){t.$set(t.content,"text",e)},expression:"content['text']"}}),a("span",{staticStyle:{position:"relative",bottom:"75px",right:"155px"}},[t._v(" 審核者回覆 :")]),a("el-input",{staticStyle:{position:"relative",bottom:"15px",right:"140px",width:"400px"},attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},name:"sender"},model:{value:t.content["reply"],callback:function(e){t.$set(t.content,"reply",e)},expression:"content['reply']"}}),a("span",{staticStyle:{position:"relative",right:"110px",bottom:"100px"}},[t._v(" 附件下載 :")]),a("el-button",{staticStyle:{position:"relative",right:"90px",bottom:"100px"},attrs:{type:"text"},on:{click:function(e){return t.download_check(i,o)}}},[t._v("license-application.xlsx")]),a("span",{staticStyle:{position:"relative",bottom:"75px",right:"295px"}},[t._v(" 副本 :")]),t._l(t.cc,(function(e,i){return[a("el-autocomplete",{style:t.cc_location(i,"input"),attrs:{"fetch-suggestions":t.querySearch_cc,placeholder:"請輸入副本"},model:{value:t.cc[i],callback:function(e){t.$set(t.cc,i,e)},expression:"cc[index]"}}),a("el-button",{directives:[{name:"show",rawName:"v-show",value:0!=i,expression:"index != 0"}],style:t.cc_location(i,"button"),attrs:{type:"text",icon:"el-icon-error"},on:{click:function(e){return t.remove_cc(i)}}}),a("br"),a("br")]})),a("el-button",{staticStyle:{"font-size":"15px",position:"absolute",top:"80px",right:"160px"},attrs:{type:"text",icon:"el-icon-circle-plus"},on:{click:function(e){return t.add_cc()}}}),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{align:"center",width:"120px",prop:"customer",label:"審核"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[a("el-radio-group",{attrs:{fill:"√"==t.radio[o]?"#67C23A":"#F56C6C",size:"mini"},on:{change:function(e){return t.verify_change(i,o)}},model:{value:t.radio[o],callback:function(e){t.$set(t.radio,o,e)},expression:"radio[$index]"}},[a("el-radio-button",{attrs:{label:"√"}}),a("el-radio-button",{attrs:{label:"×"}})],1)]}}],null,!0)}),a("el-table-column",{attrs:{type:"",align:"center",prop:"",label:"編輯",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[a("el-row",[t.showEdit[o]?a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-check",circle:""},nativeOn:{click:function(e){return t.handleCheck(o,i)}}}):t._e(),t.showEdit[o]?a("el-button",{staticStyle:{position:"relative",right:"5px"},attrs:{type:"danger",size:"mini",icon:"el-icon-close",circle:""},nativeOn:{click:function(e){return t.handelRestore(o,i)}}}):t._e(),t.showEdit[o]?t._e():a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit",circle:""},nativeOn:{click:function(e){return t.handleEdit(o,i)}}}),a("el-popover",{ref:"popover",attrs:{width:"950px",trigger:"hover",placement:"top"}},[a("el-table",{attrs:{"cell-class-name":t.cell_color,data:t.compare_Data}},[a("el-table-column",{attrs:{width:"100px",prop:"customer",label:"客戶"}}),a("el-table-column",{attrs:{width:"130px",prop:"issued",label:"更新日期"}}),a("el-table-column",{attrs:{width:"70px",prop:"sn",label:"KeyID"}}),a("el-table-column",{attrs:{width:"140px",prop:"func_uid",label:"產品名稱"}}),a("el-table-column",{attrs:{width:"70px",prop:"version",label:"版本"}}),a("el-table-column",{attrs:{width:"70px",prop:"type",label:"類型"}}),a("el-table-column",{attrs:{width:"70px",prop:"count",label:"數量"}}),a("el-table-column",{attrs:{width:"130px",prop:"expiration",label:"到期日期"}}),a("el-table-column",{attrs:{width:"70px",prop:"region",label:"地區"}}),a("el-table-column",{attrs:{width:"140px",prop:"comment",label:"備註"}}),a("el-table-column",{attrs:{width:"150px",prop:"contact",label:"聯絡人"}})],1),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"修改"==i.operator,expression:"row.operator=='修改'"}],attrs:{slot:"reference",type:"info ",size:"mini",icon:"el-icon-view",circle:""},nativeOn:{mouseenter:function(e){return t.compare_row(i,o)}},slot:"reference"})],1)],1)]}}],null,!0)}),a("el-table-column",{attrs:{width:"100px",prop:"operator",label:"操作"}}),a("el-table-column",{attrs:{align:"center",width:"140px",prop:"customer",label:"客戶"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-autocomplete",{staticStyle:{width:"110px"},attrs:{size:"small",name:"customer","fetch-suggestions":t.querySearch_customer},model:{value:i.customer,callback:function(e){t.$set(i,"customer",e)},expression:"row.customer"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.customer))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",width:"165px",prop:"issued",label:"更新日期"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-date-picker",{staticStyle:{width:"135px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",name:"issued"},model:{value:i.issued,callback:function(e){t.$set(i,"issued",e)},expression:"row.issued"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.issued))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",width:"120px",prop:"sn",label:"KeyID"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"90px"},attrs:{type:"text",name:"sn"},model:{value:i.sn,callback:function(e){t.$set(i,"sn",e)},expression:"row.sn"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.sn))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",width:"210px",prop:"func_uid",label:"產品名稱"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-autocomplete",{staticStyle:{width:"180px"},attrs:{size:"small",name:"func_uid","fetch-suggestions":t.querySearch_func_uid},model:{value:i.func_uid,callback:function(e){t.$set(i,"func_uid",e)},expression:"row.func_uid"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.func_uid))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",width:"100px",prop:"version",label:"版本"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"70px"},attrs:{type:"text",name:"version"},model:{value:i.version,callback:function(e){t.$set(i,"version",e)},expression:"row.version"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.version))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",width:"110px",prop:"type",label:"類型"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-autocomplete",{staticStyle:{width:"80px"},attrs:{size:"small",name:"type","fetch-suggestions":t.querySearch_type},model:{value:i.type,callback:function(e){t.$set(i,"type",e)},expression:"row.type"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.type))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",width:"80px",prop:"count",label:"數量"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"50px"},attrs:{type:"text",name:"count"},model:{value:i.count,callback:function(e){t.$set(i,"count",e)},expression:"row.count"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.count))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",width:"165px",prop:"expiration",label:"到期日期"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-date-picker",{staticStyle:{width:"135px"},attrs:{"value-format":"yyyy-MM-dd",type:"date",name:"expiration"},model:{value:i.expiration,callback:function(e){t.$set(i,"expiration",e)},expression:"row.expiration"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.expiration))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",width:"110px",prop:"region",label:"地區"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-autocomplete",{staticStyle:{width:"80px"},attrs:{size:"small",name:"region","fetch-suggestions":t.querySearch_region},model:{value:i.region,callback:function(e){t.$set(i,"region",e)},expression:"row.region"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.region))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",width:"140px",prop:"comment",label:"備註"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"110px"},attrs:{type:"text",name:"comment"},model:{value:i.comment,callback:function(e){t.$set(i,"comment",e)},expression:"row.comment"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.comment))])]}}],null,!0)}),a("el-table-column",{attrs:{align:"center",width:"100px",prop:"contact",label:"聯絡人"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[t.showEdit[o]?a("el-input",{staticStyle:{width:"70px"},attrs:{type:"text",name:"contact"},model:{value:i.contact,callback:function(e){t.$set(i,"contact",e)},expression:"row.contact"}}):t._e(),t.showEdit[o]?t._e():a("span",[t._v(t._s(i.contact))])]}}],null,!0)})],1),a("div",[a("el-button",{staticStyle:{position:"relative",top:"5px",width:"150px",height:"50px"},attrs:{round:"true",size:"medium"},on:{click:function(e){return t.dialog_cancel(i,o)}}},[t._v("取消")]),a("el-button",{staticStyle:{position:"relative",top:"5px",width:"150px",height:"50px"},attrs:{round:"true",size:"medium"},on:{click:function(e){return t.dialog_check(i,o)}}},[t._v("確認")])],1)],2)]}}])})],1)],1),a("div",{staticStyle:{position:"relative",top:"50px"}},[a("el-button",{staticStyle:{position:"relative",top:"5px",width:"150px",height:"50px"},attrs:{round:"true"},on:{click:function(e){return t.submit()}}},[t._v("送出")])],1)],1)},it=[];function ot(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=rt(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function rt(t,e){if(t){if("string"===typeof t)return nt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?nt(t,e):void 0}}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var lt={name:"check",data:function(){return{origin_tableData:[],tableData:[],all_Data:[],app_Data:[],dialogTableVisible:[],showEdit:[],nofilter_info_Data:[],compare_Data:[],compare_edit_Data:[],radio:[],content:{},user:[],customer_opt:[],region_opt:[],func_uid_opt:[],type_opt:[{label:"正式",value:"正式"},{label:"測試",value:"測試"},{label:"出貨",value:"出貨"},{label:"永久",value:"永久"}],cc:[""],cc_opt:[],check:[]}},created:function(){var t=this;this.axios.get("/check/"+this.$route.params.verifyname,{headers:{"Content-Encoding":"gzip"}}).then((function(e){t.user=JSON.parse(sessionStorage.getItem("user")),t.all_data=JSON.parse(JSON.stringify(e.data)),t.app_Data=JSON.parse(JSON.stringify(e.data["application_data"]));var a,i=ot(t.app_Data);try{for(i.s();!(a=i.n()).done;){a.value;t.check.push(!1)}}catch(st){i.e(st)}finally{i.f()}var o,r=new Map,n=ot(t.all_data["module_data"]);try{for(n.s();!(o=n.n()).done;){var l=o.value;t.func_uid_opt.push({value:l["caption"],label:l["caption"]}),r.set(l["mod_uid"],l["caption"])}}catch(st){n.e(st)}finally{n.f()}var s,c=ot(t.all_data["region_data"]);try{for(c.s();!(s=c.n()).done;){var u=s.value;t.region_opt.push({value:u["name"],label:u["name"]})}}catch(st){c.e(st)}finally{c.f()}var p,d=new Set,f=ot(t.all_data["sn_data"]);try{for(f.s();!(p=f.n()).done;){var _,h=p.value,m=ot(h["user"].split(","));try{for(m.s();!(_=m.n()).done;){var g=_.value;d.add(g)}}catch(st){m.e(st)}finally{m.f()}}}catch(st){f.e(st)}finally{f.f()}var v,y=ot(d);try{for(y.s();!(v=y.n()).done;){var b=v.value;t.cc_opt.push({value:b,label:b})}}catch(st){y.e(st)}finally{y.f()}var w,x=ot(t.all_data["customer_data"]);try{for(x.s();!(w=x.n()).done;){var S=w.value;t.customer_opt.push({value:S["name"]+"|"+S["site"],label:S["name"]+"|"+S["site"]})}}catch(st){x.e(st)}finally{x.f()}var k,O=1,D=ot(t.app_Data);try{for(D.s();!(k=D.n()).done;){var $=k.value;$=Object.assign($,{fake_id:O,verify_status:1,check:!1}),O++}}catch(st){D.e(st)}finally{D.f()}var N,J=ot(t.app_Data);try{for(J.s();!(N=J.n()).done;){var z=N.value,C=0;z["data"]=JSON.parse(z["data"]),z["validator"]=JSON.parse(z["validator"]);var q,I=ot(z["data"]);try{for(I.s();!(q=I.n()).done;){var j=q.value;void 0==j.verify&&void 0==j.reason&&(j=Object.assign(j,{verify:"",reason:null}),C=1),""==j.verify&&(C=1)}}catch(st){I.e(st)}finally{I.f()}1==C&&(z["verify_status"]=0),z["data"]=JSON.stringify(z["data"])}}catch(st){J.e(st)}finally{J.f()}for(O=0;O<t.app_Data.length;O++)t.dialogTableVisible.push(!1);var A,E=JSON.parse(JSON.stringify(t.all_data["info_data"])),T=(O=0,e.data["sn_dict"]),M=new Map,V=new Map,F=ot(e.data["product_data"]);try{for(F.s();!(A=F.n()).done;){var L=A.value;M.set(L["product_name"],{category_id:L["category_id"],caption:L["caption"]})}}catch(st){F.e(st)}finally{F.f()}var K,B=ot(e.data["option_data"]);try{for(B.s();!(K=B.n()).done;){var R=K.value;V.set(R["option_name"],{category_id:M.get(R["product_name"])["category_id"],product_name:R["product_name"],caption:R["caption"]})}}catch(st){B.e(st)}finally{B.f()}var P,U=ot(t.all_data["info_data"]);try{for(U.s();!(P=U.n()).done;){var G=P.value;void 0!=T[G["sn"]]&&(""!=e.data["customer_data"][T[G["sn"]]["sn_id"]-1]["site"]?E[O]=Object.assign(E[O],{customer:t.all_data["customer_data"][T[G["sn"]]["sn_id"]-1]["name"]+"|"+t.all_data["customer_data"][T[G["sn"]]["sn_id"]-1]["site"],user:T[G["sn"]]["user"],info:[T[G["sn"]]["sn_id"]["note1"],T[G["sn"]]["sn_id"]["note2"],T[G["sn"]]["sn_id"]["note3"],T[G["sn"]]["sn_id"]["note4"],T[G["sn"]]["sn_id"]["note5"]]}):E[O]=Object.assign(E[O],{customer:t.all_data["customer_data"][T[G["sn"]]["sn_id"]-1]["name"],user:T[G["sn"]]["user"],info:[T[G["sn"]]["sn_id"]["note1"],T[G["sn"]]["sn_id"]["note2"],T[G["sn"]]["sn_id"]["note3"],T[G["sn"]]["sn_id"]["note4"],T[G["sn"]]["sn_id"]["note5"]]}),""!=T[G["sn"]]["region"]?E[O]=Object.assign(E[O],{region:e.data["region_data"][parseInt(T[G["sn"]]["region"],10)-1]["name"]}):E[O]=Object.assign(E[O],{region:""})),void 0!=V.get(G["func_uid"])?(E[O]=Object.assign(E[O],{caption:V.get(G["func_uid"])["category_id"]}),E[O]["func_uid"]=V.get(G["func_uid"])["caption"]+"("+V.get(G["func_uid"])["product_name"]+")"):void 0!=M.get(G["func_uid"])&&(E[O]=Object.assign(E[O],{caption:M.get(G["func_uid"])["category_id"]}),E[O]["func_uid"]=M.get(G["func_uid"])["caption"]),void 0!=r.get(G["type"])&&(E[O]["type"]=r.get(G["type"])),O++}}catch(st){U.e(st)}finally{U.f()}t.nofilter_info_Data=JSON.parse(JSON.stringify(E));var H,Q=ot(t.nofilter_info_Data);try{for(Q.s();!(H=Q.n()).done;){var W,X=H.value,Y=ot(t.all_data["user_data"]);try{for(Y.s();!(W=Y.n()).done;){var Z=W.value;X["contact"]==Z["email"]&&(X["contact"]=Z["user"])}}catch(st){Y.e(st)}finally{Y.f()}}}catch(st){Q.e(st)}finally{Q.f()}var tt,et=ot(t.nofilter_info_Data);try{for(et.s();!(tt=et.n()).done;){var at=tt.value;if(at["contact"].split(",").length>1){at["contact"]=at["contact"].split(",");for(var it=0;it<at["contact"].length;it++){var rt,nt=ot(t.all_data["user_data"]);try{for(nt.s();!(rt=nt.n()).done;){var lt=rt.value;at["contact"][it]==lt["email"]&&(at["contact"][it]=lt["user"])}}catch(st){nt.e(st)}finally{nt.f()}}at["contact"]=at["contact"].join()}}}catch(st){et.e(st)}finally{et.f()}}))},methods:{click_checkbox:function(t,e){this.$set(this.app_Data[e],"check",t)},cc_location:function(t,e){if("input"==e){var a=80+45*t;return"width:200px;position:absolute;right:200px;top:"+String(a)+"px"}if("button"==e){a=63+45*t;return"color:#F56C6C;font-size:15px;position:absolute;right:192px;top:"+String(a)+"px"}},add_cc:function(){this.cc.push("")},remove_cc:function(t){this.cc.splice(t,1)},tranfer_xlsx:function(t){if(t){var e=window.URL.createObjectURL(new Blob([t])),a=document.createElement("a");a.style.display="none",a.href=e,a.setAttribute("download","verify-application.xlsx"),document.body.appendChild(a),a.click()}},download_check:function(t,e){var a=this;this.axios({method:"post",url:"/download_check",data:{data:t},responseType:"blob"}).then((function(t){a.tranfer_xlsx(t.data)}))},submit:function(){var t,e=this,a=[],i=ot(this.app_Data);try{for(i.s();!(t=i.n()).done;){var o=t.value;1==o["check"]&&a.push(o)}}catch(r){i.e(r)}finally{i.f()}0!=a.length?this.$confirm("是否確定送出審核?","提示",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){e.axios.post("/check_verify",{verify_Data:a,user:e.user}).then((function(t){e.$message({type:"success",message:"審核成功!"}),e.$router.push({name:"Show_All"})}))})).catch((function(){e.$message({type:"info",message:"已取消送出審核"})})):this.$message({message:"尚未審核任何資料",type:"error"})},verify_change:function(t,e){if(this.$set(this.tableData[e],"verify",this.radio[e]),"×"==this.radio[e]){var a=prompt("請輸入審核原因：\n");t.reason=a}},dialog_check:function(t,e){for(var a=0;a<this.showEdit.length;a++)if(1==this.showEdit[a])return void this.$message({message:"請先將確認修改資料√",type:"error"});this.app_Data[e]["verify_status"]=1,this.app_Data[e]["check"]=!0,this.$set(this.check,e,!0);var i,o=ot(this.tableData);try{for(o.s();!(i=o.n()).done;){var r=i.value;""==r.verify&&(this.app_Data[e]["verify_status"]=0,this.app_Data[e]["check"]=!1,this.$set(this.check,e,!1))}}catch(n){o.e(n)}finally{o.f()}t["data"]=JSON.stringify(this.tableData),this.content["cc"]=this.cc.join(),t["content"]=JSON.stringify(this.content),console.log(this.app_Data[e]),this.$set(this.dialogTableVisible,e,!1),this.axios.post("/dialog_check",{check_data:this.app_Data[e],user:this.user}).then((function(t){location.reload()}))},open_dialog:function(t,e){console.log(JSON.parse(t["data"])),this.tableData=JSON.parse(t["data"]),this.content=JSON.parse(t["content"]),this.cc=this.content["cc"].split(","),this.origin_tableData=JSON.parse(JSON.stringify(this.tableData)),this.dialogTableVisible[e]=!0,this.showEdit.length=0,this.radio.length=0;for(var a=0;a<this.tableData.length;a++)this.showEdit.push(!1),this.radio.push("");var i,o=0,r=ot(this.tableData);try{for(r.s();!(i=r.n()).done;){var n=i.value;this.radio[o]=n.verify,o++}}catch(l){r.e(l)}finally{r.f()}},dialog_cancel:function(t,e){this.$set(this.dialogTableVisible,e,!1),this.cc=[""]},handleEdit:function(t,e){this.$set(this.showEdit,t,!0)},handleCheck:function(t,e){var a,i=0,o=ot(this.nofilter_info_Data);try{for(o.s();!(a=o.n()).done;){var r=a.value;if((this.tableData[t]["sn"]!=this.origin_tableData[t]["sn"]||this.tableData[t]["type"]!=this.origin_tableData[t]["type"]||this.tableData[t]["func_uid"]!=this.origin_tableData[t]["func_uid"])&&this.tableData[t]["sn"]==r["sn"]&&this.tableData[t]["type"]==r["type"]&&this.tableData[t]["func_uid"]==r["func_uid"]){var n="修改資料\nKeyID:"+this.tableData[t]["sn"]+"\n類型:"+this.tableData[t]["type"]+"\n產品名稱:"+this.tableData[t]["func_uid"]+"\n已有重複資料";this.$notify.error({title:"修改通知",message:n,duration:0}),this.tableData[t]=JSON.parse(JSON.stringify(this.origin_tableData[t])),this.$set(this.showEdit,t,!1),i=1}}}catch(l){o.e(l)}finally{o.f()}0==i&&(this.origin_tableData[t]=this.tableData[t],this.$set(this.showEdit,t,!1))},handelRestore:function(t,e){this.tableData[t]=JSON.parse(JSON.stringify(this.origin_tableData[t])),this.$set(this.showEdit,t,!1)},compare_row:function(t,e){var a,i=ot(this.nofilter_info_Data);try{for(i.s();!(a=i.n()).done;){var o=a.value;JSON.stringify(o["info_id"])==JSON.stringify(t["info_id"])&&(console.log(o),this.$set(this.compare_Data,0,o),this.$set(this.compare_edit_Data,0,t))}}catch(r){i.e(r)}finally{i.f()}},cell_color:function(t){var e=t.row,a=t.column;t.rowIndex,t.columnIndex;return"客戶"==a.label&&e.customer!=this.compare_edit_Data[0].customer||"更新日期"==a.label&&e.issued!=this.compare_edit_Data[0].issued||"KeyID"==a.label&&e.sn!=this.compare_edit_Data[0].sn||"產品名稱"==a.label&&e.func_uid!=this.compare_edit_Data[0].func_uid||"版本"==a.label&&e.version!=this.compare_edit_Data[0].version||"類型"==a.label&&e.type!=this.compare_edit_Data[0].type||"數量"==a.label&&e.count!=this.compare_edit_Data[0].count||"到期日期"==a.label&&e.expiration!=this.compare_edit_Data[0].expiration||"地區"==a.label&&e.region!=this.compare_edit_Data[0].region||"備註"==a.label&&e.comment!=this.compare_edit_Data[0].comment||"聯絡人"==a.label&&e.contact!=this.compare_edit_Data[0].contact?"warning-row":void 0},querySearch_customer:function(t,e){var a=t?this.customer_opt.filter(this.createFilter(t)):this.customer_opt;e(a)},querySearch_func_uid:function(t,e){var a=t?this.func_uid_opt.filter(this.createFilter(t)):this.func_uid_opt;e(a)},querySearch_type:function(t,e){var a=t?this.type_opt.filter(this.createFilter(t)):this.type_opt;e(a)},querySearch_region:function(t,e){var a=t?this.region_opt.filter(this.createFilter(t)):this.region_opt;e(a)},querySearch_cc:function(t,e){var a=t?this.cc_opt.filter(this.createFilter(t)):this.cc_opt;0==a.length&&(a.push({value:t+"@eastek.com.cn",label:t+"@eastek.com.cn"}),a.push({value:t+"@eastek.com.tw",label:t+"@eastek.com.tw"})),e(a)},createFilter:function(t){return function(e){return 0===e.value.toLowerCase().indexOf(t.toLowerCase())}},label_for_validator:function(t,e){e.column;return t("span",["審核條件",t("br"),"(",t("span",{style:"color:black;background-color: #ffb7b7"},["紅色"]),"為缺少條件，",t("span",{style:"color:black;background-color:#67C23A"},["綠色"]),"為已滿足條件)"])},disabled_checkbox:function(t){return 0==t.verify_status||(-1!=t.validator["verify_check"]["verify_group"].indexOf(!1)||(-1!=t.validator["verify_check"]["verify_user"].indexOf(!1)||t.validator["verify_check"]["verify_num"]<t.validator["verify_num"]))}}},st=lt,ct=(a("12c6"),Object(s["a"])(st,at,it,!1,null,null,null)),ut=ct.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[t._v("帳號:"),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入帳號(使用者名稱)"},model:{value:t.user[0],callback:function(e){t.$set(t.user,0,e)},expression:"user[0]"}})],1),a("div",[t._v("密碼:"),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入密碼","show-password":""},model:{value:t.user[1],callback:function(e){t.$set(t.user,1,e)},expression:"user[1]"}})],1),a("div",[a("el-button",{staticClass:"menuButton",staticStyle:{width:"100px"},attrs:{type:"primary",plain:""},on:{click:t.login}},[t._v("登入")])],1)])},dt=[],ft={name:"login",data:function(){return{user:["","","",""],dialogVisible:!1}},mounted:function(){var t=this;document.onkeydown=function(e){if("login"==t.$route.name){var a=window.event.keyCode;13==a&&t.login()}}},methods:{login:function(){var t=this;this.axios.get("/login",{params:{user:JSON.stringify(this.user),mode:"login"}}).then((function(e){var a=e.data;"登入成功!"==a.msg?(t.user[2]=a.email,t.$message({message:a.msg,type:"success"}),sessionStorage.setItem("token","ImLogin"),sessionStorage.setItem("user",JSON.stringify(t.user)),sessionStorage.setItem("authority",JSON.stringify(a.authority)),t.$router.push({name:"Show_All"})):(a.msg,t.$message({message:a.msg,type:"error"}))}))}}},_t=ft,ht=(a("9ce0"),Object(s["a"])(_t,pt,dt,!1,null,null,null)),mt=ht.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("Aside")],1)],1)},vt=[],yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("el-aside",{attrs:{width:"210px",height:"700px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.$route.path,router:!0},on:{select:t.route}},[a("el-menu-item",{attrs:{align:"left",index:"admin"}},[a("i",{staticClass:"el-icon-menu"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("首頁")])]),a("el-menu-item",{attrs:{index:"password",align:"left"}},[a("i",{staticClass:"el-icon-key"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("更改密碼")])]),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.user_deter,expression:"user_deter"}],attrs:{index:"2",align:"left"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-user"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("使用者")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{align:"left",index:"user"}},[t._v("使用者")]),a("el-menu-item",{attrs:{align:"left",index:"group"}},[t._v("群組")])],1)],2),a("el-submenu",{directives:[{name:"show",rawName:"v-show",value:t.product_deter,expression:"product_deter"}],attrs:{index:"3",align:"left"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-box"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("產品")])]),a("el-menu-item",{attrs:{index:"product",align:"left"}},[t._v("產品")]),a("el-menu-item",{attrs:{index:"option",align:"left"}},[t._v("選項")]),a("el-menu-item",{attrs:{index:"product_group",align:"left"}},[t._v("產品群組")])],2),a("el-menu-item",{directives:[{name:"show",rawName:"v-show",value:t.region_deter,expression:"region_deter"}],attrs:{index:"region",align:"left"}},[a("i",{staticClass:"el-icon-map-location"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("業務地區")])]),a("el-menu-item",{attrs:{index:"Show_All",align:"left"}},[a("i",{staticClass:"el-icon-back"}),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("退回主畫面")])]),a("el-menu-item",{attrs:{index:"login",align:"left"}},[a("i",{staticClass:"el-icon-switch-button",staticStyle:{color:"#F56C6C"}}),a("span",{staticStyle:{color:"#F56C6C"},attrs:{slot:"title"},slot:"title"},[t._v("登出")])])],1)],1),a("el-link",{staticStyle:{position:"absolute",right:"80px",top:"32px"},attrs:{type:"success",icon:"el-icon-s-custom"}},[t._v(t._s(t.user[0]))])],1)],1)},bt=[];function wt(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=xt(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function xt(t,e){if(t){if("string"===typeof t)return St(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?St(t,e):void 0}}function St(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var kt={data:function(){return{user:[],user_id:"",user_deter:!1,product_deter:!1,region_deter:!1}},created:function(){var t=this;this.user=JSON.parse(sessionStorage.getItem("user")),this.axios.get("/admin_user",{}).then((function(e){t.all_Data=JSON.parse(JSON.stringify(e.data)),t.user_data=JSON.parse(JSON.stringify(t.all_Data["user_data"]));var a,i=wt(t.user_data);try{for(i.s();!(a=i.n()).done;){var o=a.value;o.user==t.user[0]&&(t.user_id=o.user_id)}}catch(f){i.e(f)}finally{i.f()}var r,n=new Set,l=wt(t.all_Data["group_data"]);try{for(l.s();!(r=l.n()).done;){var s=r.value;if(-1!=s.members.indexOf(String(t.user_id))&&""!=s.authority&&void 0!=JSON.parse(s.authority)["operator"]&&JSON.parse(s.authority)["operator"]!=[]){var c,u=wt(JSON.parse(s.authority)["operator"]);try{for(u.s();!(c=u.n()).done;){var p=c.value;n.add(p)}}catch(f){u.e(f)}finally{u.f()}}}}catch(f){l.e(f)}finally{l.f()}var d=[];n.has("使用者權限")&&(t.user_deter=!0,d.push("使用者權限")),n.has("產品權限")&&(t.product_deter=!0,d.push("產品權限")),n.has("區域權限")&&(t.region_deter=!0,d.push("區域權限")),n.has("下載權限")&&d.push("下載權限"),sessionStorage.setItem("authority",JSON.stringify(d))}))},methods:{route:function(t,e){"login"==t&&sessionStorage.clear()}}},Ot=kt,Dt=(a("2568"),Object(s["a"])(Ot,yt,bt,!1,null,null,null)),$t=Dt.exports,Nt={components:{Aside:$t},data:function(){return{all_Data:[],user_data:[]}},created:function(){var t=this;this.axios.get("/admin_user",{}).then((function(e){t.all_Data=JSON.parse(JSON.stringify(e.data)),t.user_data=JSON.parse(JSON.stringify(t.all_Data["user_data"]))}))},methods:{}},Jt=Nt,zt=(a("2795"),Object(s["a"])(Jt,gt,vt,!1,null,null,null)),Ct=zt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("Aside"),a("el-container",[a("el-main",[a("div",{attrs:{align:"left"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(e){t.form.id=0,t.form.user="",t.form.password="",t.form.email="",t.form.groups=[],t.form.region="",t.form.record="",t.form.description="",t.add_lock=!0}}},[t._v("新增")]),a("el-dialog",{attrs:{title:"使用者表單-新增",visible:t.add_lock},on:{"update:visible":function(e){t.add_lock=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"user",label:"使用者",required:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入使用者名稱"},model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}})],1),a("el-form-item",{attrs:{prop:"password",label:"密碼",required:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入密碼"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",{attrs:{prop:"email",label:"信箱",required:""}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入信箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{attrs:{prop:"groups",label:"群組"}},[a("el-select",{attrs:{width:"400px",multiple:"",placeholder:"請輸入群組"},model:{value:t.form.groups,callback:function(e){t.$set(t.form,"groups",e)},expression:"form.groups"}},t._l(t.groups_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"region",label:"區域"}},[a("el-select",{attrs:{width:"400px",placeholder:"請輸入區域"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},t._l(t.region_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"description",label:"描述"}},[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"請輸入描述"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.add_lock=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.add_user}},[t._v("確定")])],1)],1)],1),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"user",label:"使用者",width:"100"}}),a("el-table-column",{attrs:{prop:"password",label:"密碼",width:"100"}}),a("el-table-column",{attrs:{prop:"email",label:"信箱",width:"200"}}),a("el-table-column",{attrs:{prop:"groups",label:"群組",fit:""}}),a("el-table-column",{attrs:{prop:"region",label:"地區",width:"150"}}),a("el-table-column",{attrs:{prop:"description",label:"描述",width:"100"}}),a("el-table-column",{attrs:{prop:"description",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(e){return t.edit_assign(i.user)}}}),a("el-dialog",{attrs:{title:"使用者表單-修改",visible:t.edit_lock},on:{"update:visible":function(e){t.edit_lock=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"user",label:"使用者",required:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入使用者名稱"},model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}})],1),a("el-form-item",{attrs:{prop:"password",label:"密碼",required:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入密碼"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("el-form-item",{attrs:{prop:"email",label:"信箱",required:""}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入信箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",{attrs:{prop:"groups",label:"群組"}},[a("el-select",{attrs:{width:"400px",multiple:"",placeholder:"請輸入群組"},model:{value:t.form.groups,callback:function(e){t.$set(t.form,"groups",e)},expression:"form.groups"}},t._l(t.groups_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"region",label:"區域"}},[a("el-select",{attrs:{width:"400px",placeholder:"請輸入區域"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},t._l(t.region_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"description",label:"描述"}},[a("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"請輸入描述"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.edit_lock=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.edit_user}},[t._v("確定")])],1)],1),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(e){return t.delete_user(i.user)}}})]}}])})],1)],1)],1)],1)],1)},It=[];function jt(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=At(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function At(t,e){if(t){if("string"===typeof t)return Et(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Et(t,e):void 0}}function Et(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var Tt={components:{Aside:$t},data:function(){return{tableData:[],all_Data:[],user_data:[],group_data:[],groups_opt:[],region_opt:[],form:{id:0,user:"",password:"",email:"",groups:[],region:"",description:""},add_lock:!1,edit_lock:!1}},created:function(){var t=this;this.axios.get("/admin_user",{}).then((function(e){t.all_Data=JSON.parse(JSON.stringify(e.data)),t.user_data=JSON.parse(JSON.stringify(t.all_Data["user_data"])),t.group_data=JSON.parse(JSON.stringify(t.all_Data["group_data"])),t.region_data=JSON.parse(JSON.stringify(t.all_Data["region_data"])),t.tableData=JSON.parse(JSON.stringify(t.user_data));var a,i=JSON.parse(sessionStorage.getItem("user")),o=0,r=jt(t.user_data);try{for(r.s();!(a=r.n()).done;){var n=a.value;n.user==i[0]&&(o=n.user_id)}}catch(z){r.e(z)}finally{r.f()}var l,s=new Set,c=jt(t.all_Data["group_data"]);try{for(c.s();!(l=c.n()).done;){var u=l.value;if(-1!=u.members.indexOf(String(o))&&""!=u.authority&&void 0!=JSON.parse(u.authority)["operator"]&&JSON.parse(u.authority)["operator"]!=[]){var p,d=jt(JSON.parse(u.authority)["operator"]);try{for(d.s();!(p=d.n()).done;){var f=p.value;s.add(f)}}catch(z){d.e(z)}finally{d.f()}}}}catch(z){c.e(z)}finally{c.f()}s.has("使用者權限")||t.$router.push({name:"admin"});var _,h=jt(t.region_data);try{for(h.s();!(_=h.n()).done;){var m=_.value;t.region_opt.push({value:m.name,label:m.name})}}catch(z){h.e(z)}finally{h.f()}var g,v=jt(t.group_data);try{for(v.s();!(g=v.n()).done;){var y=g.value;t.groups_opt.push({value:y.caption,label:y.caption})}}catch(z){v.e(z)}finally{v.f()}var b,w=jt(t.tableData);try{for(w.s();!(b=w.n()).done;){var x=b.value;x["region"]=x["region"].replace("[","").replace("]","").split(",");for(var S=0;S<x["region"].length;S++)if(""!=x["region"][S]){var k,O=jt(t.region_data);try{for(O.s();!(k=O.n()).done;){var D=k.value;D["region_id"]==parseInt(x["region"][S])&&(x["region"][S]=D["name"])}}catch(z){O.e(z)}finally{O.f()}}x["region"]=JSON.stringify(x["region"]),x["region"]=x["region"].replace('["',"").replace('"]',"").replace(/","/g,","),x["groups"]=x["groups"].replace("[","").replace("]","").split(",");for(S=0;S<x["groups"].length;S++)if(""!=x["groups"][S]){var $,N=jt(t.group_data);try{for(N.s();!($=N.n()).done;){var J=$.value;J["group_id"]==parseInt(x["groups"][S])&&(x["groups"][S]=J["caption"])}}catch(z){N.e(z)}finally{N.f()}}x["groups"]=JSON.stringify(x["groups"]),x["groups"]=x["groups"].replace('["',"").replace('"]',"").replace(/","/g,",")}}catch(z){w.e(z)}finally{w.f()}}))},methods:{edit_assign:function(t){var e,a=jt(this.tableData);try{for(a.s();!(e=a.n()).done;){var i=e.value;t==i["user"]&&(this.form.id=i["user_id"],this.form.user=i["user"],this.form.password=i["password"],this.form.email=i["email"],this.form.groups=i["groups"],this.form.region=i["region"],this.form.record=i["record"],this.form.description=i["description"],""!=this.form.groups&&(this.form.groups=JSON.parse(('["'+i["groups"]+'"]').replace(/,/g,'","'))))}}catch(o){a.e(o)}finally{a.f()}this.edit_lock=!0},add_user:function(){var t=this;if(""!=this.form.user&&""!=this.form.password&&""!=this.form.email)if(void 0!=this.form.email.split("@")[1]){var e,a=jt(this.tableData);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(this.form.user==i["user"])return void this.$message({message:"使用者 "+this.form.user+" 重複",type:"error"})}}catch(p){a.e(p)}finally{a.f()}if(this.form.groups=JSON.stringify(this.form.groups).replace('["',"").replace('"]',"").replace(/","/g,","),"[]"!=this.form.groups){this.form.groups=this.form.groups.split(",");for(var o=0;o<this.form.groups.length;o++){var r,n=jt(this.group_data);try{for(n.s();!(r=n.n()).done;){var l=r.value;this.form.groups[o]==l["caption"]&&(this.form.groups[o]=l["group_id"])}}catch(p){n.e(p)}finally{n.f()}}this.form.groups=JSON.stringify(this.form.groups)}else this.form.groups="";if(""!=this.form.region){var s,c=jt(this.region_data);try{for(c.s();!(s=c.n()).done;){var u=s.value;this.form.region==u["name"]&&(this.form.region=u["region_id"])}}catch(p){c.e(p)}finally{c.f()}this.form.region="["+JSON.stringify(this.form.region)+"]"}else this.form.region="";this.axios.get("/operator_user",{params:{form:JSON.stringify(this.form),operator:"add"}}).then((function(e){t.add_lock=!1,t.form.id=0,t.form.user="",t.form.password="",t.form.email="",t.form.groups=[],t.form.region="",t.form.record="",t.form.description="",location.reload()}))}else this.$message({message:"請填入正確email格式",type:"error"});else this.$message({message:"請填入群組名稱及群組類別及信箱",type:"error"})},edit_user:function(){var t=this;if(""!=this.form.user&&""!=this.form.password&&""!=this.form.email)if(void 0!=this.form.email.split("@")[1]){if(this.form.groups=JSON.stringify(this.form.groups).replace('["',"").replace('"]',"").replace(/","/g,","),"[]"!=this.form.groups){this.form.groups=this.form.groups.split(",");for(var e=0;e<this.form.groups.length;e++){var a,i=jt(this.group_data);try{for(i.s();!(a=i.n()).done;){var o=a.value;this.form.groups[e]==o["caption"]&&(this.form.groups[e]=o["group_id"])}}catch(s){i.e(s)}finally{i.f()}}this.form.groups=JSON.stringify(this.form.groups)}else this.form.groups="";if(""!=this.form.region){var r,n=jt(this.region_data);try{for(n.s();!(r=n.n()).done;){var l=r.value;this.form.region==l["name"]&&(this.form.region=l["region_id"])}}catch(s){n.e(s)}finally{n.f()}this.form.region="["+JSON.stringify(this.form.region)+"]"}else this.form.region="";this.axios.get("/operator_user",{params:{form:JSON.stringify(this.form),operator:"edit"}}).then((function(e){t.add_lock=!1,t.form.id=0,t.form.user="",t.form.password="",t.form.email="",t.form.groups=[],t.form.region="",t.form.record="",t.form.description="",location.reload()}))}else this.$message({message:"請填入正確email格式",type:"error"});else this.$message({message:"請填入使用者名稱及密碼及信箱",type:"error"})},delete_user:function(t){var e=this;this.$confirm("是否刪除「 "+t+" 」群組?","刪除",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){e.axios.get("/operator_user",{params:{user_name:JSON.stringify(t),operator:"delete"}}).then((function(t){location.reload()})),e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},Mt=Tt,Vt=Object(s["a"])(Mt,qt,It,!1,null,null,null),Ft=Vt.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("Aside"),a("el-container",[a("el-main",[a("div",{attrs:{align:"left"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:function(e){t.form.id=0,t.form.name="",t.form.caption="",t.form.authority="",t.form.description="",t.form.members="",t.form.members_arr=[],t.form.region_authority=[],t.form.product_authority=[],t.add_lock=!0}}},[t._v("新增")]),a("el-dialog",{attrs:{title:"群組表單-新增",visible:t.add_lock},on:{"update:visible":function(e){t.add_lock=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{prop:"name",label:"群組名稱",required:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入群組名稱"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"caption",label:"群組類別",required:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入群組類別"},model:{value:t.form.caption,callback:function(e){t.$set(t.form,"caption",e)},expression:"form.caption"}})],1),a("el-form-item",{attrs:{prop:"region_authority",label:"區域權限"}},[a("el-select",{attrs:{width:"200px",multiple:"",placeholder:"請輸入區域權限"},model:{value:t.form.region_authority,callback:function(e){t.$set(t.form,"region_authority",e)},expression:"form.region_authority"}},t._l(t.region_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"product_authority",label:"產品權限"}},[a("el-select",{attrs:{width:"200px",multiple:"",placeholder:"請輸入產品權限"},model:{value:t.form.product_authority,callback:function(e){t.$set(t.form,"product_authority",e)},expression:"form.product_authority"}},t._l(t.product_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"operator_authority",label:"功能權限"}},[a("el-select",{attrs:{width:"200px",multiple:"",placeholder:"請輸入功能權限"},model:{value:t.form.operator_authority,callback:function(e){t.$set(t.form,"operator_authority",e)},expression:"form.operator_authority"}},t._l(t.operator_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"description",label:"描述"}},[a("el-input",{attrs:{width:"200px",placeholder:"請輸入描述"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("el-form-item",{attrs:{prop:"members",label:"成員"}},[a("el-select",{attrs:{width:"400px",multiple:"",placeholder:"請輸入成員"},model:{value:t.form.members_arr,callback:function(e){t.$set(t.form,"members_arr",e)},expression:"form.members_arr"}},t._l(t.user_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.add_lock=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.add_group}},[t._v("確定")])],1)],1)],1),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"id",width:"200"}}),a("el-table-column",{attrs:{align:"center",prop:"caption",label:"群組名稱",width:"100"}}),a("el-table-column",{attrs:{align:"center",prop:"authority",label:"權限",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row,o=e.$index;return[a("el-popover",{ref:"popover",attrs:{placement:"bottom-start",title:"權限",trigger:"hover",placement:"top"}},[a("span",{staticStyle:{"font-size":"15px",color:"black"}},[t._v("區域權限:")]),a("span",[t._v(t._s(t.region_authority)),a("br")]),a("span",{staticStyle:{"font-size":"15px",color:"black"}},[t._v("產品權限:")]),a("span",[t._v(t._s(t.product_authority)),a("br")]),a("span",{staticStyle:{"font-size":"15px",color:"black"}},[t._v("功能權限:")]),a("span",[t._v(t._s(t.operator_authority)),a("br")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=i.authority,expression:"row.authority != ''"}],attrs:{slot:"reference",type:"info",icon:"el-icon-s-check",circle:""},nativeOn:{mouseenter:function(e){return t.authority_all(i,o)}},slot:"reference"})],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"members",label:"成員",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("el-popover",{ref:"popover1",attrs:{placement:"top-start",title:"成員",trigger:"hover",placement:"top"}},[a("span",[t._v(t._s(i.members))]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:""!=i.members,expression:"row.members != ''"}],attrs:{slot:"reference",type:"info",icon:"el-icon-s-custom",circle:""},slot:"reference"})],1)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"description",label:"描述",width:"200"}}),a("el-table-column",{attrs:{align:"center",prop:"description",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(e){return t.edit_assign(i.name)}}}),a("el-dialog",{attrs:{align:"left",title:"群組表單-修改",visible:t.edit_lock},on:{"update:visible":function(e){t.edit_lock=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"120px"}},[a("el-form-item",{attrs:{prop:"name",label:"群組名稱(必填)",required:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入群組名稱"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("el-form-item",{attrs:{prop:"caption",label:"群組類別(必填)",required:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入群組類別"},model:{value:t.form.caption,callback:function(e){t.$set(t.form,"caption",e)},expression:"form.caption"}})],1),a("el-form-item",{attrs:{prop:"region_authority",label:"區域權限"}},[a("el-select",{attrs:{width:"200px",multiple:"",placeholder:"請輸入區域權限"},model:{value:t.form.region_authority,callback:function(e){t.$set(t.form,"region_authority",e)},expression:"form.region_authority"}},t._l(t.region_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"product_authority",label:"產品權限"}},[a("el-select",{attrs:{width:"200px",multiple:"",placeholder:"請輸入產品權限"},model:{value:t.form.product_authority,callback:function(e){t.$set(t.form,"product_authority",e)},expression:"form.product_authority"}},t._l(t.product_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"operator_authority",label:"功能權限"}},[a("el-select",{attrs:{width:"200px",multiple:"",placeholder:"請輸入功能權限"},model:{value:t.form.operator_authority,callback:function(e){t.$set(t.form,"operator_authority",e)},expression:"form.operator_authority"}},t._l(t.operator_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"description",label:"描述"}},[a("el-input",{attrs:{width:"200px",placeholder:"請輸入描述"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),a("el-form-item",{attrs:{prop:"members",label:"成員(可複選)"}},[a("el-select",{attrs:{width:"400px",multiple:"",placeholder:"請輸入"},model:{value:t.form.members_arr,callback:function(e){t.$set(t.form,"members_arr",e)},expression:"form.members_arr"}},t._l(t.user_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.edit_lock=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.edit_group}},[t._v("確定")])],1)],1),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(e){return t.delete_group(i.name)}}})]}}])})],1)],1)],1)],1)],1)},Kt=[];function Bt(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=Rt(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function Rt(t,e){if(t){if("string"===typeof t)return Pt(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Pt(t,e):void 0}}function Pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var Ut={components:{Aside:$t},data:function(){return{tableData:[],all_Data:[],user_data:[],group_data:[],region_authority:"",product_authority:"",operator_authority:"",add_lock:!1,edit_lock:!1,form:{id:0,name:"",caption:"",authority:"",region_authority:[],product_authority:[],operator_authority:[],description:"",members:"",members_arr:[]},user_opt:[],region_opt:[],product_opt:[],operator_opt:[{value:"下載權限",label:"下載權限"},{value:"使用者權限",label:"使用者權限"},{value:"產品權限",label:"產品權限"},{value:"區域權限",label:"區域權限"}]}},created:function(){var t=this;this.axios.get("/admin_user",{}).then((function(e){t.all_Data=JSON.parse(JSON.stringify(e.data)),t.user_data=JSON.parse(JSON.stringify(t.all_Data["user_data"])),t.group_data=JSON.parse(JSON.stringify(t.all_Data["group_data"])),t.region_data=JSON.parse(JSON.stringify(t.all_Data["region_data"])),t.product_data=JSON.parse(JSON.stringify(t.all_Data["product_data"])),t.tableData=JSON.parse(JSON.stringify(t.group_data));var a,i=JSON.parse(sessionStorage.getItem("user")),o=0,r=Bt(t.user_data);try{for(r.s();!(a=r.n()).done;){var n=a.value;n.user==i[0]&&(o=n.user_id)}}catch(j){r.e(j)}finally{r.f()}var l=new Set;console.log(t.all_Data["group_data"]);var s,c=Bt(t.all_Data["group_data"]);try{for(c.s();!(s=c.n()).done;){var u=s.value;if(-1!=u.members.indexOf(String(o))&&""!=u.authority&&void 0!=JSON.parse(u.authority)["operator"]&&JSON.parse(u.authority)["operator"]!=[]){var p,d=Bt(JSON.parse(u.authority)["operator"]);try{for(d.s();!(p=d.n()).done;){var f=p.value;l.add(f)}}catch(j){d.e(j)}finally{d.f()}}}}catch(j){c.e(j)}finally{c.f()}l.has("使用者權限")||t.$router.push({name:"admin"});var _,h=Bt(t.user_data);try{for(h.s();!(_=h.n()).done;){var m=_.value;t.user_opt.push({value:m.user,label:m.user})}}catch(j){h.e(j)}finally{h.f()}var g,v=Bt(t.region_data);try{for(v.s();!(g=v.n()).done;){var y=g.value;t.region_opt.push({value:y.name,label:y.name})}}catch(j){v.e(j)}finally{v.f()}var b,w=new Set,x=Bt(t.product_data);try{for(x.s();!(b=x.n()).done;){var S=b.value;w.add(S.category_id)}}catch(j){x.e(j)}finally{x.f()}var k,O=Bt(w);try{for(O.s();!(k=O.n()).done;){var D=k.value;t.product_opt.push({value:D,label:D})}}catch(j){O.e(j)}finally{O.f()}var $,N=Bt(t.tableData);try{for(N.s();!($=N.n()).done;){var J=$.value;J["members"]=J["members"].replace("[","").replace("]","").split(",");for(var z=0;z<J["members"].length;z++)if(""!=J["members"][z]){var C,q=Bt(t.user_data);try{for(q.s();!(C=q.n()).done;){var I=C.value;parseInt(J["members"][z])==I["user_id"]&&(J["members"][z]=I["user"])}}catch(j){q.e(j)}finally{q.f()}}J["members"]=JSON.stringify(J["members"]),J["members"]=J["members"].replace('["',"").replace('"]',"").replace(/","/g,",")}}catch(j){N.e(j)}finally{N.f()}}))},methods:{authority_all:function(t,e){this.region_authority="",this.product_authority="",this.operator_authority="";var a,i=Bt(JSON.parse(t.authority)["region"]);try{for(i.s();!(a=i.n()).done;){var o,r=a.value,n=Bt(this.region_data);try{for(n.s();!(o=n.n()).done;){var l=o.value;r==l["region_id"]&&(this.region_authority+=l["name"]+",")}}catch(_){n.e(_)}finally{n.f()}}}catch(_){i.e(_)}finally{i.f()}var s,c=Bt(JSON.parse(t.authority)["product"]);try{for(c.s();!(s=c.n()).done;){var u=s.value;this.product_authority+=u+","}}catch(_){c.e(_)}finally{c.f()}var p,d=Bt(JSON.parse(t.authority)["operator"]);try{for(d.s();!(p=d.n()).done;){var f=p.value;this.operator_authority+=f+","}}catch(_){d.e(_)}finally{d.f()}this.region_authority=this.region_authority.slice(0,this.region_authority.length-1),this.product_authority=this.product_authority.slice(0,this.product_authority.length-1),this.operator_authority=this.operator_authority.slice(0,this.operator_authority.length-1)},add_group:function(){var t=this;if(""!=this.form.name&&""!=this.form.caption){var e,a=Bt(this.tableData);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(this.form.name==i["name"])return void this.$message({message:"群組名稱 "+this.form.name+" 重複",type:"error"});if(this.form.name==i["name"])return void this.$message({message:"群組類別 "+this.form.caption+" 重複",type:"error"})}}catch(p){a.e(p)}finally{a.f()}if(0!=this.form.region_authority.length||0!=this.form.product_authority.length||this.form.operator_authority.length){this.form.authority='{"region":'+JSON.stringify(this.form.region_authority)+',"product":'+JSON.stringify(this.form.product_authority)+',"operator":'+JSON.stringify(this.form.operator_authority)+"}",this.form.authority=JSON.parse(this.form.authority);for(var o=0;o<this.form.authority["region"].length;o++){var r,n=Bt(this.region_data);try{for(n.s();!(r=n.n()).done;){var l=r.value;this.form.authority["region"][o]==l["name"]&&(this.form.authority["region"][o]=l["region_id"])}}catch(p){n.e(p)}finally{n.f()}}this.form.authority=JSON.stringify(this.form.authority)}else this.form.authority="";if(this.form.members=JSON.stringify(this.form.members_arr).replace('["',"").replace('"]',"").replace(/","/g,","),"[]"!=this.form.members){this.form.members=this.form.members.split(",");for(o=0;o<this.form.members.length;o++){var s,c=Bt(this.user_data);try{for(c.s();!(s=c.n()).done;){var u=s.value;this.form.members[o]==u["user"]&&(this.form.members[o]=u["user_id"])}}catch(p){c.e(p)}finally{c.f()}}this.form.members=JSON.stringify(this.form.members)}else this.form.members="";this.axios.get("/operator_group",{params:{form:JSON.stringify(this.form),operator:"add"}}).then((function(e){t.add_lock=!1,t.form.name="",t.form.caption="",t.form.authority="",t.form.region_authority=[],t.form.product_authority=[],t.form.operator_authority=[],t.form.description="",t.form.members="",t.form.members_arr="",location.reload()}))}else this.$message({message:"請填入群組名稱及群組類別",type:"error"})},edit_assign:function(t){var e,a=Bt(this.tableData);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(t==i["name"]){if(console.log(i),this.form.id=i["group_id"],this.form.name=i["name"],this.form.caption=i["caption"],this.form.authority=i["authority"],""!=i["authority"]){this.form.region_authority=JSON.parse(i["authority"])["region"];for(var o=0;o<this.form.region_authority.length;o++){var r,n=Bt(this.region_data);try{for(n.s();!(r=n.n()).done;){var l=r.value;this.form.region_authority[o]==l["region_id"]&&(this.form.region_authority[o]=l["name"])}}catch(s){n.e(s)}finally{n.f()}}this.form.product_authority=JSON.parse(i["authority"])["product"],this.form.operator_authority=JSON.parse(i["authority"])["operator"]}else this.form.region_authority=[],this.form.product_authority=[],this.form.operator_authority=[];this.form.description=i["description"],this.form.members=i["members"],""!=i["members"]?this.form.members_arr=JSON.parse(('["'+i["members"]+'"]').replace(/,/g,'","')):this.form.members_arr=[]}}}catch(s){a.e(s)}finally{a.f()}this.edit_lock=!0},edit_group:function(){var t=this;if(""!=this.form.name&&""!=this.form.caption){if(0!=this.form.region_authority.length||0!=this.form.product_authority.length){this.form.authority='{"region":'+JSON.stringify(this.form.region_authority)+',"product":'+JSON.stringify(this.form.product_authority)+',"operator":'+JSON.stringify(this.form.operator_authority)+"}",this.form.authority=JSON.parse(this.form.authority);for(var e=0;e<this.form.authority["region"].length;e++){var a,i=Bt(this.region_data);try{for(i.s();!(a=i.n()).done;){var o=a.value;this.form.authority["region"][e]==o["name"]&&(this.form.authority["region"][e]=o["region_id"])}}catch(s){i.e(s)}finally{i.f()}}this.form.authority=JSON.stringify(this.form.authority)}else this.form.authority="";if(this.form.members=JSON.stringify(this.form.members_arr).replace('["',"").replace('"]',"").replace(/","/g,","),"[]"!=this.form.members){this.form.members=this.form.members.split(",");for(e=0;e<this.form.members.length;e++){var r,n=Bt(this.user_data);try{for(n.s();!(r=n.n()).done;){var l=r.value;this.form.members[e]==l["user"]&&(this.form.members[e]=l["user_id"])}}catch(s){n.e(s)}finally{n.f()}}this.form.members=JSON.stringify(this.form.members)}else this.form.members="";this.axios.get("/operator_group",{params:{form:JSON.stringify(this.form),operator:"edit"}}).then((function(e){t.add_lock=!1,t.form.id=0,t.form.name="",t.form.caption="",t.form.authority="",t.form.prodcut_authority=[],t.form.region_authority=[],t.form.operator_authority=[],t.form.description="",t.form.members="",t.form.members_arr=[],location.reload()}))}else this.$message({message:"請填入群組名稱及群組類別",type:"error"})},delete_group:function(t){var e=this;this.$confirm("是否刪除「 "+t+" 」群組?","刪除",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){e.axios.get("/operator_group",{params:{group_name:JSON.stringify(t),operator:"delete"}}).then((function(t){location.reload()})),e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))}}},Gt=Ut,Ht=Object(s["a"])(Gt,Lt,Kt,!1,null,null,null),Qt=Ht.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("Aside"),a("el-container",[a("el-main",[a("div",{staticStyle:{position:"relative",right:"500px"}},[a("div",[t._v("帳號:"),a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:t.user[0],callback:function(e){t.$set(t.user,0,e)},expression:"user[0]"}})],1),a("div",[t._v("密碼:"),a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!t.edit_lock},model:{value:t.user[1],callback:function(e){t.$set(t.user,1,e)},expression:"user[1]"}})],1),a("div",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:0==t.edit_lock,expression:"edit_lock == false"}],attrs:{type:"primary",plain:""},on:{click:function(e){t.edit_lock=!0}}},[t._v("更改密碼")])],1),a("div",{staticStyle:{position:"relative",left:"20px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.edit_lock,expression:"edit_lock == true"}],attrs:{type:"primary",plain:""},on:{click:function(e){t.edit_lock=!1}}},[t._v("取消")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==t.edit_lock,expression:"edit_lock == true"}],attrs:{type:"primary",plain:""},on:{click:t.check}},[t._v("確認")])],1)])])],1)],1)],1)},Xt=[],Yt={components:{Aside:$t},data:function(){return{user:[],edit_lock:!1}},created:function(){this.user=JSON.parse(sessionStorage.getItem("user"))},methods:{check:function(){var t=this;""!=this.user[1]?this.axios.get("/edit_password",{params:{user:JSON.stringify(this.user)}}).then((function(e){sessionStorage.setItem("user",JSON.stringify(t.user)),t.edit_lock=!1,t.$message({message:"密碼修改成功",type:"success"})})):this.$message({message:"密碼不得為空",type:"error"})}}},Zt=Yt,te=(a("cafe"),Object(s["a"])(Zt,Wt,Xt,!1,null,null,null)),ee=te.exports,ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",[a("div",{staticStyle:{position:"relative",bottom:"5px"}},[t._v("資料更新時間:"+t._s(t.update_time))]),a("el-popover",{ref:"popover",attrs:{trigger:"hover",width:"300",placement:"bottom"}},[a("div",[a("div",[a("span",[t._v("成員名稱: "+t._s(t.user[0]))])]),a("div",[a("span",[t._v("-----------------------------------------")])]),a("div",[a("span",[t._v("單頁筆數: "),a("span",[a("el-select",{staticStyle:{width:"80px"},attrs:{size:"small",placeholder:"請選擇"},model:{value:t.pagesize,callback:function(e){t.pagesize=e},expression:"pagesize"}},[a("el-option",{key:"10",attrs:{label:"10",value:"10"}}),a("el-option",{key:"50",attrs:{label:"50",value:"50"}}),a("el-option",{key:"all",attrs:{label:"all",value:"all"}})],1)],1)])]),a("div",[a("span",[t._v("顯示模式:"),a("span",[a("el-switch",{attrs:{"active-text":"KeyID","active-value":"KeyID","inactive-text":"產品","inactive-value":"product"},on:{change:t.mode_switch},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}})],1)])]),a("div",[a("el-button",{staticStyle:{height:"10px"},attrs:{type:"text"},on:{click:function(e){return t.$router.push({name:"admin",query:{}})}}},[t._v("後台管理")])],1),a("div",[a("el-button",{staticStyle:{color:"#FFA1A1",height:"10px"},attrs:{type:"text"},on:{click:t.Logout}},[t._v("登出")])],1)]),a("el-button",{staticClass:"memeber_button",attrs:{slot:"reference",type:"text",icon:"el-icon-user"},slot:"reference"})],1)],1),a("div",{attrs:{align:"center"}},[a("div",[a("el-table",{ref:"showtable",attrs:{data:t.tableData}},[a("el-table-column",{attrs:{type:"selection",align:"center",prop:"checked",label:"KeyID",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"sn_id",label:"客戶",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"sn",label:"KeyID",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"region",label:"區域",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"user",label:"負責人",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"record",label:"紀錄",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"note1",label:"備註1",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"note2",label:"備註2",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"note3",label:"備註3",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"note4",label:"備註4",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"note5",label:"備註5",width:"150"}})],1)],1)])])},ie=[],oe={name:"KeyID",data:function(){return{all_Data:{},tableData:[],customer_data:[],region_data:[],origin_data:[],user:[],mode:"KeyID",update_time:"",pagesize:0}},created:function(){var t=this;this.axios.get("/KeyID",{}).then((function(e){t.user=JSON.parse(sessionStorage.getItem("user")),t.all_Data=JSON.parse(JSON.stringify(e.data)),console.log(t.all_Data),t.customer_data=JSON.parse(JSON.stringify(t.all_Data["customer_data"])),t.region_data=JSON.parse(JSON.stringify(t.all_Data["region_data"])),t.tableData=JSON.parse(JSON.stringify(t.all_Data["sn_data"]))}))},methods:{mode_switch:function(){var t=this;this.axios.post("/save_to_user_setting",{source:"KeyID",user:this.user,mode:this.mode}).then((function(e){t.$router.push({name:"Show_All"})}))},Logout:function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),sessionStorage.removeItem("authority"),this.$router.push("/login")}}},re=oe,ne=(a("66ca"),Object(s["a"])(re,ae,ie,!1,null,null,null)),le=ne.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("Aside"),a("el-container",[a("el-main",[a("el-button",{staticStyle:{position:"relative",right:"590px"},attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.add_assign}},[t._v("新增")]),a("el-dialog",{attrs:{title:"產品群組-新增",visible:t.dialogVisible_add,width:"60%","append-to-body":!0,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible_add=e}}},[a("el-scrollbar",{staticStyle:{height:"350px"}},[a("el-tree",{ref:"product_group_tree",staticStyle:{position:"relative",left:"440px",width:"400px",height:"350px"},attrs:{data:t.productgroup_tree,props:t.defaultProps,accordion:"","node-key":"id","show-checkbox":""},on:{check:t.choose_product_group},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,o=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(i.label))]),a("span",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=o["add"]&&0==t.deter_exist_group,expression:"data['add'] != true && deter_exist_group==false"}],attrs:{size:"mini",type:"text",size:"mini"},on:{click:function(){return t.append(i,o)}}},[t._v("\n              加入此標籤\n          ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==o["add"],expression:"data['add'] == true"}],attrs:{size:"mini",type:"text",size:"mini"},on:{click:function(){return t.remove(i,o)}}},[t._v("\n              重選標籤\n          ")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:1==o["add"],expression:"data['add'] == true"}],staticStyle:{"font-size":"14px",height:"22px"},attrs:{type:"success"}},[t._v("G")])],1)])}}])})],1),a("div",{staticStyle:{position:"absolute",top:"80px"}},[a("div",{staticStyle:{position:"relative"}},[t._v("群組名稱:"),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"請輸入群組名稱"},model:{value:t.product_dialog.caption,callback:function(e){t.$set(t.product_dialog,"caption",e)},expression:"product_dialog.caption"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("群組分類:"),a("el-select",{ref:"dialog_pro_tag",staticClass:"none_delete_tag",staticStyle:{width:"300px"},attrs:{filterable:"",remote:"",multiple:"",placeholder:"請輸入產品群組"},on:{focus:function(e){return t.make_blur("0")}},model:{value:t.product_dialog.tag,callback:function(e){t.$set(t.product_dialog,"tag",e)},expression:"product_dialog.tag"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("產品清單:"),a("el-select",{ref:"dialog_pro_group",staticClass:"none_delete_tag",staticStyle:{width:"300px"},attrs:{filterable:"",remote:"",multiple:"",placeholder:"請輸入產品群組"},on:{focus:function(e){return t.make_blur("1")}},model:{value:t.product_dialog.product_list,callback:function(e){t.$set(t.product_dialog,"product_list",e)},expression:"product_dialog.product_list"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("描述:"),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入描述"},model:{value:t.product_dialog.description,callback:function(e){t.$set(t.product_dialog,"description",e)},expression:"product_dialog.description"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("備註:"),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入備註"},model:{value:t.product_dialog.remarks,callback:function(e){t.$set(t.product_dialog,"remarks",e)},expression:"product_dialog.remarks"}})],1),a("span",[a("el-button",{staticStyle:{position:"relative",left:"30px"},attrs:{type:"danger",plain:""},on:{click:function(e){return t.cancel_product_group("add")}}},[t._v("取消")]),a("el-button",{staticStyle:{position:"relative",left:"40px"},attrs:{type:"primary",plain:""},on:{click:function(e){return t.store_product_group("add")}}},[t._v("確定")])],1),a("div")])],1),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"caption",label:"群組名稱",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"tag",label:"群組分類",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return t._l(JSON.parse(i.tag),(function(e,o){return a("span",[t._v("\n            "+t._s(e)+"\n            "),o!=JSON.parse(i.tag).length-1?a("span",[t._v("→")]):t._e()])}))}}])}),a("el-table-column",{attrs:{align:"center",prop:"product_list",label:"產品清單",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("el-popover",{ref:"popover",attrs:{placement:"bottom-start",title:"產品清單",trigger:"hover",placement:"top"}},[t._l(JSON.parse(i.product_list),(function(e){return a("span",[t._v(t._s(e)),a("br")])})),a("el-button",{staticStyle:{"font-size":"20px"},attrs:{slot:"reference",type:"text",icon:"el-icon-box"},slot:"reference"})],2)]}}])}),a("el-table-column",{attrs:{align:"center",prop:"description",label:"描述",width:"200"}}),a("el-table-column",{attrs:{align:"center",prop:"remarks",label:"備註",width:"200"}}),a("el-table-column",{attrs:{align:"center",prop:"operator",label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(e){return t.edit_assign(i.caption)}}}),a("el-dialog",{attrs:{title:"產品群組-修改",visible:t.dialogVisible_edit,width:"60%","append-to-body":!0,"show-close":!1},on:{"update:visible":function(e){t.dialogVisible_edit=e}}},[a("el-scrollbar",{staticStyle:{height:"350px"}},[a("el-tree",{ref:"product_group_tree",staticStyle:{position:"relative",left:"440px",width:"400px",height:"350px"},attrs:{data:t.productgroup_tree,props:t.defaultProps,accordion:"","node-key":"id","show-checkbox":""},on:{check:t.choose_product_group},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,o=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",[t._v(t._s(i.label))]),a("span",[a("el-button",{directives:[{name:"show",rawName:"v-show",value:1!=o["add"]&&0==t.deter_exist_group,expression:"data['add'] != true && deter_exist_group==false"}],attrs:{size:"mini",type:"text",size:"mini"},on:{click:function(){return t.append(i,o)}}},[t._v("\n                      加入此標籤\n                  ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:1==o["add"],expression:"data['add'] == true"}],attrs:{size:"mini",type:"text",size:"mini"},on:{click:function(){return t.remove(i,o)}}},[t._v("\n                      重選標籤\n                  ")]),a("el-tag",{directives:[{name:"show",rawName:"v-show",value:1==o["add"],expression:"data['add'] == true"}],staticStyle:{"font-size":"14px",height:"22px"},attrs:{type:"success"}},[t._v("G")])],1)])}}],null,!0)})],1),a("div",{staticStyle:{position:"absolute",top:"80px"}},[a("div",{staticStyle:{position:"relative"}},[t._v("群組名稱:"),a("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"請輸入群組名稱"},model:{value:t.product_dialog.caption,callback:function(e){t.$set(t.product_dialog,"caption",e)},expression:"product_dialog.caption"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("群組分類:"),a("el-select",{ref:"dialog_pro_tag",staticClass:"none_delete_tag",staticStyle:{width:"300px"},attrs:{filterable:"",remote:"",multiple:"",placeholder:"請輸入產品群組"},on:{focus:function(e){return t.make_blur("0")}},model:{value:t.product_dialog.tag,callback:function(e){t.$set(t.product_dialog,"tag",e)},expression:"product_dialog.tag"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("產品清單:"),a("el-select",{ref:"dialog_pro_group",staticClass:"none_delete_tag",staticStyle:{width:"300px"},attrs:{filterable:"",remote:"",multiple:"",placeholder:"請輸入產品群組"},on:{focus:function(e){return t.make_blur("1")}},model:{value:t.product_dialog.product_list,callback:function(e){t.$set(t.product_dialog,"product_list",e)},expression:"product_dialog.product_list"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("描述:"),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入描述"},model:{value:t.product_dialog.description,callback:function(e){t.$set(t.product_dialog,"description",e)},expression:"product_dialog.description"}})],1),a("div",{staticStyle:{position:"relative"}},[t._v("備註:"),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入備註"},model:{value:t.product_dialog.remarks,callback:function(e){t.$set(t.product_dialog,"remarks",e)},expression:"product_dialog.remarks"}})],1),a("span",[a("el-button",{staticStyle:{position:"relative",left:"30px"},attrs:{type:"danger",plain:""},on:{click:function(e){return t.cancel_product_group("edit")}}},[t._v("取消")]),a("el-button",{staticStyle:{position:"relative",left:"40px"},attrs:{type:"primary",plain:""},on:{click:function(e){return t.store_product_group("edit")}}},[t._v("確定")])],1),a("div")])],1),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(e){return t.delete_product_group(i.caption)}}})]}}])})],1)],1)],1)],1)],1)},ce=[];function ue(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=pe(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function pe(t,e){if(t){if("string"===typeof t)return de(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?de(t,e):void 0}}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var fe={components:{Aside:$t},data:function(){return{tableData:[],all_Data:[],option_data:[],product_data:[],product_group_data:[],user_data:[],dialogVisible_edit:!1,dialogVisible_add:!1,product_dialog:{id:0,caption:"",tag:[],product_list:[],description:"",remarks:"",product_list_detail:[]},productgroup_tree:[],productgroup_tree_origin:[],tree_node_count:0,child_node_map:new Map,caption_map:new Map,deter_exist_group:!1}},created:function(){var t=this;this.axios.get("/admin_product_group",{}).then((function(e){t.all_Data=JSON.parse(JSON.stringify(e.data)),t.user_data=JSON.parse(JSON.stringify(t.all_Data["user_data"])),t.product_data=JSON.parse(JSON.stringify(t.all_Data["product_data"])),t.option_data=JSON.parse(JSON.stringify(t.all_Data["option_data"])),t.product_group_data=JSON.parse(JSON.stringify(t.all_Data["product_group_data"]));var a,i=ue(t.option_data);try{for(i.s();!(a=i.n()).done;){var o=a.value;t.caption_map.set(o.option_name,{caption:o.caption,product_name:o.product_name})}}catch(L){i.e(L)}finally{i.f()}var r,n=ue(t.product_data);try{for(n.s();!(r=n.n()).done;){var l=r.value;t.caption_map.set(l.product_name,{caption:l.caption})}}catch(L){n.e(L)}finally{n.f()}for(var s=[],c=0;c<t.product_group_data.length;c++){s=[];var u,p=ue(JSON.parse(t.product_group_data[c]["product_list"]));try{for(p.s();!(u=p.n()).done;){var d=u.value;void 0!=t.caption_map.get(d)["product_name"]?s.push(t.caption_map.get(d)["caption"]+"("+t.caption_map.get(d)["product_name"]+")"):s.push(t.caption_map.get(d)["caption"])}}catch(L){p.e(L)}finally{p.f()}t.product_group_data[c]["product_list"]=JSON.stringify(s)}t.tableData=JSON.parse(JSON.stringify(t.product_group_data)),console.log(t.all_Data);var f,_=new Set,h=ue(t.all_Data["product_data"]);try{for(h.s();!(f=h.n()).done;){var m=f.value;_.add(m["category_id"])}}catch(L){h.e(L)}finally{h.f()}var g,v=ue(_);try{for(v.s();!(g=v.n()).done;){var y=g.value;t.productgroup_tree.push({id:t.tree_node_count,label:y,children:[]}),t.tree_node_count++}}catch(L){v.e(L)}finally{v.f()}var b,w=ue(t.all_Data["product_data"]);try{for(w.s();!(b=w.n()).done;)for(var x=b.value,S=0;S<t.productgroup_tree.length;S++)t.productgroup_tree[S]["label"]==x["category_id"]&&(t.productgroup_tree[S]["children"].push({id:t.tree_node_count,label:x["caption"],children:[],category:x["category_id"]}),t.tree_node_count++)}catch(L){w.e(L)}finally{w.f()}for(var k=0;k<t.productgroup_tree.length;k++)for(var O=0;O<t.productgroup_tree[k]["children"].length;O++){var D,$=ue(t.all_Data["product_data"]);try{for($.s();!(D=$.n()).done;){var N=D.value;if(t.productgroup_tree[k]["children"][O]["label"]==N["caption"]){var J,z=ue(t.all_Data["option_data"]);try{for(z.s();!(J=z.n()).done;){var C=J.value;N["product_name"]==C["product_name"]&&(t.productgroup_tree[k]["children"][O]["children"].push({id:t.tree_node_count,label:C["caption"],product_name:C["product_name"],children:[],category:C["product_name"]}),t.tree_node_count++)}}catch(L){z.e(L)}finally{z.f()}}}}catch(L){$.e(L)}finally{$.f()}}t.productgroup_tree_origin=JSON.parse(JSON.stringify(t.productgroup_tree));var q,I=ue(t.productgroup_tree);try{for(I.s();!(q=I.n()).done;){var j=q.value;if(0!=j["children"].length){var A,E=ue(j["children"]);try{for(E.s();!(A=E.n()).done;){var T=A.value;if(0!=T["children"].length){var M,V=ue(T["children"]);try{for(V.s();!(M=V.n()).done;){var F=M.value;0!=F["children"].length||(void 0!=F["product_name"]?t.child_node_map.set(F.label+"("+F["product_name"]+")",F.id):t.child_node_map.set(F.label,F.id))}}catch(L){V.e(L)}finally{V.f()}}else t.child_node_map.set(T.label,T.id)}}catch(L){E.e(L)}finally{E.f()}}else t.child_node_map.set(j.label,j.id)}}catch(L){I.e(L)}finally{I.f()}}))},methods:{choose_product_group:function(t,e){var a,i=[],o=[],r=ue(this.$refs.product_group_tree.getCheckedNodes());try{for(r.s();!(a=r.n()).done;){var n=a.value;0==n["children"].length&&(void 0!=n["product_name"]?(i.push(n["label"]+"("+n["product_name"]+")"),o.push({label:n["label"],category:n["category"]})):(i.push(n["label"]),o.push({label:n["label"],category:n["category"]})))}}catch(l){r.e(l)}finally{r.f()}this.product_dialog.product_list=i,this.product_dialog.product_list_detail=o,console.log(this.product_dialog.product_list_detail)},add_assign:function(){this.productgroup_tree=JSON.parse(JSON.stringify(this.productgroup_tree_origin)),this.dialogVisible_add=!0,this.product_dialog.id=0,this.product_dialog.caption="",this.product_dialog.tag=[],this.product_dialog.product_list=[],this.product_dialog.description="",this.product_dialog.remarks="",this.deter_exist_group=!1},edit_assign:function(t){var e=this;this.productgroup_tree=JSON.parse(JSON.stringify(this.productgroup_tree_origin));var a,i=ue(this.product_group_data);try{for(i.s();!(a=i.n()).done;){var o=a.value;o["caption"]==t&&(this.product_dialog.id=o["group_id"],this.product_dialog.caption=o["caption"],this.product_dialog.tag=JSON.parse(o["tag"]),this.product_dialog.product_list=JSON.parse(o["product_list"]),this.product_dialog.description=o["description"],this.product_dialog.remarks=o["remarks"])}}catch(m){i.e(m)}finally{i.f()}this.dialogVisible_edit=!0,console.log(this.child_node_map);var r,n=[],l=ue(this.product_dialog.product_list);try{for(l.s();!(r=l.n()).done;){var s=r.value;n.push(this.child_node_map.get(s))}}catch(m){l.e(m)}finally{l.f()}this.$nextTick((function(){e.$refs.product_group_tree.setCheckedKeys(n)})),this.$nextTick((function(){var t,a=[],i=ue(e.$refs.product_group_tree.getCheckedNodes());try{for(i.s();!(t=i.n()).done;){var o=t.value;0==o["children"].length&&a.push({label:o["label"],category:o["category"]})}}catch(m){i.e(m)}finally{i.f()}e.product_dialog.product_list_detail=a}));var c,u=ue(this.product_group_data);try{for(u.s();!(c=u.n()).done;){var p=c.value;if(p["caption"]==t){var d,f=this.productgroup_tree,_=ue(JSON.parse(p.tag));try{for(_.s();!(d=_.n()).done;){var h=d.value;f=f[this.search_tree_index(f,h)]["children"]}}catch(m){_.e(m)}finally{_.f()}f.unshift({id:this.tree_node_count++,label:p["caption"],children:[],disabled:!0,add:!0}),this.deter_exist_group=!0}}}catch(m){u.e(m)}finally{u.f()}},store_product_group:function(t){var e,a=new Set,i=ue(this.all_Data["option_data"]);try{for(i.s();!(e=i.n()).done;){var o=e.value;a.add(o["product_name"])}}catch(b){i.e(b)}finally{i.f()}if(""!=this.product_dialog.caption&&0!=this.product_dialog.product_list.length){var r,n=[],l=ue(this.product_dialog.product_list_detail);try{for(l.s();!(r=l.n()).done;){var s=r.value,c=0,u=s["label"].split("").reverse().join("").split("(");a.has(u[0].replace(")",""))&&(s["label"]=s["label"].replace("("+u[0].replace(")","")+")",""));var p,d=ue(this.all_Data["option_data"]);try{for(d.s();!(p=d.n()).done;){var f=p.value;if(s["label"]==f["caption"]&&s["category"]==f["product_name"]){n.push(f["option_name"]),c=1;break}}}catch(b){d.e(b)}finally{d.f()}if(0==c){var _,h=ue(this.all_Data["product_data"]);try{for(h.s();!(_=h.n()).done;){var m=_.value;if(s["label"]==m["caption"]){n.push(m["product_name"]);break}}}catch(b){h.e(b)}finally{h.f()}}}}catch(b){l.e(b)}finally{l.f()}var g,v=ue(this.product_group_data);try{for(v.s();!(g=v.n()).done;){var y=g.value;if(y["caption"]==this.product_dialog.caption&&y["group_id"]!=this.product_dialog.id)return void this.$message.error("產品名稱重複，請更改");if(y.product_list==JSON.stringify(n)&&y["group_id"]!=this.product_dialog.id)return void this.$message.error("群組內產品與其他群組完全重複")}}catch(b){v.e(b)}finally{v.f()}0!=this.deter_exist_group?(this.product_dialog.product_list=JSON.parse(JSON.stringify(n)),console.log(this.product_dialog),"add"==t?this.axios.get("/operator_product_group",{params:{product_dialog:JSON.stringify(this.product_dialog),operator:"add"}}).then((function(t){location.reload()})):"edit"==t&&this.axios.get("/operator_product_group",{params:{product_dialog:JSON.stringify(this.product_dialog),operator:"edit"}}).then((function(t){location.reload()}))):this.$message.error("請選擇群組群組分類")}else this.$message.error("請將「產品群組」新增單，填寫完整")},cancel_product_group:function(t){var e=this;this.product_dialog.caption="",this.product_dialog.tag=[],this.product_dialog.product_list=[],this.product_dialog.description="",this.product_dialog.remarks="",this.product_dialog.product_list_detail=[],this.$nextTick((function(){e.$refs.product_group_tree.setCheckedKeys([])})),"edit"==t?this.dialogVisible_edit=!1:"add"==t&&(this.dialogVisible_add=!1)},append:function(t,e){if(""!=this.product_dialog.caption){this.deter_exist_group=!0;var a={label:this.product_dialog.caption,children:[],disabled:!0,add:!0};e.children||this.$set(e,"children",[]),e.children.unshift(a);var i=t;while(void 0!=i.label)this.product_dialog["tag"].unshift(i.label),i=i.parent}else this.$message.error("請填寫「群組名稱」，再選擇插入位置")},remove:function(t,e){this.deter_exist_group=!1,this.tree_node_count--,this.product_dialog["tag"]=[];var a=t.parent,i=a.data.children||a.data,o=i.findIndex((function(t){return t.id===e.id}));i.splice(o,1)},make_blur:function(t){var e=this;"0"==t&&this.$nextTick((function(){e.$refs.dialog_pro_tag.blur()})),"1"==t&&this.$nextTick((function(){e.$refs.dialog_pro_group.blur()})),"2"==t&&this.$nextTick((function(){e.$refs.sub_row_pro.blur()}))},delete_product_group:function(t){var e=this;this.$confirm("是否刪除「 "+t+" 」群組?","刪除",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){e.axios.get("/operator_product_group",{params:{group_name:JSON.stringify(t),operator:"delete"}}).then((function(t){location.reload()})),e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},search_tree_index:function(t,e){for(var a=0;a<t.length;a++)if(t[a]["label"]==e)return a;return-1}}},_e=fe,he=(a("9942"),Object(s["a"])(_e,se,ce,!1,null,null,null)),me=he.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("Aside"),a("el-container",[a("el-main",[a("el-button",{staticStyle:{position:"relative",right:"590px"},attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.add_assign}},[t._v("新增")]),a("el-dialog",{attrs:{align:"left",title:"使用者表單-新增",visible:t.dialogVisible_add},on:{"update:visible":function(e){t.dialogVisible_add=e}}},[a("el-form",{attrs:{model:t.region_dialog,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"name",label:"地區",required:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入地區"},model:{value:t.region_dialog.name,callback:function(e){t.$set(t.region_dialog,"name",e)},expression:"region_dialog.name"}})],1),a("el-form-item",{attrs:{prop:"description",label:"描述"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入描述"},model:{value:t.region_dialog.description,callback:function(e){t.$set(t.region_dialog,"description",e)},expression:"region_dialog.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.dialogVisible_add=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.add_region}},[t._v("確定")])],1)],1),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{align:"center",prop:"region_id",label:"編號",width:"150"}}),a("el-table-column",{attrs:{align:"center",prop:"name",label:"地區",width:"200"}}),a("el-table-column",{attrs:{align:"center",prop:"description",label:"描述",width:"300"}}),a("el-table-column",{attrs:{align:"center",prop:"operator",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(e){return t.edit_assign(i)}}}),a("el-dialog",{attrs:{align:"left",title:"使用者表單-修改",visible:t.dialogVisible_edit},on:{"update:visible":function(e){t.dialogVisible_edit=e}}},[a("el-form",{attrs:{model:t.region_dialog,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"user",label:"編號"}},[a("span",[t._v(t._s(t.region_dialog.id))])]),a("el-form-item",{attrs:{prop:"name",label:"地區",required:""}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"請輸入地區"},model:{value:t.region_dialog.name,callback:function(e){t.$set(t.region_dialog,"name",e)},expression:"region_dialog.name"}})],1),a("el-form-item",{attrs:{prop:"description",label:"描述"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入描述"},model:{value:t.region_dialog.description,callback:function(e){t.$set(t.region_dialog,"description",e)},expression:"region_dialog.description"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.dialogVisible_edit=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.edit_region}},[t._v("確定")])],1)],1),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(e){return t.delete_region(i)}}})]}}])})],1)],1)],1)],1)],1)},ve=[];function ye(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=be(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function be(t,e){if(t){if("string"===typeof t)return we(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?we(t,e):void 0}}function we(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var xe={components:{Aside:$t},data:function(){return{tableData:[],all_Data:[],sn_data:[],customer_data:[],region_data:[],dialogVisible_edit:!1,dialogVisible_add:!1,region_dialog:{id:0,name:"",description:""}}},created:function(){var t=this;this.axios.get("/admin_region",{}).then((function(e){t.all_Data=JSON.parse(JSON.stringify(e.data)),t.customer_data=JSON.parse(JSON.stringify(t.all_Data["customer_data"])),t.region_data=JSON.parse(JSON.stringify(t.all_Data["region_data"])),t.sn_data=JSON.parse(JSON.stringify(t.all_Data["sn_data"])),t.tableData=JSON.parse(JSON.stringify(t.all_Data["region_data"]))}))},methods:{delete_region:function(t){var e=this;this.$confirm("是否刪除「 "+t["name"]+" 」地區?","刪除",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){var a,i=ye(e.sn_data);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(o["region"]==t["region_id"])return e.$message({type:"error",message:"該地區已與Sn資料串聯，無法刪除，只可修改!"})}}catch(r){i.e(r)}finally{i.f()}e.axios.get("/operator_region",{params:{id:t["region_id"],operator:"delete"}}).then((function(t){location.reload()})),e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},edit_assign:function(t){this.dialogVisible_edit=!0,this.region_dialog.id=t["region_id"],this.region_dialog.name=t["name"],this.region_dialog.description=t["description"]},edit_region:function(){var t=this;if(""==this.region_dialog.name)return this.$message({message:"請填入區域名稱",type:"error"});var e,a=ye(this.region_data);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(i.name==this.region_dialog.name)return void this.$message({message:"名稱與現有區域名稱重複",type:"error"})}}catch(o){a.e(o)}finally{a.f()}this.axios.get("/operator_region",{params:{region_dialog:JSON.stringify(this.region_dialog),operator:"edit"}}).then((function(e){t.dialogVisible_edit=!1,location.reload()}))},add_assign:function(){this.dialogVisible_add=!0,this.region_dialog.id=0,this.region_dialog.name="",this.region_dialog.description=""},add_region:function(){var t=this;if(""==this.region_dialog.name)return this.$message({message:"請填入區域名稱",type:"error"});var e,a=ye(this.region_data);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(i.name==this.region_dialog.name)return void this.$message({message:"名稱與現有區域名稱重複",type:"error"})}}catch(o){a.e(o)}finally{a.f()}this.axios.get("/operator_region",{params:{region_dialog:JSON.stringify(this.region_dialog),operator:"add"}}).then((function(e){t.dialogVisible_add=!1,location.reload()}))}}},Se=xe,ke=(a("cc6b"),Object(s["a"])(Se,ge,ve,!1,null,null,null)),Oe=ke.exports,De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("Aside"),a("el-container",[a("el-main",[a("el-button",{staticStyle:{position:"relative",right:"480px"},attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.add_assign}},[t._v("新增")]),a("el-dialog",{attrs:{align:"left",title:"使用者表單-新增",visible:t.dialogVisible_add},on:{"update:visible":function(e){t.dialogVisible_add=e}}},[a("el-form",{attrs:{model:t.product_dialog,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"category_id",label:"產品類別",required:""}},[a("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearch_category_id,placeholder:"請輸入產品類別"},model:{value:t.product_dialog.category_id,callback:function(e){t.$set(t.product_dialog,"category_id",e)},expression:"product_dialog.category_id"}})],1),a("el-form-item",{attrs:{prop:"product_name",label:"id",required:""}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入id"},model:{value:t.product_dialog.product_name,callback:function(e){t.$set(t.product_dialog,"product_name",e)},expression:"product_dialog.product_name"}})],1),a("el-form-item",{attrs:{prop:"caption",label:"產品名稱",required:""}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入名稱"},model:{value:t.product_dialog.caption,callback:function(e){t.$set(t.product_dialog,"caption",e)},expression:"product_dialog.caption"}})],1),a("el-form-item",{attrs:{prop:"remarks",label:"備註"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入備註"},model:{value:t.product_dialog.remarks,callback:function(e){t.$set(t.product_dialog,"remarks",e)},expression:"product_dialog.remarks"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.dialogVisible_add=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.add_check}},[t._v("確定")])],1)],1),a("el-autocomplete",{staticStyle:{position:"relative",left:"400px"},attrs:{"fetch-suggestions":t.querySearch,placeholder:"請輸入名稱"},on:{input:t.category_filter},model:{value:t.sort_value,callback:function(e){t.sort_value=e},expression:"sort_value"}}),a("el-tabs",{staticStyle:{width:"95%"},attrs:{type:"card"},on:{"tab-click":t.tabClick},model:{value:t.TabsValue,callback:function(e){t.TabsValue=e},expression:"TabsValue"}},[t._l(t.Tabs,(function(t,e){return a("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}})})),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"category_id",label:"產品類別",width:"100"}}),a("el-table-column",{attrs:{prop:"product_name",label:"id",width:"250"}}),a("el-table-column",{attrs:{prop:"caption",label:"產品名稱",fit:""}}),a("el-table-column",{attrs:{prop:"remarks",label:"備註",width:"150"}}),a("el-table-column",{attrs:{prop:"description",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(e){return t.edit_assign(i)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(e){return t.delete_product(i)}}}),void 0]}}])})],1)],2),a("el-dialog",{attrs:{align:"left",title:"使用者表單-修改",visible:t.dialogVisible_edit},on:{"update:visible":function(e){t.dialogVisible_edit=e}}},[a("el-form",{attrs:{model:t.product_dialog,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"category_id",label:"產品類別",required:""}},[a("el-autocomplete",{attrs:{"fetch-suggestions":t.querySearch_category_id,placeholder:"請輸入產品類別"},model:{value:t.product_dialog.category_id,callback:function(e){t.$set(t.product_dialog,"category_id",e)},expression:"product_dialog.category_id"}})],1),a("el-form-item",{attrs:{prop:"product_name",label:"id",required:""}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入id"},model:{value:t.product_dialog.product_name,callback:function(e){t.$set(t.product_dialog,"product_name",e)},expression:"product_dialog.product_name"}})],1),a("el-form-item",{attrs:{prop:"caption",label:"產品名稱",required:""}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入名稱"},model:{value:t.product_dialog.caption,callback:function(e){t.$set(t.product_dialog,"caption",e)},expression:"product_dialog.caption"}})],1),a("el-form-item",{attrs:{prop:"remarks",label:"備註"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入備註"},model:{value:t.product_dialog.remarks,callback:function(e){t.$set(t.product_dialog,"remarks",e)},expression:"product_dialog.remarks"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.dialogVisible_edit=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.edit_check()}}},[t._v("確定")])],1)],1)],1)],1)],1)],1)},$e=[];function Ne(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=Je(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function Je(t,e){if(t){if("string"===typeof t)return ze(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?ze(t,e):void 0}}function ze(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var Ce={components:{Aside:$t},data:function(){return{tableData:[],all_Data:[],product_data:[],option_data:[],origin_data:[],tab_data:[],info_data:[],TabsValue:"1",Tabs:[{label:"all",name:"1"},{label:"ezCAM",name:"2"},{label:"ezCAT",name:"3"},{label:"ezTool",name:"4"},{label:"Quote",name:"5"},{label:"ezPlan",name:"6"},{label:"ezDI",name:"7"},{label:"Other",name:"8"}],sort_value:"",caption_opt:[],dialogVisible_add:!1,product_dialog:{product_id:0,category_id:"",product_name:"",caption:"",remarks:""},dialogVisible_edit:!1,category_id_opt:[]}},created:function(){var t=this;this.axios.get("/admin_product",{headers:{"Content-Encoding":"gzip"}}).then((function(e){t.all_Data=JSON.parse(JSON.stringify(e.data)),t.product_data=JSON.parse(JSON.stringify(t.all_Data["product_data"])),t.option_data=JSON.parse(JSON.stringify(t.all_Data["option_data"])),t.info_data=JSON.parse(JSON.stringify(t.all_Data["info_data"])),t.tableData=JSON.parse(JSON.stringify(t.all_Data["product_data"])),t.origin_data=JSON.parse(JSON.stringify(t.tableData)),t.tab_data=JSON.parse(JSON.stringify(t.tableData));var a,i=Ne(t.tableData);try{for(i.s();!(a=i.n()).done;){var o=a.value;t.caption_opt.push({value:o["caption"],label:o["caption"]})}}catch(d){i.e(d)}finally{i.f()}var r,n=new Set,l=Ne(t.tableData);try{for(l.s();!(r=l.n()).done;){var s=r.value;n.add(s["category_id"])}}catch(d){l.e(d)}finally{l.f()}var c,u=Ne(n);try{for(u.s();!(c=u.n()).done;){var p=c.value;t.category_id_opt.push({value:p,label:p})}}catch(d){u.e(d)}finally{u.f()}}))},methods:{add_check:function(){var t=this;if(""!=this.product_dialog["category_id"]&&""!=this.product_dialog["product_name"]&&""!=this.product_dialog["caption"]){var e,a=Ne(this.product_data);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(i.product_id!=this.product_dialog.product_id&&i.caption==this.product_dialog.caption)return void this.$message({type:"error",message:"產品名稱與其他資料重複"});if(i.product_id!=this.product_dialog.product_id&&i.product_name==this.product_dialog.product_name)return void this.$message({type:"error",message:"id與其他資料重複"})}}catch(o){a.e(o)}finally{a.f()}this.$confirm("是否要新增{"+this.product_dialog["caption"]+"}產品","新增",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){t.axios.get("/operator_product",{params:{data:JSON.stringify(t.product_dialog),operator:"add"}}).then((function(e){location.reload(),t.$message({type:"success",message:"新增成功!"})}))})).catch((function(){t.$message({type:"info",message:"已取消新增"})}))}else this.$message({type:"error",message:"請填寫完整新增表單"})},add_assign:function(){this.dialogVisible_add=!0,this.product_dialog.product_id=0,this.product_dialog.category_id="",this.product_dialog.product_name="",this.product_dialog.caption="",this.product_dialog.remarks=""},edit_check:function(){var t=this;if(""!=this.product_dialog["category_id"]&&""!=this.product_dialog["product_name"]&&""!=this.product_dialog["caption"])if(this.product_data[this.product_dialog.product_id-1]["category_id"]!=this.product_dialog.category_id||this.product_data[this.product_dialog.product_id-1]["product_name"]!=this.product_dialog.product_name||this.product_data[this.product_dialog.product_id-1]["caption"]!=this.product_dialog.caption||this.product_data[this.product_dialog.product_id-1]["remarks"]!=this.product_dialog.remarks){var e,a=Ne(this.product_data);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(i.product_id!=this.product_dialog.product_id&&i.caption==this.product_dialog.caption)return void this.$message({type:"error",message:"產品名稱與其他資料重複"});if(i.product_id!=this.product_dialog.product_id&&i.product_name==this.product_dialog.product_name)return void this.$message({type:"error",message:"id與其他資料重複"})}}catch(o){a.e(o)}finally{a.f()}this.product_data[this.product_dialog.product_id-1]["caption"]!=this.product_dialog.caption?this.$confirm(" 是否要將 {"+this.product_data[this.product_dialog.product_id-1]["caption"]+"} 改為 {"+this.product_dialog.caption+"}","修改",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){t.axios.get("/operator_product",{params:{data:JSON.stringify(t.product_dialog),operator:"edit"}}).then((function(e){location.reload(),t.$message({type:"success",message:"修改成功!"})}))})).catch((function(){t.$message({type:"info",message:"已取消修改"})})):this.axios.get("/operator_product",{params:{data:JSON.stringify(this.product_dialog),operator:"edit"}}).then((function(e){location.reload(),t.$message({type:"success",message:"修改成功!"})}))}else this.$message({type:"error",message:"未做任何修改，請修改後重新再試"});else this.$message({type:"error",message:"請填寫完整新增表單"})},edit_assign:function(t){this.dialogVisible_edit=!0,this.product_dialog.product_id=t.product_id,this.product_dialog.category_id=t.category_id,this.product_dialog.product_name=t.product_name,this.product_dialog.caption=t.caption,this.product_dialog.remarks=t.remarks},delete_product:function(t){var e=this;this.$confirm("是否刪除「 "+t["caption"]+" 」?","刪除",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){var a,i=Ne(e.info_data);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(t["product_name"]==o["func_uid"])return void e.$message({type:"error",message:"當前資料還有此產品資料, 不允許刪除"})}}catch(s){i.e(s)}finally{i.f()}var r,n=Ne(e.option_data);try{for(n.s();!(r=n.n()).done;){var l=r.value;if(t["product_name"]==l["product_name"])return void e.$message({type:"error",message:"此產品下尚有option功能, 不允許刪除"})}}catch(s){n.e(s)}finally{n.f()}e.axios.get("/operator_product",{params:{data:JSON.stringify(t),operator:"delete"}}).then((function(t){location.reload()})),e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},tabClick:function(t,e){if(this.sort_value="","all"==t.label)this.tableData=JSON.parse(JSON.stringify(this.origin_data)),this.tab_data=JSON.parse(JSON.stringify(this.origin_data));else if("Other"==t.label){this.tableData=JSON.parse(JSON.stringify(this.origin_data));var a,i=new Set,o=Ne(this.Tabs);try{for(o.s();!(a=o.n()).done;){var r=a.value;"Other"!=r["label"]&&i.add(r["label"])}}catch(s){o.e(s)}finally{o.f()}for(var n=0;n<this.tableData.length;n++)i.has(this.tableData[n]["category_id"])&&(this.tableData.splice(n,1),n--);this.tab_data=JSON.parse(JSON.stringify(this.origin_data))}else{this.tableData=JSON.parse(JSON.stringify(this.origin_data));for(var l=0;l<this.tableData.length;l++)this.tableData[l]["category_id"]!=t.label&&(this.tableData.splice(l,1),l--);this.tab_data=JSON.parse(JSON.stringify(this.tableData))}},category_filter:function(){if(this.tableData=JSON.parse(JSON.stringify(this.tab_data)),""!=this.sort_value)for(var t=0;t<this.tableData.length;t++)-1==this.tableData[t]["caption"].indexOf(this.sort_value)&&(this.tableData.splice(t,1),t--)},querySearch:function(t,e){var a=t?this.caption_opt.filter(this.createFilter(t)):this.caption_opt;e(a)},querySearch_category_id:function(t,e){var a=t?this.category_id_opt.filter(this.createFilter(t)):this.category_id_opt;e(a)},createFilter:function(t){return function(e){return-1!=String(e.value).toLowerCase().indexOf(String(t).toLowerCase())}}}},qe=Ce,Ie=Object(s["a"])(qe,De,$e,!1,null,null,null),je=Ie.exports,Ae=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-container",[a("Aside"),a("el-container",[a("el-main",[a("el-button",{staticStyle:{position:"relative",right:"480px"},attrs:{type:"primary",icon:"el-icon-plus",plain:""},on:{click:t.add_assign}},[t._v("新增")]),a("el-dialog",{attrs:{align:"left",title:"使用者表單-新增",visible:t.dialogVisible_add},on:{"update:visible":function(e){t.dialogVisible_add=e}}},[a("el-form",{attrs:{model:t.option_dialog,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"product_name",label:"產品id",required:""}},[a("el-select",{attrs:{placeholder:"請選擇產品id"},model:{value:t.option_dialog.product_name,callback:function(e){t.$set(t.option_dialog,"product_name",e)},expression:"option_dialog.product_name"}},t._l(t.product_name_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"option_name",label:"選項id",required:""}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入選項id"},model:{value:t.option_dialog.option_name,callback:function(e){t.$set(t.option_dialog,"option_name",e)},expression:"option_dialog.option_name"}})],1),a("el-form-item",{attrs:{prop:"caption",label:"選項名稱",required:""}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入名稱"},model:{value:t.option_dialog.caption,callback:function(e){t.$set(t.option_dialog,"caption",e)},expression:"option_dialog.caption"}})],1),a("el-form-item",{attrs:{prop:"remarks",label:"備註"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入備註"},model:{value:t.option_dialog.remarks,callback:function(e){t.$set(t.option_dialog,"remarks",e)},expression:"option_dialog.remarks"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.dialogVisible_add=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.add_check}},[t._v("確定")])],1)],1),a("el-autocomplete",{staticStyle:{position:"relative",left:"400px"},attrs:{"fetch-suggestions":t.querySearch,placeholder:"請輸入選項名稱"},on:{input:t.category_filter},model:{value:t.sort_value,callback:function(e){t.sort_value=e},expression:"sort_value"}}),a("el-tabs",{staticStyle:{width:"95%"},attrs:{type:"card"},on:{"tab-click":t.tabClick},model:{value:t.TabsValue,callback:function(e){t.TabsValue=e},expression:"TabsValue"}},[t._l(t.Tabs,(function(t,e){return a("el-tab-pane",{key:t.name,attrs:{label:t.label,name:t.name}})})),a("el-table",{attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"category_id",label:"選項類別",width:"100"}}),a("el-table-column",{attrs:{prop:"product_name",label:"產品id",width:"150"}}),a("el-table-column",{attrs:{prop:"option_name",label:"選項id",width:"250"}}),a("el-table-column",{attrs:{prop:"caption",label:"選項名稱",width:"200"}}),a("el-table-column",{attrs:{prop:"remarks",label:"備註",fit:""}}),a("el-table-column",{attrs:{prop:"description",label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;e.$index;return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",circle:""},on:{click:function(e){return t.edit_assign(i)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",circle:""},on:{click:function(e){return t.delete_option(i)}}}),void 0]}}])})],1)],2),a("el-dialog",{attrs:{align:"left",title:"使用者表單-修改",visible:t.dialogVisible_edit},on:{"update:visible":function(e){t.dialogVisible_edit=e}}},[a("el-form",{attrs:{model:t.option_dialog,"label-width":"80px"}},[a("el-form-item",{attrs:{prop:"category_id",label:"產品類別",required:""}},[a("span",[t._v(t._s(t.option_dialog.category_id))])]),a("el-form-item",{attrs:{prop:"product_name",label:"產品id",required:""}},[a("el-select",{attrs:{placeholder:"請選擇產品id"},model:{value:t.option_dialog.product_name,callback:function(e){t.$set(t.option_dialog,"product_name",e)},expression:"option_dialog.product_name"}},t._l(t.product_name_opt,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{prop:"option_name",label:"選項id",required:""}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入選項id"},model:{value:t.option_dialog.option_name,callback:function(e){t.$set(t.option_dialog,"option_name",e)},expression:"option_dialog.option_name"}})],1),a("el-form-item",{attrs:{prop:"caption",label:"選項名稱",required:""}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入名稱"},model:{value:t.option_dialog.caption,callback:function(e){t.$set(t.option_dialog,"caption",e)},expression:"option_dialog.caption"}})],1),a("el-form-item",{attrs:{prop:"remarks",label:"備註"}},[a("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"請輸入備註"},model:{value:t.option_dialog.remarks,callback:function(e){t.$set(t.option_dialog,"remarks",e)},expression:"option_dialog.remarks"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.dialogVisible_edit=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.edit_check()}}},[t._v("確定")])],1)],1)],1)],1)],1)],1)},Ee=[];function Te(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=Me(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,l=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){l=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(l)throw r}}}}function Me(t,e){if(t){if("string"===typeof t)return Ve(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ve(t,e):void 0}}function Ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var Fe={components:{Aside:$t},data:function(){return{tableData:[],all_Data:[],product_data:[],option_data:[],origin_data:[],tab_data:[],info_data:[],TabsValue:"1",Tabs:[{label:"all",name:"1"},{label:"ezCAM",name:"2"},{label:"ezCAT",name:"3"},{label:"ezTool",name:"4"},{label:"Quote",name:"5"},{label:"ezPlan",name:"6"},{label:"ezDI",name:"7"},{label:"Other",name:"8"}],sort_value:"",caption_opt:[],dialogVisible_add:!1,option_dialog:{option_id:0,category_id:"",product_name:"",option_name:"",caption:"",remarks:""},dialogVisible_edit:!1,product_name_opt:[]}},created:function(){var t=this;this.axios.get("/admin_option",{headers:{"Content-Encoding":"gzip"}}).then((function(e){t.all_Data=JSON.parse(JSON.stringify(e.data)),t.product_data=JSON.parse(JSON.stringify(t.all_Data["product_data"])),t.option_data=JSON.parse(JSON.stringify(t.all_Data["option_data"])),t.info_data=JSON.parse(JSON.stringify(t.all_Data["info_data"])),t.tableData=JSON.parse(JSON.stringify(t.all_Data["option_data"])),t.origin_data=JSON.parse(JSON.stringify(t.tableData)),t.tab_data=JSON.parse(JSON.stringify(t.tableData));var a,i=new Set,o=Te(t.tableData);try{for(o.s();!(a=o.n()).done;){var r=a.value;i.add(r["caption"])}}catch(d){o.e(d)}finally{o.f()}var n,l=Te(i);try{for(l.s();!(n=l.n()).done;){var s=n.value;t.caption_opt.push({value:s,label:s})}}catch(d){l.e(d)}finally{l.f()}var c,u=Te(t.product_data);try{for(u.s();!(c=u.n()).done;){var p=c.value;t.product_name_opt.push({value:p.product_name,label:p.product_name})}}catch(d){u.e(d)}finally{u.f()}}))},methods:{add_check:function(){var t=this;if(""!=this.option_dialog["option_name"]&&""!=this.option_dialog["product_name"]&&""!=this.option_dialog["caption"]){var e,a=Te(this.option_data);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(i.option_id!=this.option_dialog.option_id&&i.caption==this.option_dialog.caption)return void this.$message({type:"error",message:"選項名稱與其他資料重複"});if(i.option_id!=this.option_dialog.option_id&&i.option_name==this.option_dialog.option_name)return void this.$message({type:"error",message:"選項id與其他資料重複"})}}catch(o){a.e(o)}finally{a.f()}this.$confirm("是否要新增{"+this.option_dialog["caption"]+"}產品","新增",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){t.axios.get("/operator_option",{params:{data:JSON.stringify(t.option_dialog),operator:"add"}}).then((function(e){location.reload(),t.$message({type:"success",message:"新增成功!"})}))})).catch((function(){t.$message({type:"info",message:"已取消新增"})}))}else this.$message({type:"error",message:"請填寫完整新增表單"})},add_assign:function(){this.dialogVisible_add=!0,this.option_dialog.option_id=0,this.option_dialog.category_id="",this.option_dialog.product_name="",this.option_dialog.option_name="",this.option_dialog.caption="",this.option_dialog.remarks=""},edit_check:function(){var t=this;if(""!=this.option_dialog["product_name"]&&""!=this.option_dialog["option_name"]&&""!=this.option_dialog["caption"])if(this.option_data[this.option_dialog.option_id-1]["product_name"]!=this.option_dialog.product_name||this.option_data[this.option_dialog.option_id-1]["option_name"]!=this.option_dialog.option_name||this.option_data[this.option_dialog.option_id-1]["caption"]!=this.option_dialog.caption||this.option_data[this.option_dialog.option_id-1]["remarks"]!=this.option_dialog.remarks){var e,a=Te(this.option_data);try{for(a.s();!(e=a.n()).done;){var i=e.value;if(i.option_id!=this.option_dialog.option_id&&i.caption==this.option_dialog.caption)return void this.$message({type:"error",message:"選項名稱與其他資料重複"});if(i.option_id!=this.option_dialog.option_id&&i.option_name==this.option_dialog.option_name)return void this.$message({type:"error",message:"選項id與其他資料重複"})}}catch(o){a.e(o)}finally{a.f()}this.option_data[this.option_dialog.option_id-1]["caption"]!=this.option_dialog.caption?this.$confirm(" 是否要將 {"+this.option_data[this.option_dialog.option_id-1]["caption"]+"} 改為 {"+this.option_dialog.caption+"}","修改",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){t.axios.get("/operator_option",{params:{data:JSON.stringify(t.option_dialog),operator:"edit"}}).then((function(e){location.reload(),t.$message({type:"success",message:"修改成功!"})}))})).catch((function(){t.$message({type:"info",message:"已取消修改"})})):this.axios.get("/operator_option",{params:{data:JSON.stringify(this.option_dialog),operator:"edit"}}).then((function(e){location.reload(),t.$message({type:"success",message:"修改成功!"})}))}else this.$message({type:"error",message:"未做任何修改，清修改後重新再試"});else this.$message({type:"error",message:"請填寫完整新增表單"})},edit_assign:function(t){this.dialogVisible_edit=!0,this.option_dialog.option_id=t.option_id,this.option_dialog.category_id=t.category_id,this.option_dialog.product_name=t.product_name,this.option_dialog.option_name=t.option_name,this.option_dialog.caption=t.caption,this.option_dialog.remarks=t.remarks},delete_option:function(t){var e=this;this.$confirm("是否刪除「 "+t["caption"]+" 」?","刪除",{confirmButtonText:"確定",cancelButtonText:"取消",type:"warning"}).then((function(){var a,i=Te(e.info_data);try{for(i.s();!(a=i.n()).done;){var o=a.value;if(t["option_name"]==o["func_uid"])return void e.$message({type:"error",message:"當前資料還有此選項資料, 不允許刪除"})}}catch(r){i.e(r)}finally{i.f()}e.axios.get("/operator_option",{params:{data:JSON.stringify(t),operator:"delete"}}).then((function(t){location.reload()})),e.$message({type:"success",message:"删除成功!"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},tabClick:function(t,e){if(this.sort_value="","all"!=t.label){this.tableData=JSON.parse(JSON.stringify(this.origin_data));for(var a=0;a<this.tableData.length;a++)this.tableData[a]["category_id"]!=t.label&&(this.tableData.splice(a,1),a--);this.tab_data=JSON.parse(JSON.stringify(this.tableData))}else this.tableData=JSON.parse(JSON.stringify(this.origin_data)),this.tab_data=JSON.parse(JSON.stringify(this.origin_data))},category_filter:function(){if(this.tableData=JSON.parse(JSON.stringify(this.tab_data)),""!=this.sort_value)for(var t=0;t<this.tableData.length;t++)-1==this.tableData[t]["caption"].indexOf(this.sort_value)&&(this.tableData.splice(t,1),t--)},querySearch:function(t,e){var a=t?this.caption_opt.filter(this.createFilter(t)):this.caption_opt;e(a)},createFilter:function(t){return function(e){return-1!=String(e.value).toLowerCase().indexOf(String(t).toLowerCase())}}}},Le=Fe,Ke=Object(s["a"])(Le,Ae,Ee,!1,null,null,null),Be=Ke.exports;i["default"].use(p["a"]);var Re=new p["a"]({routes:[{path:"*",redirect:"/"},{path:"/login",name:"login",component:mt},{path:"/",name:"Show_All",component:N},{path:"/keyid",name:"KeyID",component:le},{path:"/edit",name:"edit",component:T},{path:"/add",name:"add",component:U},{path:"/handle",name:"handle",component:et},{path:"/check/:verifyname",name:"check",component:ut},{path:"/admin",name:"admin",component:Ct},{path:"/password",name:"password",component:ee},{path:"/user",name:"user",component:Ft},{path:"/group",name:"group",component:Qt},{path:"/product",name:"product",component:je},{path:"/option",name:"option",component:Be},{path:"/region",name:"region",component:Oe},{path:"/product_group",name:"product_group",component:me}]}),Pe=a("5c96"),Ue=a.n(Pe),Ge=(a("0fae"),a("bc3a")),He=a.n(Ge),Qe=a("a7fe"),We=a.n(Qe),Xe=a("4328"),Ye=a.n(Xe);i["default"].prototype.$qs=Ye.a,i["default"].config.productionTip=!1,i["default"].use(We.a,He.a),He.a.defaults.baseURL="/api",i["default"].use(Ue.a),Re.beforeEach((function(t,e,a){"/check/:verifyname"==t.matched[0].path&&(sessionStorage.setItem("token","ImLogin"),He.a.get("/auto_login",{params:{user:t.params.verifyname}}).then((function(t){var e=t.data;sessionStorage.setItem("user",JSON.stringify(e))})));var i="ImLogin"==sessionStorage.getItem("token");if(i)if("/option"==t.path||"/product"==t.path||"/product_group"==t.path||"/user"==t.path||"/group"==t.path||"/region"==t.path){var o=JSON.parse(sessionStorage.getItem("authority"));"/region"==t.path?o.includes("區域權限")?a():(alert("無此權限"),a("/admin")):"/product"==t.path||"/product_group"==t.path||"/option"==t.path?o.includes("產品權限")?a():(alert("無此權限"),a("/admin")):"/user"!=t.path&&"/group"!=t.path||(o.includes("使用者權限")?a():(alert("無此權限"),a("/admin")))}else a();else"/login"!==t.path?a("/login"):a()}));var Ze=new i["default"]({router:Re,render:function(t){return t(u)}});Ze.$mount("#app")},"64a9":function(t,e,a){},"66ca":function(t,e,a){"use strict";var i=a("3774"),o=a.n(i);o.a},"69fc":function(t,e,a){"use strict";var i=a("7f9a"),o=a.n(i);o.a},"7f9a":function(t,e,a){},"8e8c":function(t,e,a){},9489:function(t,e,a){},9942:function(t,e,a){"use strict";var i=a("2ea6"),o=a.n(i);o.a},"9ce0":function(t,e,a){"use strict";var i=a("b377"),o=a.n(i);o.a},a041:function(t,e,a){"use strict";var i=a("2f97"),o=a.n(i);o.a},b377:function(t,e,a){},baaf:function(t,e,a){},bbcc:function(t,e,a){},c965:function(t,e,a){"use strict";var i=a("d7f7"),o=a.n(i);o.a},cafe:function(t,e,a){"use strict";var i=a("8e8c"),o=a.n(i);o.a},cc6b:function(t,e,a){"use strict";var i=a("baaf"),o=a.n(i);o.a},d7f7:function(t,e,a){}});
//# sourceMappingURL=app.70a2a955.js.map